triggersfile version 1
324
(0.1, 0, ti_once, [(map_free)], [(tutorial_box, "str_tutorial_map1"),
]),

(0, 0, ti_once, [], [
(party_set_slot, "p_town_1", 0, 3),
(party_set_slot, "p_town_1", 10, "scn_town_1_center"),
(party_set_slot, "p_town_1", 11, "scn_town_1_castle"),
(party_set_slot, "p_town_1", 13, "scn_town_1_tavern"),
(party_set_slot, "p_town_1", 14, "scn_town_1_store"),
(party_set_slot, "p_town_1", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_1", 16, "scn_town_1_arena"),
(party_set_slot, "p_town_1", 20, "trp_town_1_tavernkeeper"),
(party_set_slot, "p_town_1", 21, "trp_town_1_weaponsmith"),
(party_set_slot, "p_town_1", 22, "trp_town_1_armorer"),
(party_set_slot, "p_town_1", 23, "trp_town_1_merchant"),
(party_set_slot, "p_town_1", 40, "p_town_1_mercs"),
(party_set_slot, "p_town_1", 41, "itm_linen"),
(party_set_slot, "p_town_1", 42, 70),
(party_set_slot, "p_town_1", 45, "itm_pottery"),
(party_set_slot, "p_town_1", 46, 135),
(party_set_slot, "p_town_1", 80, 2),
(party_set_slot, "p_town_1", 81, 1),
(party_set_slot, "p_town_1", 82, 4),
(party_set_slot, "p_town_1", 83, 1),
(party_set_slot, "p_town_1", 84, 4),
(party_set_slot, "p_town_1", 85, 1),
(party_set_slot, "p_town_1", 87, "mst_arena_melee_fight_no_ranged"),
(party_set_slot, "p_town_2", 0, 3),
(party_set_slot, "p_town_2", 10, "scn_town_2_center"),
(party_set_slot, "p_town_2", 11, "scn_town_2_castle"),
(party_set_slot, "p_town_2", 13, "scn_town_2_tavern"),
(party_set_slot, "p_town_2", 14, "scn_town_2_store"),
(party_set_slot, "p_town_2", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_2", 16, "scn_town_2_arena"),
(party_set_slot, "p_town_2", 20, "trp_town_2_tavernkeeper"),
(party_set_slot, "p_town_2", 21, "trp_town_2_weaponsmith"),
(party_set_slot, "p_town_2", 22, "trp_town_2_armorer"),
(party_set_slot, "p_town_2", 23, "trp_town_2_merchant"),
(party_set_slot, "p_town_2", 40, "p_town_2_mercs"),
(party_set_slot, "p_town_2", 41, "itm_ale"),
(party_set_slot, "p_town_2", 42, 60),
(party_set_slot, "p_town_2", 45, "itm_spice"),
(party_set_slot, "p_town_2", 46, 135),
(party_set_slot, "p_town_2", 80, 2),
(party_set_slot, "p_town_2", 81, 1),
(party_set_slot, "p_town_2", 82, 3),
(party_set_slot, "p_town_2", 83, 2),
(party_set_slot, "p_town_2", 84, 4),
(party_set_slot, "p_town_2", 85, 6),
(party_set_slot, "p_town_2", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_3", 0, 3),
(party_set_slot, "p_town_3", 10, "scn_town_3_center"),
(party_set_slot, "p_town_3", 11, "scn_town_3_castle"),
(party_set_slot, "p_town_3", 13, "scn_town_3_tavern"),
(party_set_slot, "p_town_3", 14, "scn_town_3_store"),
(party_set_slot, "p_town_3", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_3", 16, "scn_town_3_arena"),
(party_set_slot, "p_town_3", 20, "trp_town_3_tavernkeeper"),
(party_set_slot, "p_town_3", 21, "trp_town_3_weaponsmith"),
(party_set_slot, "p_town_3", 22, "trp_town_3_armorer"),
(party_set_slot, "p_town_3", 23, "trp_town_3_merchant"),
(party_set_slot, "p_town_3", 40, "p_town_3_mercs"),
(party_set_slot, "p_town_3", 41, "itm_salt"),
(party_set_slot, "p_town_3", 42, 70),
(party_set_slot, "p_town_3", 45, "itm_dried_meat"),
(party_set_slot, "p_town_3", 46, 135),
(party_set_slot, "p_town_3", 80, 2),
(party_set_slot, "p_town_3", 81, 8),
(party_set_slot, "p_town_3", 82, 2),
(party_set_slot, "p_town_3", 83, 8),
(party_set_slot, "p_town_3", 84, 2),
(party_set_slot, "p_town_3", 85, 8),
(party_set_slot, "p_town_3", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_4", 0, 3),
(party_set_slot, "p_town_4", 10, "scn_town_4_center"),
(party_set_slot, "p_town_4", 11, "scn_town_4_castle"),
(party_set_slot, "p_town_4", 13, "scn_town_4_tavern"),
(party_set_slot, "p_town_4", 14, "scn_town_4_store"),
(party_set_slot, "p_town_4", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_4", 16, "scn_town_4_arena"),
(party_set_slot, "p_town_4", 20, "trp_town_4_tavernkeeper"),
(party_set_slot, "p_town_4", 21, "trp_town_4_weaponsmith"),
(party_set_slot, "p_town_4", 22, "trp_town_4_armorer"),
(party_set_slot, "p_town_4", 23, "trp_town_4_merchant"),
(party_set_slot, "p_town_4", 40, "p_town_4_mercs"),
(party_set_slot, "p_town_4", 41, "itm_smoked_fish"),
(party_set_slot, "p_town_4", 42, 70),
(party_set_slot, "p_town_4", 45, "itm_wool"),
(party_set_slot, "p_town_4", 46, 140),
(party_set_slot, "p_town_4", 80, 2),
(party_set_slot, "p_town_4", 81, 8),
(party_set_slot, "p_town_4", 82, 3),
(party_set_slot, "p_town_4", 83, 8),
(party_set_slot, "p_town_4", 84, 2),
(party_set_slot, "p_town_4", 85, 5),
(party_set_slot, "p_town_4", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_5", 0, 3),
(party_set_slot, "p_town_5", 10, "scn_town_5_center"),
(party_set_slot, "p_town_5", 11, "scn_town_5_castle"),
(party_set_slot, "p_town_5", 13, "scn_town_5_tavern"),
(party_set_slot, "p_town_5", 14, "scn_town_5_store"),
(party_set_slot, "p_town_5", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_5", 16, "scn_town_5_arena"),
(party_set_slot, "p_town_5", 20, "trp_town_5_tavernkeeper"),
(party_set_slot, "p_town_5", 21, "trp_town_5_weaponsmith"),
(party_set_slot, "p_town_5", 22, "trp_town_5_armorer"),
(party_set_slot, "p_town_5", 23, "trp_town_5_merchant"),
(party_set_slot, "p_town_5", 40, "p_town_5_mercs"),
(party_set_slot, "p_town_5", 41, "itm_wine"),
(party_set_slot, "p_town_5", 42, 78),
(party_set_slot, "p_town_5", 45, "itm_grain"),
(party_set_slot, "p_town_5", 46, 140),
(party_set_slot, "p_town_5", 80, 2),
(party_set_slot, "p_town_5", 81, 3),
(party_set_slot, "p_town_5", 82, 2),
(party_set_slot, "p_town_5", 83, 5),
(party_set_slot, "p_town_5", 84, 2),
(party_set_slot, "p_town_5", 85, 8),
(party_set_slot, "p_town_5", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_6", 0, 3),
(party_set_slot, "p_town_6", 10, "scn_town_6_center"),
(party_set_slot, "p_town_6", 11, "scn_town_6_castle"),
(party_set_slot, "p_town_6", 13, "scn_town_6_tavern"),
(party_set_slot, "p_town_6", 14, "scn_town_6_store"),
(party_set_slot, "p_town_6", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_6", 16, "scn_town_6_arena"),
(party_set_slot, "p_town_6", 20, "trp_town_6_tavernkeeper"),
(party_set_slot, "p_town_6", 21, "trp_town_6_weaponsmith"),
(party_set_slot, "p_town_6", 22, "trp_town_6_armorer"),
(party_set_slot, "p_town_6", 23, "trp_town_6_merchant"),
(party_set_slot, "p_town_6", 40, "p_town_6_mercs"),
(party_set_slot, "p_town_6", 41, "itm_oil"),
(party_set_slot, "p_town_6", 42, 64),
(party_set_slot, "p_town_6", 45, "itm_furs"),
(party_set_slot, "p_town_6", 46, 130),
(party_set_slot, "p_town_6", 80, 2),
(party_set_slot, "p_town_6", 81, 4),
(party_set_slot, "p_town_6", 82, 3),
(party_set_slot, "p_town_6", 83, 4),
(party_set_slot, "p_town_6", 84, 3),
(party_set_slot, "p_town_6", 85, 6),
(party_set_slot, "p_town_6", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_7", 0, 3),
(party_set_slot, "p_town_7", 10, "scn_town_7_center"),
(party_set_slot, "p_town_7", 11, "scn_town_7_castle"),
(party_set_slot, "p_town_7", 13, "scn_town_7_tavern"),
(party_set_slot, "p_town_7", 14, "scn_town_7_store"),
(party_set_slot, "p_town_7", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_7", 16, "scn_town_7_arena"),
(party_set_slot, "p_town_7", 20, "trp_town_7_tavernkeeper"),
(party_set_slot, "p_town_7", 21, "trp_town_7_weaponsmith"),
(party_set_slot, "p_town_7", 22, "trp_town_7_armorer"),
(party_set_slot, "p_town_7", 23, "trp_town_7_merchant"),
(party_set_slot, "p_town_7", 40, "p_town_7_mercs"),
(party_set_slot, "p_town_7", 41, "itm_wool"),
(party_set_slot, "p_town_7", 42, 58),
(party_set_slot, "p_town_7", 45, "itm_oil"),
(party_set_slot, "p_town_7", 46, 142),
(party_set_slot, "p_town_7", 80, 4),
(party_set_slot, "p_town_7", 81, 4),
(party_set_slot, "p_town_7", 82, 4),
(party_set_slot, "p_town_7", 83, 6),
(party_set_slot, "p_town_7", 84, 4),
(party_set_slot, "p_town_7", 85, 8),
(party_set_slot, "p_town_7", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_8", 0, 3),
(party_set_slot, "p_town_8", 10, "scn_town_8_center"),
(party_set_slot, "p_town_8", 11, "scn_town_8_castle"),
(party_set_slot, "p_town_8", 13, "scn_town_8_tavern"),
(party_set_slot, "p_town_8", 14, "scn_town_8_store"),
(party_set_slot, "p_town_8", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_8", 16, "scn_town_8_arena"),
(party_set_slot, "p_town_8", 20, "trp_town_8_tavernkeeper"),
(party_set_slot, "p_town_8", 21, "trp_town_8_weaponsmith"),
(party_set_slot, "p_town_8", 22, "trp_town_8_armorer"),
(party_set_slot, "p_town_8", 23, "trp_town_8_merchant"),
(party_set_slot, "p_town_8", 40, "p_town_8_mercs"),
(party_set_slot, "p_town_8", 41, "itm_ale"),
(party_set_slot, "p_town_8", 42, 65),
(party_set_slot, "p_town_8", 45, "itm_furs"),
(party_set_slot, "p_town_8", 46, 129),
(party_set_slot, "p_town_8", 80, 3),
(party_set_slot, "p_town_8", 81, 1),
(party_set_slot, "p_town_8", 82, 3),
(party_set_slot, "p_town_8", 83, 3),
(party_set_slot, "p_town_8", 84, 3),
(party_set_slot, "p_town_8", 85, 7),
(party_set_slot, "p_town_8", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_9", 0, 3),
(party_set_slot, "p_town_9", 10, "scn_town_9_center"),
(party_set_slot, "p_town_9", 11, "scn_town_9_castle"),
(party_set_slot, "p_town_9", 13, "scn_town_9_tavern"),
(party_set_slot, "p_town_9", 14, "scn_town_9_store"),
(party_set_slot, "p_town_9", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_9", 16, "scn_town_9_arena"),
(party_set_slot, "p_town_9", 20, "trp_town_9_tavernkeeper"),
(party_set_slot, "p_town_9", 21, "trp_town_9_weaponsmith"),
(party_set_slot, "p_town_9", 22, "trp_town_9_armorer"),
(party_set_slot, "p_town_9", 23, "trp_town_9_merchant"),
(party_set_slot, "p_town_9", 40, "p_town_9_mercs"),
(party_set_slot, "p_town_9", 41, "itm_iron"),
(party_set_slot, "p_town_9", 42, 65),
(party_set_slot, "p_town_9", 45, "itm_linen"),
(party_set_slot, "p_town_9", 46, 140),
(party_set_slot, "p_town_9", 80, 2),
(party_set_slot, "p_town_9", 81, 2),
(party_set_slot, "p_town_9", 82, 2),
(party_set_slot, "p_town_9", 83, 5),
(party_set_slot, "p_town_9", 84, 2),
(party_set_slot, "p_town_9", 85, 8),
(party_set_slot, "p_town_9", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_10", 0, 3),
(party_set_slot, "p_town_10", 10, "scn_town_10_center"),
(party_set_slot, "p_town_10", 11, "scn_town_10_castle"),
(party_set_slot, "p_town_10", 13, "scn_town_10_tavern"),
(party_set_slot, "p_town_10", 14, "scn_town_10_store"),
(party_set_slot, "p_town_10", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_10", 16, "scn_town_10_arena"),
(party_set_slot, "p_town_10", 20, "trp_town_10_tavernkeeper"),
(party_set_slot, "p_town_10", 21, "trp_town_10_weaponsmith"),
(party_set_slot, "p_town_10", 22, "trp_town_10_armorer"),
(party_set_slot, "p_town_10", 23, "trp_town_10_merchant"),
(party_set_slot, "p_town_10", 40, "p_town_10_mercs"),
(party_set_slot, "p_town_10", 41, "itm_oil"),
(party_set_slot, "p_town_10", 42, 80),
(party_set_slot, "p_town_10", 45, "itm_furs"),
(party_set_slot, "p_town_10", 46, 142),
(party_set_slot, "p_town_10", 47, "itm_salt"),
(party_set_slot, "p_town_10", 48, 130),
(party_set_slot, "p_town_10", 80, 2),
(party_set_slot, "p_town_10", 81, 3),
(party_set_slot, "p_town_10", 82, 2),
(party_set_slot, "p_town_10", 83, 5),
(party_set_slot, "p_town_10", 84, 2),
(party_set_slot, "p_town_10", 85, 8),
(party_set_slot, "p_town_10", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_11", 0, 3),
(party_set_slot, "p_town_11", 10, "scn_town_11_center"),
(party_set_slot, "p_town_11", 11, "scn_town_11_castle"),
(party_set_slot, "p_town_11", 13, "scn_town_11_tavern"),
(party_set_slot, "p_town_11", 14, "scn_town_11_store"),
(party_set_slot, "p_town_11", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_11", 16, "scn_town_11_arena"),
(party_set_slot, "p_town_11", 20, "trp_town_11_tavernkeeper"),
(party_set_slot, "p_town_11", 21, "trp_town_11_weaponsmith"),
(party_set_slot, "p_town_11", 22, "trp_town_11_armorer"),
(party_set_slot, "p_town_11", 23, "trp_town_11_merchant"),
(party_set_slot, "p_town_11", 40, "p_town_11_mercs"),
(party_set_slot, "p_town_11", 41, "itm_wool"),
(party_set_slot, "p_town_11", 42, 60),
(party_set_slot, "p_town_11", 45, "itm_wine"),
(party_set_slot, "p_town_11", 46, 133),
(party_set_slot, "p_town_11", 80, 2),
(party_set_slot, "p_town_11", 81, 8),
(party_set_slot, "p_town_11", 82, 3),
(party_set_slot, "p_town_11", 83, 4),
(party_set_slot, "p_town_11", 84, 3),
(party_set_slot, "p_town_11", 85, 6),
(party_set_slot, "p_town_11", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_12", 0, 3),
(party_set_slot, "p_town_12", 10, "scn_town_12_center"),
(party_set_slot, "p_town_12", 11, "scn_town_12_castle"),
(party_set_slot, "p_town_12", 13, "scn_town_12_tavern"),
(party_set_slot, "p_town_12", 14, "scn_town_12_store"),
(party_set_slot, "p_town_12", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_12", 16, "scn_town_12_arena"),
(party_set_slot, "p_town_12", 20, "trp_town_12_tavernkeeper"),
(party_set_slot, "p_town_12", 21, "trp_town_12_weaponsmith"),
(party_set_slot, "p_town_12", 22, "trp_town_12_armorer"),
(party_set_slot, "p_town_12", 23, "trp_town_12_merchant"),
(party_set_slot, "p_town_12", 40, "p_town_12_mercs"),
(party_set_slot, "p_town_12", 41, "itm_furs"),
(party_set_slot, "p_town_12", 42, 57),
(party_set_slot, "p_town_12", 45, "itm_smoked_fish"),
(party_set_slot, "p_town_12", 46, 133),
(party_set_slot, "p_town_12", 80, 3),
(party_set_slot, "p_town_12", 81, 8),
(party_set_slot, "p_town_12", 82, 4),
(party_set_slot, "p_town_12", 83, 6),
(party_set_slot, "p_town_12", 84, 4),
(party_set_slot, "p_town_12", 85, 5),
(party_set_slot, "p_town_12", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_13", 0, 3),
(party_set_slot, "p_town_13", 10, "scn_town_13_center"),
(party_set_slot, "p_town_13", 11, "scn_town_13_castle"),
(party_set_slot, "p_town_13", 13, "scn_town_13_tavern"),
(party_set_slot, "p_town_13", 14, "scn_town_13_store"),
(party_set_slot, "p_town_13", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_13", 16, "scn_town_13_arena"),
(party_set_slot, "p_town_13", 20, "trp_town_13_tavernkeeper"),
(party_set_slot, "p_town_13", 21, "trp_town_13_weaponsmith"),
(party_set_slot, "p_town_13", 22, "trp_town_13_armorer"),
(party_set_slot, "p_town_13", 23, "trp_town_13_merchant"),
(party_set_slot, "p_town_13", 40, "p_town_13_mercs"),
(party_set_slot, "p_town_13", 41, "itm_ale"),
(party_set_slot, "p_town_13", 42, 60),
(party_set_slot, "p_town_13", 45, "itm_iron"),
(party_set_slot, "p_town_13", 46, 150),
(party_set_slot, "p_town_13", 80, 2),
(party_set_slot, "p_town_13", 81, 8),
(party_set_slot, "p_town_13", 82, 4),
(party_set_slot, "p_town_13", 83, 5),
(party_set_slot, "p_town_13", 84, 4),
(party_set_slot, "p_town_13", 85, 7),
(party_set_slot, "p_town_13", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_14", 0, 3),
(party_set_slot, "p_town_14", 10, "scn_town_14_center"),
(party_set_slot, "p_town_14", 11, "scn_town_14_castle"),
(party_set_slot, "p_town_14", 13, "scn_town_14_tavern"),
(party_set_slot, "p_town_14", 14, "scn_town_14_store"),
(party_set_slot, "p_town_14", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_14", 16, "scn_town_14_arena"),
(party_set_slot, "p_town_14", 20, "trp_town_14_tavernkeeper"),
(party_set_slot, "p_town_14", 21, "trp_town_14_weaponsmith"),
(party_set_slot, "p_town_14", 22, "trp_town_14_armorer"),
(party_set_slot, "p_town_14", 23, "trp_town_14_merchant"),
(party_set_slot, "p_town_14", 40, "p_town_14_mercs"),
(party_set_slot, "p_town_14", 41, "itm_ale"),
(party_set_slot, "p_town_14", 42, 67),
(party_set_slot, "p_town_14", 45, "itm_salt"),
(party_set_slot, "p_town_14", 46, 130),
(party_set_slot, "p_town_14", 80, 2),
(party_set_slot, "p_town_14", 81, 4),
(party_set_slot, "p_town_14", 82, 2),
(party_set_slot, "p_town_14", 83, 5),
(party_set_slot, "p_town_14", 84, 2),
(party_set_slot, "p_town_14", 85, 6),
(party_set_slot, "p_town_14", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_15", 0, 3),
(party_set_slot, "p_town_15", 10, "scn_town_15_center"),
(party_set_slot, "p_town_15", 11, "scn_town_15_castle"),
(party_set_slot, "p_town_15", 13, "scn_town_15_tavern"),
(party_set_slot, "p_town_15", 14, "scn_town_15_store"),
(party_set_slot, "p_town_15", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_15", 16, "scn_town_15_arena"),
(party_set_slot, "p_town_15", 20, "trp_town_15_tavernkeeper"),
(party_set_slot, "p_town_15", 21, "trp_town_15_weaponsmith"),
(party_set_slot, "p_town_15", 22, "trp_town_15_armorer"),
(party_set_slot, "p_town_15", 23, "trp_town_15_merchant"),
(party_set_slot, "p_town_15", 40, "p_town_15_mercs"),
(party_set_slot, "p_town_15", 41, "itm_grain"),
(party_set_slot, "p_town_15", 42, 67),
(party_set_slot, "p_town_15", 45, "itm_spice"),
(party_set_slot, "p_town_15", 46, 130),
(party_set_slot, "p_town_15", 80, 2),
(party_set_slot, "p_town_15", 81, 4),
(party_set_slot, "p_town_15", 82, 2),
(party_set_slot, "p_town_15", 83, 5),
(party_set_slot, "p_town_15", 84, 2),
(party_set_slot, "p_town_15", 85, 6),
(party_set_slot, "p_town_15", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_16", 0, 3),
(party_set_slot, "p_town_16", 10, "scn_town_16_center"),
(party_set_slot, "p_town_16", 11, "scn_town_16_castle"),
(party_set_slot, "p_town_16", 13, "scn_town_16_tavern"),
(party_set_slot, "p_town_16", 14, "scn_town_16_store"),
(party_set_slot, "p_town_16", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_16", 16, "scn_town_16_arena"),
(party_set_slot, "p_town_16", 20, "trp_town_16_tavernkeeper"),
(party_set_slot, "p_town_16", 21, "trp_town_16_weaponsmith"),
(party_set_slot, "p_town_16", 22, "trp_town_16_armorer"),
(party_set_slot, "p_town_16", 23, "trp_town_16_merchant"),
(party_set_slot, "p_town_16", 40, "p_town_16_mercs"),
(party_set_slot, "p_town_16", 41, "itm_pottery"),
(party_set_slot, "p_town_16", 42, 67),
(party_set_slot, "p_town_16", 45, "itm_dried_meat"),
(party_set_slot, "p_town_16", 46, 130),
(party_set_slot, "p_town_16", 80, 2),
(party_set_slot, "p_town_16", 81, 4),
(party_set_slot, "p_town_16", 82, 2),
(party_set_slot, "p_town_16", 83, 5),
(party_set_slot, "p_town_16", 84, 2),
(party_set_slot, "p_town_16", 85, 6),
(party_set_slot, "p_town_16", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_town_17", 0, 3),
(party_set_slot, "p_town_17", 10, "scn_town_17_center"),
(party_set_slot, "p_town_17", 11, "scn_town_17_castle"),
(party_set_slot, "p_town_17", 13, "scn_town_17_tavern"),
(party_set_slot, "p_town_17", 14, "scn_town_17_store"),
(party_set_slot, "p_town_17", 15, "scn_town_1_gate"),
(party_set_slot, "p_town_17", 16, "scn_town_17_arena"),
(party_set_slot, "p_town_17", 20, "trp_town_17_tavernkeeper"),
(party_set_slot, "p_town_17", 21, "trp_town_17_weaponsmith"),
(party_set_slot, "p_town_17", 22, "trp_town_17_armorer"),
(party_set_slot, "p_town_17", 23, "trp_town_17_merchant"),
(party_set_slot, "p_town_17", 40, "p_town_17_mercs"),
(party_set_slot, "p_town_17", 41, "itm_dried_meat"),
(party_set_slot, "p_town_17", 42, 67),
(party_set_slot, "p_town_17", 45, "itm_oil"),
(party_set_slot, "p_town_17", 46, 130),
(party_set_slot, "p_town_17", 80, 2),
(party_set_slot, "p_town_17", 81, 4),
(party_set_slot, "p_town_17", 82, 2),
(party_set_slot, "p_town_17", 83, 5),
(party_set_slot, "p_town_17", 84, 2),
(party_set_slot, "p_town_17", 85, 6),
(party_set_slot, "p_town_17", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_zendar", 16, "scn_zendar_arena"),
(party_set_slot, "p_zendar", 87, "mst_arena_melee_fight"),
(party_set_slot, "p_minas_morgul", 16, "scn_tld_minas_morgul_arena"),
(party_set_slot, "p_minas_morgul", 80, 2),
(party_set_slot, "p_minas_morgul", 81, 2),
(party_set_slot, "p_minas_morgul", 82, 3),
(party_set_slot, "p_minas_morgul", 83, 3),
(party_set_slot, "p_minas_morgul", 84, 4),
(party_set_slot, "p_minas_morgul", 85, 8),
(party_set_slot, "p_minas_morgul", 87, "mst_orc_arena_melee_fight"),
(party_set_slot, "p_isengard", 16, "scn_tld_isengard_arena"),
(party_set_slot, "p_isengard", 80, 2),
(party_set_slot, "p_isengard", 81, 2),
(party_set_slot, "p_isengard", 82, 3),
(party_set_slot, "p_isengard", 83, 3),
(party_set_slot, "p_isengard", 84, 4),
(party_set_slot, "p_isengard", 85, 8),
(party_set_slot, "p_isengard", 87, "mst_uruk_arena_melee_fight"),
(party_set_slot, "p_castle_1", 0, 2),
(party_set_slot, "p_castle_1", 10, "scn_castle_1_exterior"),
(party_set_slot, "p_castle_1", 11, "scn_castle_1_interior"),
(party_set_slot, "p_castle_2", 0, 2),
(party_set_slot, "p_castle_2", 10, "scn_castle_2_exterior"),
(party_set_slot, "p_castle_2", 11, "scn_castle_2_interior"),
(party_set_slot, "p_castle_3", 0, 2),
(party_set_slot, "p_castle_3", 10, "scn_castle_3_exterior"),
(party_set_slot, "p_castle_4", 0, 2),
(party_set_slot, "p_castle_4", 10, "scn_castle_4_exterior"),
(party_set_slot, "p_castle_5", 0, 2),
(party_set_slot, "p_castle_5", 10, "scn_castle_5_exterior"),
(party_set_slot, "p_castle_6", 0, 2),
(party_set_slot, "p_castle_6", 10, "scn_castle_6_exterior"),
(party_set_slot, "p_castle_7", 0, 2),
(party_set_slot, "p_castle_7", 10, "scn_castle_7_exterior"),
(party_set_slot, "p_castle_8", 0, 2),
(party_set_slot, "p_castle_8", 10, "scn_castle_8_exterior"),
]),

(0, 0, ti_once, [], [
(assign, "$gondor_status", 3),
(assign, "$rohan_status", 3),
(assign, "$haradrim_status", 3),
(assign, "$easterling_status", 3),
(assign, "$corsair_status", 3),
(assign, "$dunlander_status", 3),
(assign, "$mordor_status", 5),
(assign, "$isengard_status", 4),
(assign, "$lothlorien_status", 3),
(assign, "$rivendell_status", 2),
(assign, "$woodelf_status", 3),
(assign, "$dol_guldur_status", 4),
(assign, "$moria_status", 2),
(assign, "$war_has_begun", 0),
(assign, "$mordor_isengard_war", 0),
(assign, "$elven_dol_guldur_war", 0),
(assign, "$victory_achieved", 0),
(assign, "$max_army_size", 500),
(assign, "$faction_recovery_chance", 20),
(assign, "$war_start_level", 8),
(assign, "$sunlight_penalty", 20),
(assign, "$night_missile_penalty", 30),
(assign, "$elf_night_missile_penalty", 10),
(assign, "$evil_men_frenzy_bonus", 15),
(assign, "$daytime", 1),
(assign, "$wound_setting", 8),
(assign, "$death_setting", 1),
(assign, "$healing_setting", 6),
(assign, "$chest_wound_penalty", -20),
(assign, "$capture_setting", 20),
(assign, "$map_hero_setting", 65),
    (try_begin),
    (ge, "$faction_mordor_member_status", 2),
    (assign, "$hero_capture_town_a", "$minas_tirith"),
    (assign, "$hero_capture_town_b", "$hornburg"),
    (else_try),
    (ge, "$faction_gondor_member_status", 2),
    (assign, "$hero_capture_town_a", "p_minas_morgul"),
    (assign, "$hero_capture_town_b", "p_isengard"),
(try_end),
(faction_set_slot, "fac_gondor", 2, 3),
(faction_set_slot, "fac_rohan", 2, 3),
(faction_set_slot, "fac_lothlorien", 2, 3),
(faction_set_slot, "fac_imladris", 2, 3),
(faction_set_slot, "fac_woodelves", 2, 3),
(faction_set_slot, "fac_mordor", 2, 3),
(faction_set_slot, "fac_haradrim", 2, 3),
(faction_set_slot, "fac_corsairs", 2, 3),
(faction_set_slot, "fac_easterlings", 2, 3),
(faction_set_slot, "fac_isengard", 2, 3),
(faction_set_slot, "fac_dunlanders", 2, 3),
(faction_set_slot, "fac_moria", 2, 3),
(store_random_in_range, "$minas_morgul_alarm", 1, 11),
(store_random_in_range, "$minas_tirith_alarm", 1, 11),
(store_random_in_range, "$isengard_alarm", 1, 11),
(store_random_in_range, "$hornburg_alarm", 1, 11),
(assign, "$minas_tirith", "p_town_1"),
(assign, "$pelargir", "p_town_2"),
(assign, "$linhir", "p_town_3"),
(assign, "$dol_amroth", "p_town_4"),
(assign, "$ethring", "p_town_5"),
(assign, "$edhellond", "p_town_6"),
(assign, "$lossarnach", "p_town_7"),
(assign, "$tarnost", "p_town_8"),
(assign, "$erech", "p_town_9"),
(assign, "$pinnath_gelin", "p_town_10"),
(assign, "$edoras", "p_town_11"),
(assign, "$aldburg", "p_town_12"),
(assign, "$hornburg", "p_town_13"),
(assign, "$west_emnet", "p_town_14"),
(assign, "$east_emnet", "p_town_15"),
(assign, "$westfold", "p_town_16"),
(assign, "$eastfold", "p_town_17"),
(disable_party, "p_ancient_ruins_anchor"),
(assign, "$galadriel_power", 50),
    (try_for_range, ":local0", "p_mound_of_mablung", "p_end_mounds"),
    (disable_party, ":local0"),
(try_end),
    (try_for_range, ":local0", "p_start_pyres", "p_end_pyres"),
    (disable_party, ":local0"),
(try_end),
(try_for_range, ":troop", "trp_brigand_lord", "trp_end_orc_uruk_troll"),
    (troop_set_slot, ":troop", 6, 1),
    (try_begin),
        (this_or_next|is_between, ":troop", "trp_blackroot_vale_archer", "trp_dol_amroth_youth"),
        (this_or_next|is_between, ":troop", "trp_lothlorien_scout", "trp_lothlorien_footman"),
        (this_or_next|is_between, ":troop", "trp_lothlorien_warden", "trp_greenwood_spearman"),
        (this_or_next|is_between, ":troop", "trp_rivendell_scout", "trp_dunedain_youth"),
        (this_or_next|is_between, ":troop", "trp_dunedain_ranger", "trp_gondor_youth"),
        (this_or_next|is_between, ":troop", "trp_archer_of_gondor", "trp_rohan_youth"),
        (this_or_next|is_between, ":troop", "trp_skirmisher_of_rohan", "trp_lancer_of_rohan"),
        (this_or_next|is_between, ":troop", "trp_harad_archer", "trp_dunnish_youth"),
        (this_or_next|is_between, ":troop", "trp_easterling_hurler", "trp_variag_pitfighter"),
        (this_or_next|is_between, ":troop", "trp_easterling_skirmisher", "trp_corsair_youth"),
        (this_or_next|is_between, ":troop", "trp_militia_of_umbar", "trp_corsair_marauder"),
        (this_or_next|is_between, ":troop", "trp_assassin_of_umbar", "trp_pikeman_of_umbar"),
        (this_or_next|is_between, ":troop", "trp_orc_archer_of_mordor", "trp_wolf_rider_of_moria"),
        (this_or_next|is_between, ":troop", "trp_uruk_hai_scout", "trp_fighting_uruk_hai_berserker"),
        (this_or_next|is_between, ":troop", "trp_noldorin_commander", "trp_elf_captain_of_mirkwood"),
        (is_between, ":troop", "trp_elf_captain_of_rivendell", "trp_lieutenant_of_gondor"),
        (troop_set_slot, ":troop", 6, 2),
        (else_try),
        (this_or_next|eq, ":troop", "trp_master_brigand"),
        (this_or_next|eq, ":troop", "trp_veteran_brigand"),
        (this_or_next|eq, ":troop", "trp_master_slaver"),
        (this_or_next|eq, ":troop", "trp_sheriff"),
        (this_or_next|eq, ":troop", "trp_veteran_constable"),
        (this_or_next|eq, ":troop", "trp_harad_desert_skirmisher"),
        (this_or_next|is_between, ":troop", "trp_squire_of_dol_amroth", "trp_lothlorien_scout"),
        (this_or_next|is_between, ":troop", "trp_dunedain_horse_master", "trp_dunedain_ranger"),
        (this_or_next|is_between, ":troop", "trp_squire_of_gondor", "trp_archer_of_gondor"),
        (this_or_next|is_between, ":troop", "trp_lancer_of_rohan", "trp_harad_youth"),
        (this_or_next|is_between, ":troop", "trp_harad_cavalry", "trp_harad_archer"),
        (this_or_next|is_between, ":troop", "trp_dunnish_horseman", "trp_dunnish_axeman"),
        (this_or_next|is_between, ":troop", "trp_corsair_marauder", "trp_assassin_of_umbar"),
        (this_or_next|is_between, ":troop", "trp_easterling_rider", "trp_easterling_hurler"),
        (this_or_next|is_between, ":troop", "trp_wolf_rider_of_isengard", "trp_orc_snaga_of_mordor"),
        (this_or_next|is_between, ":troop", "trp_wolf_rider_of_moria", "trp_snaga_of_moria"),
        (this_or_next|is_between, ":troop", "trp_warg_rider_of_gorgoroth", "trp_morgul_orc"),
        (this_or_next|is_between, ":troop", "trp_black_numenorian_veteran_horseman", "trp_end_orc_uruk_troll"),
        (this_or_next|is_between, ":troop", "trp_captain_of_gondor", "trp_ranger_captain"),
        (this_or_next|is_between, ":troop", "trp_lieutenant_of_rohan", "trp_lieutenant_of_isengard"),
        (this_or_next|is_between, ":troop", "trp_captain_of_isengard", "trp_lieutenant_of_mordor"),
        (is_between, ":troop", "trp_captain_of_mordor", "trp_dunnish_lieutenant"),
        (troop_set_slot, ":troop", 6, 3),
    (try_end),
(try_end),
    (try_for_range, ":troop", "trp_noldorin_commander", "trp_end_leaders"),
    (troop_set_slot, ":troop", 6, 3),
(try_end),
    (try_for_range, ":troop", "trp_map_heroes_begin", "trp_map_heroes_end"),
    (troop_set_slot, ":troop", 6, 3),
(try_end),
(assign, reg1, "$faction_influence"),
(setup_quest_text, "qst_trait_influence"),
(start_quest, "qst_trait_influence"),
]),

(1, 0, 168, [], [
(try_begin),
    (val_add, "$wages", "$weekly_wage"),
    (assign, ":wage", "$weekly_wage"),
    (assign, ":local1", 0),
    (try_begin),
        (eq, "$starting_faction", "fac_lorien"),
        (val_div, ":wage", 4),
        (val_add, "$weekly_soldiers", "$faction_rank"),
        (val_add, "$weekly_soldiers", 1),
    (else_try),
        (neg|eq, "$starting_faction", "fac_lorien"),
        (val_div, ":wage", 7),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_trait_oathkeeper"),
        (assign, reg2, ":wage"),
        (val_mul, reg2, 10),
        (val_div, reg2, 9),
        (val_sub, reg2, ":wage"),
        (val_max, reg2, 1),
        (val_add, ":local1", reg2),
    (else_try),
        (check_quest_active, "qst_trait_oathbreaker"),
        (assign, reg2, ":wage"),
        (val_mul, reg2, 9),
        (val_div, reg2, 10),
        (val_sub, reg2, ":wage"),
        (val_add, ":local1", reg2),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_trait_reverent"),
        (assign, reg2, ":wage"),
        (val_mul, reg2, 10),
        (val_div, reg2, 19),
        (val_sub, reg2, ":wage"),
        (val_max, reg2, 1),
        (val_add, ":local1", reg2),
    (try_end),
    (try_begin),
        (check_quest_active, "qst_trait_merciful"),
        (assign, reg2, ":wage"),
        (val_mul, reg2, 10),
        (val_div, reg2, 9),
        (val_sub, reg2, ":wage"),
        (val_max, reg2, 1),
        (val_add, ":local1", reg2),
    (try_end),
    (try_begin),
        (player_has_item, "itm_ring_of_hope"),
        (store_character_level, ":level", "trp_player"),
        (try_begin),
            (neg|ge, ":level", 10),
            (assign, reg2, ":wage"),
            (val_mul, reg2, 10),
            (val_div, reg2, 9),
            (val_sub, reg2, ":wage"),
            (val_max, reg2, 1),
            (val_add, ":local1", reg2),
        (else_try),
            (is_between, ":level", 10, 25),
            (assign, reg2, ":wage"),
            (val_mul, reg2, 10),
            (val_div, reg2, 9),
            (val_sub, reg2, ":wage"),
            (val_max, reg2, 1),
            (val_add, ":local1", reg2),
        (else_try),
            (is_between, ":level", 25, 30),
            (assign, reg2, ":wage"),
            (val_mul, reg2, 10),
            (val_div, reg2, 9),
            (val_sub, reg2, ":wage"),
            (val_max, reg2, 1),
            (val_add, ":local1", reg2),
        (else_try),
            (ge, ":level", 30),
            (assign, reg2, ":wage"),
            (val_mul, reg2, 10),
            (val_div, reg2, 9),
            (val_sub, reg2, ":wage"),
            (val_max, reg2, 1),
            (val_add, ":local1", reg2),
        (try_end),
    (try_end),
    (val_add, ":wage", ":local1"),
    (call_script, "script_update_influence_count", ":wage"),
    (assign, reg1, "$faction_influence"),
    (assign, reg2, ":wage"),
    (display_message, "@Weekly_Influence:_{reg2}/{reg1}.", 4292863579),
(try_end),
(try_begin),
    (check_quest_active, "qst_trait_foe_hammer"),
    (party_get_morale, ":morale", "p_main_party"),
    (val_mul, ":morale", 10),
    (val_div, ":morale", 9),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (check_quest_active, "qst_trait_battle_scarred"),
    (party_get_morale, ":morale", "p_main_party"),
    (val_mul, ":morale", 10),
    (val_div, ":morale", 9),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (check_quest_active, "qst_trait_orc_pit_champion"),
    (party_get_morale, ":morale", "p_main_party"),
    (val_mul, ":morale", 10),
    (val_div, ":morale", 9),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (check_quest_active, "qst_trait_bravery"),
    (party_get_morale, ":morale", "p_main_party"),
    (val_mul, ":morale", 10),
    (val_div, ":morale", 9),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (check_quest_active, "qst_trait_accursed"),
    (party_get_morale, ":morale", "p_main_party"),
    (val_div, ":morale", 10),
    (val_mul, ":morale", 9),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (check_quest_active, "qst_trait_merciful"),
    (party_get_morale, ":morale", "p_main_party"),
    (val_div, ":morale", 10),
    (val_mul, ":morale", 9),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (player_has_item, "itm_ring_of_hope"),
    (party_get_morale, ":morale", "p_main_party"),
    (val_mul, ":morale", 10),
    (store_character_level, ":local2", "trp_player"),
    (try_begin),
        (neg|ge, ":local2", 10),
        (val_div, ":morale", 9),
        (else_try),
        (is_between, ":local2", 10, 20),
        (val_div, ":morale", 8),
        (else_try),
        (is_between, ":local2", 20, 30),
        (val_div, ":morale", 7),
        (else_try),
        (ge, ":local2", 30),
        (val_div, ":morale", 6),
    (try_end),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (eq, "$whip_of_angmar_owned", 2),
    (party_get_morale, ":morale", "p_main_party"),
    (val_mul, ":morale", 10),
    (val_div, ":morale", 7),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (eq, "$khamuls_helm_wielded", 2),
    (party_get_morale, ":morale", "p_main_party"),
    (val_mul, ":morale", 10),
    (val_div, ":morale", 9),
    (party_set_morale, "p_main_party", ":morale"), 
(try_end),
(try_begin),
    (call_script, "script_check_trait_captain"),
(try_end),
(try_begin),
    (gt, "$trait_check_commands_issued", 0),
    (store_skill_level, ":level", skl_leadership, "trp_player"),
    (ge, ":level", 5),
    (assign, ":commands", "$trait_check_commands_issued"),
    (val_mul, ":commands", 7),
    (assign, "$trait_check_commands_issued", 0),
    (store_random, ":rnd", 100),
    (neg|ge, ":rnd", ":commands"),
    (call_script, "script_gain_trait_command_voice"),
(try_end),
(try_begin),
    (gt, "$trait_check_stealth_success", 0),
    (store_skill_level, ":level", skl_pathfinding, "trp_player"),
    (ge, ":level", 3),
    (assign, ":stealths", "$trait_check_stealth_success"),
    (val_mul, ":stealths", 10),
    (assign, "$trait_check_stealth_success", 0),
    (store_random, ":rnd", 100),
    (neg|ge, ":rnd", ":stealths"),
    (call_script, "script_gain_trait_stealthy"),
(try_end),
(try_begin),
    (gt, "$trait_check_unarmored_berserker", 0),
    (assign, ":level", "$trait_check_unarmored_berserker"),
    (val_mul, ":level", 5),
    (assign, "$trait_check_unarmored_berserker", 0),
    (store_random, ":rnd", 100),
    (neg|ge, ":rnd", ":level"),
    (store_skill_level, ":local10", skl_ironflesh, "trp_player"),
    (ge, ":local10", 6),
    (call_script, "script_gain_trait_berserker"),
(try_end),
(try_begin),
    (check_quest_active|neg, "qst_trait_battle_scarred"),
    (gt, "$trait_check_battle_scarred", 0),
    (assign, ":check", "$trait_check_battle_scarred"),
    (val_mul, ":check", 3),
    (assign, "$trait_check_battle_scarred", 0),
    (gt, ":check", 15),
    (store_random, ":rnd", 100),
    (neg|ge, ":rnd", ":check"),
    (call_script, "script_gain_trait_battle_scarred"),
(try_end),
(try_begin),
    (check_quest_active|neg, "qst_trait_foe_hammer"),
    (assign, ":count", 0),
    (try_for_range, ":hero", "trp_map_heroes_begin", "trp_map_heroes_end"),
        (troop_get_slot, ":slot0", ":hero", 0),
        (troop_get_slot, ":slot3", ":hero", 3),
        (eq, ":slot0", 5),
        (eq, ":slot3", 1),
        (store_troop_faction, ":faction", ":hero"),
        (try_begin),
            (ge, "$faction_gondor_member_status", 2),
            (this_or_next|eq, ":faction", "fac_mordor"),
            (this_or_next|eq, ":faction", "fac_isengard"),
            (this_or_next|eq, ":faction", "fac_dunland"),
            (this_or_next|eq, ":faction", "fac_harad"),
            (this_or_next|eq, ":faction", "fac_rhun"),
            (this_or_next|eq, ":faction", "fac_umbar"),
            (this_or_next|eq, ":faction", "fac_moria"),
                         (eq, ":faction", "fac_guldur"),
            (val_add, ":count", 1),
        (else_try),
            (eq, "$faction_mordor_member_status", 2),
            (eq, "$faction_isengard_member_status", 2),
            (this_or_next|eq, ":faction", "fac_gondor"),
            (this_or_next|eq, ":faction", "fac_rohan"),
            (this_or_next|eq, ":faction", "fac_imladris"),
            (this_or_next|eq, ":faction", "fac_lorien"),
                         (eq, ":faction", "fac_woodelf"),
            (val_add, ":count", 1),
        (else_try),
            (eq, "$faction_mordor_member_status", 2),
            (this_or_next|eq, ":faction", "fac_isengard"),
            (this_or_next|eq, ":faction", "fac_gondor"),
            (this_or_next|eq, ":faction", "fac_rohan"),
            (this_or_next|eq, ":faction", "fac_imladris"),
            (this_or_next|eq, ":faction", "fac_lorien"),
            (this_or_next|eq, ":faction", "fac_woodelf"),
            (this_or_next|eq, ":faction", "fac_moria"),
                         (eq, ":faction", "fac_dunland"),
            (val_add, ":count", 1),
        (else_try),
            (eq, "$faction_isengard_member_status", 2),
            (this_or_next|eq, ":faction", "fac_mordor"),
            (this_or_next|eq, ":faction", "fac_gondor"),
            (this_or_next|eq, ":faction", "fac_rohan"),
            (this_or_next|eq, ":faction", "fac_imladris"),
            (this_or_next|eq, ":faction", "fac_lorien"),
            (this_or_next|eq, ":faction", "fac_woodelf"),
            (this_or_next|eq, ":faction", "fac_harad"),
            (this_or_next|eq, ":faction", "fac_rhun"),
            (this_or_next|eq, ":faction", "fac_umbar"),
                         (eq, ":faction", "fac_guldur"),
            (val_add, ":count", 1),
        (try_end),
    (try_end),
    (ge, ":count", 2),
    (val_mul, ":count", 8),
    (store_random, ":rnd", 100, 0),
    (neg|ge, ":rnd", ":count"), 
    (call_script, "script_gain_trait_foe_hammer"),
(try_end),

(try_for_parties, ":party"),
    (store_faction_of_party, ":faction", ":party"),
    (eq, ":faction", ":local19"),
    (party_get_slot, ":local20", ":party", 3),
    (store_distance_to_party_from_party, ":dist", ":party", ":local20"),
    (eq, ":dist", 0),
    (call_script, "script_safe_remove_party", ":party"),
(try_end),

(assign, "$minas_tirith_healing", 0),
(assign, "$edoras_healing", 0),
(assign, "$isengard_healing", 0),
(assign, "$morannon_healing", 0),
]),

# 3 lengthy merchant related triggers cut here

(24, 0, 0, [], [
(try_begin),
    (assign, reg2, "p_zendar_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 4),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_thug", reg7),
    (store_random, reg8, 2),
    (party_add_members, reg2, "trp_cutthroat", reg8),
(try_end),
(try_begin),
    (assign, reg2, "p_woodsman_village_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 4),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_woodsman_youth", reg7),
    (store_random, reg8, 2),
    (party_add_members, reg2, "trp_woodsman_scout", reg8),
(try_end),
(try_begin),
    (assign, reg2, "p_hill_folk_village_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 4),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_northman_youth", reg7),
    (store_random, reg8, 2),
    (party_add_members, reg2, "trp_northman_scout", reg8),
(try_end),
(try_begin),
    (assign, reg2, "p_anduin_river_village_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 4),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_northman_youth", reg7),
    (store_random, reg8, 2),
    (party_add_members, reg2, "trp_northman_scout", reg8),
(try_end),
(try_begin),
    (assign, reg2, "p_limlight_river_village_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 4),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_northman_youth", reg7),
    (store_random, reg8, 2),
    (party_add_members, reg2, "trp_northman_scout", reg8),
(try_end),
    (try_for_range, reg2, "p_town_1_mercs", "p_town_11_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (try_begin),
        (neg|eq, reg2, "p_town_4_mercs"),
        (neg|eq, reg2, "p_town_5_mercs"),
        (neg|eq, reg2, "p_town_7_mercs"),
        (neg|eq, reg2, "p_town_9_mercs"),
        (neg|eq, reg2, "p_town_10_mercs"),
        (store_random, reg7, 4),
        (val_add, reg7, 1),
        (party_add_members, reg2, "trp_gondor_youth", reg7),
        (store_random, reg8, 2),
        (party_add_members, reg2, "trp_guardsman_of_gondor", reg8),
    (else_try),
        (eq, reg2, "p_town_9_mercs"),
        (store_random, reg8, 3),
        (party_add_members, reg2, "trp_blackroot_vale_archer", reg8),
        (store_random, reg7, 3),
        (val_add, reg7, 1),
        (party_add_members, reg2, "trp_gondor_youth", reg7),
    (else_try),
        (eq, reg2, "p_town_10_mercs"),
        (store_random, reg8, 3),
        (party_add_members, reg2, "trp_warrior_of_pinnath_gelin", reg8),
        (store_random, reg7, 3),
        (val_add, reg7, 1),
        (party_add_members, reg2, "trp_gondor_youth", reg7),
    (else_try),
        (eq, reg2, "p_town_7_mercs"),
        (store_random, reg8, 3),
        (party_add_members, reg2, "trp_lossarnach_axeman", reg8),
        (store_random, reg7, 3),
        (val_add, reg7, 1),
        (party_add_members, reg2, "trp_gondor_youth", reg7),
    (else_try),
        (eq, reg2, "p_town_5_mercs"),
        (store_random, reg8, 3),
        (party_add_members, reg2, "trp_clansman_of_lamedon", reg8),
        (store_random, reg7, 3),
        (val_add, reg7, 1),
        (party_add_members, reg2, "trp_gondor_youth", reg7),
    (else_try),
        (eq, reg2, "p_town_4_mercs"),
        (store_random, reg8, 3),
        (party_add_members, reg2, "trp_dol_amroth_youth", reg8),
        (store_random, reg7, 3),
        (party_add_members, reg2, "trp_squire_of_dol_amroth", reg7),
    (try_end),
(try_end),
    (try_for_range, reg2, "p_town_11_mercs", "p_morannon_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 4),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_rohan_youth", reg7),
    (store_random, reg8, 2),
    (party_add_members, reg2, "trp_esquire_of_rohan", reg8),
(try_end),
    (try_for_range, reg2, "p_morannon_mercs", "p_haradrim_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 5),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_orc_snaga_of_mordor", reg7),
    (store_random, reg7, 2),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_uruk_snaga_of_mordor", reg7),
    (store_random, reg8, 2),
    (try_begin),
        (eq, reg2, "p_osgiliath_mercs"),
        (party_add_members, reg2, "trp_corsair_youth", reg8),
        (else_try),
        (eq, reg2, "p_morannon_mercs"),
        (party_add_members, reg2, "trp_easterling_youth", reg8),
        (else_try),
        (eq, reg2, "p_minas_morgul_mercs"),
        (party_add_members, reg2, "trp_harad_youth", reg8),
    (try_end),
(try_end),
    (try_for_range, reg2, "p_isengard_mercs", "p_morannon"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 4),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_orc_snaga_of_isengard", reg7),
    (store_random, reg9, 3),
    (val_add, reg9, 1),
    (party_add_members, reg2, "trp_uruk_snaga_of_isengard", reg9),
    (store_random, reg8, 2),
    (party_add_members, reg2, "trp_dunnish_youth", reg8),
(try_end),
(try_begin),
    (assign, reg2, "p_dol_guldur_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 5),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_orc_snaga_of_mordor", reg7),
    (store_random, reg7, 2),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_uruk_snaga_of_mordor", reg7),
(try_end),
(try_begin),
    (assign, reg2, "p_moria_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 5),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_snaga_of_moria", reg7),
(try_end),
(try_begin),
    (assign, reg2, "p_henneth_annun_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 10),
    (neg|gt, reg7, 4),
    (party_add_members, reg2, "trp_ranger_of_ithilien", 1),
(try_end),
(try_begin),
    (assign, reg2, "p_haradrim_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 6),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_harad_youth", reg7),
    (store_random, reg8, 3),
    (party_add_members, reg2, "trp_harad_desert_warrior", reg8),
    (party_add_members, reg2, "trp_orc_snaga_of_mordor", reg8),
(try_end),
(try_begin),
    (assign, reg2, "p_dunlander_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 6),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_dunnish_youth", reg7),
    (store_random, reg8, 3),
    (party_add_members, reg2, "trp_dunnish_warrior", reg8),
    (party_add_members, reg2, "trp_uruk_snaga_of_isengard", reg8),
(try_end),
(try_begin),
    (assign, reg2, "p_corsair_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 6),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_corsair_youth", reg7),
    (store_random, reg8, 3),
    (party_add_members, reg2, "trp_corsair_warrior", reg8),
    (party_add_members, reg2, "trp_orc_snaga_of_mordor", reg8),
(try_end),
    (try_for_range, reg2, "p_easterling_north_mercs", "p_corsair_mercs"),
    (store_party_size, reg6, reg2),
    (neg|ge, reg6, 20),
    (store_random, reg7, 6),
    (val_add, reg7, 1),
    (party_add_members, reg2, "trp_easterling_youth", reg7),
    (store_random, reg8, 3),
    (party_add_members, reg2, "trp_easterling_warrior", reg8),
    (party_add_members, reg2, "trp_orc_snaga_of_mordor", reg8),
(try_end),
]),

(0, 1, ti_once, [], [(start_map_conversation, "trp_old_man"),
]),

(23, 0, 0, [], [
(store_random_in_range, "$minas_morgul_alarm", 1, 11),
(store_random_in_range, "$minas_tirith_alarm", 1, 11),
(store_random_in_range, "$isengard_alarm", 1, 11),
(store_random_in_range, "$hornburg_alarm", 1, 11),
(try_for_parties, ":party"),
    (party_get_slot, ":local1", ":party", 5),
    (eq, ":local1", 1),
    (party_set_slot, ":party", 5, 0),
(try_end),
]),

(1, 0, 0, [(ge, "$active_rescue", 1),], [
(assign, reg1, "$meta_alarm"),
(assign, reg2, "$meta_stealth"),
(val_mul, reg1, 10),
(val_mul, reg2, 10),
(store_random, reg3, 100, 0),
(store_random, reg4, 100, 0),
    (try_begin),
    (neg|gt, reg3, reg1),
        (try_begin),
        (gt, reg4, reg2),
        (display_message, "str_evaded_pursuit", 0),
        (else_try),
        (neg|gt, reg4, reg2),
        (display_message, "str_enemy_pursuit", 0),
            (try_begin),
            (eq, "$active_rescue", 1),
            (assign, reg1, "$minas_tirith"),
            (assign, reg2, "pt_gondor_trackers"),
            (else_try),
            (eq, "$active_rescue", 2),
            (assign, reg1, "$hornburg"),
            (assign, reg2, "pt_rohan_trackers"),
            (else_try),
            (eq, "$active_rescue", 4),
            (assign, reg1, "p_isengard"),
            (assign, reg2, "pt_isengard_trackers"),
            (else_try),
            (eq, "$active_rescue", 3),
            (assign, reg1, "p_minas_morgul"),
            (assign, reg2, "pt_mordor_trackers"),
            (else_try),
            (eq, "$active_rescue", 5),
            (assign, reg1, "p_ancient_ruins"),
            (assign, reg2, "pt_dol_guldur_trackers"),
        (try_end),
        (spawn_around_party, reg1, reg2),
        (party_set_ai_behavior, reg0, 1),
        (party_set_ai_object, reg0, "p_main_party"),
    (try_end),
(try_end),
(assign, "$meta_alert", 10),
    (try_begin),
    (eq, "$active_rescue", 1),
    (assign, "$minas_tirith_alarm", "$meta_alarm"),
    (else_try),
    (eq, "$active_rescue", 2),
    (assign, "$hornburg_alarm", "$meta_alarm"),
    (else_try),
    (eq, "$active_rescue", 3),
    (assign, "$isengard_alarm", "$meta_alarm"),
    (else_try),
    (eq, "$active_rescue", 4),
    (assign, "$minas_morgul_alarm", "$meta_alarm"),
(try_end),
(assign, "$active_rescue", 0),
]),

(1, 0, 0, [
(eq, "$daytime", 1),
(store_time_of_day, reg0),
(gt, reg0, 18),
], [
(display_message, "str_the_sun_sets", 4292863579),
(assign, "$daytime", 0),
(store_random, reg1, 10, 0),
    (try_begin),
    (neg|ge, reg1, 7),
    (play_sound, "snd_crickets", 0),
    (else_try),
    (ge, reg1, 7),
    (play_sound, "snd_wolf_short", 0),
(try_end),
    (try_begin),
    (call_script, "script_troop_night_modifications", 0, 0),
(try_end),
    (try_begin),
    (call_script, "script_optional_healing_boost", 0, 0),
(try_end),
(eq, "$night_tutorial", 0),
(tutorial_box, "str_tutorial_night"),
(assign, "$night_tutorial", 1),
]),

(1, 0, 0, [
(eq, "$daytime", 0),
(store_time_of_day, reg0),
(ge, reg0, 3),
(neg|gt, reg0, 18),
   ], [
(display_message, "str_the_sun_rises", 4292863579),
(assign, "$daytime", 1),
(play_sound, "snd_rooster", 0),
    (try_begin),
    (call_script, "script_troop_daylight_modifications", 0, 0),
(try_end),
    (try_begin),
    (call_script, "script_optional_healing_boost", 0, 0),
(try_end),
]),

(38, 0, 0, [], [
(assign, ":local0", 0),
    (try_for_parties, ":local1"),
    (store_faction_of_party, ":local2", ":local1"),
    (this_or_next|eq, ":local2", "fac_mordor"),
    (this_or_next|eq, ":local2", "fac_isengard"),
    (this_or_next|eq, ":local2", "fac_dol_guldur"),
    (this_or_next|eq, ":local2", "fac_tribal_orcs"),
    (this_or_next|eq, ":local2", "fac_mountain_goblins"),
    (this_or_next|eq, ":local2", "fac_mordor_caravans"),
    (this_or_next|eq, ":local2", "fac_isengard_caravans"),
    (this_or_next|eq, ":local2", "fac_deserters_of_mordor"),
    (this_or_next|eq, ":local2", "fac_deserters_of_isengard"),
    (eq, ":local2", "fac_moria"),
    (party_get_template_id, ":local3", ":local1"),
    (neg|eq, ":local3", "pt_mordor_prisoner_train"),
    (neg|eq, ":local3", "pt_isengard_prisoner_train"),
    (store_random, ":local4", 4, 0),
    (neg|gt, ":local4", 2),
    (party_get_num_prisoner_stacks, ":local5", ":local1"),
    (gt, ":local5", 0),
        (try_for_range_backwards, ":local6", 0, ":local5"),
        (party_prisoner_stack_get_troop_id, ":local7", ":local1", ":local6"),
        (neg|troop_is_hero, ":local7"),
        (party_prisoner_stack_get_size, ":local8", ":local1", ":local6"),
        (neg|eq, ":local8", 0),
        (store_random_in_range, ":local9", 1, ":local8"),
        (neg|eq, ":local9", 0),
        (party_remove_prisoners, ":local1", ":local7", ":local9"),
        (neg|eq, ":local0", 1),
        (store_distance_to_party_from_party, ":local10", ":local1", 0),
        (neg|ge, ":local10", 10),
        (assign, ":local0", 1),
    (try_end),
(try_end),
(eq, ":local0", 1),
(ge, "$faction_gondor_member_status", 2),
(display_message, "str_player_witnesses_eating", 4294901760),
(assign, ":local0", 0),
]),

(50, 0, 0, [(ge, "$war_has_begun", 1),], [
    (try_for_parties, ":local0"),
    (store_faction_of_party, ":local1", ":local0"),
    (this_or_next|eq, ":local1", "fac_mordor"),
    (this_or_next|eq, ":local1", "fac_isengard"),
    (this_or_next|eq, ":local1", "fac_gondor"),
    (this_or_next|eq, ":local1", "fac_rohan"),
    (this_or_next|eq, ":local1", "fac_haradrim"),
    (this_or_next|eq, ":local1", "fac_easterlings"),
    (this_or_next|eq, ":local1", "fac_corsairs"),
    (eq, ":local1", "fac_dunlanders"),
    (store_party_size_wo_prisoners, ":local2", ":local0"),
    (gt, ":local2", "$max_army_size"),
    (assign, "$overflow", 0),
    (assign, ":local3", 0),
    (val_sub, ":local2", "$max_army_size"),
    (assign, "$overflow", ":local2"),
        (try_for_range, ":local4", "trp_brigand_lord", "trp_end_orc_uruk_troll"),
        (gt, "$overflow", 0),
        (party_count_members_of_type, ":local3", ":local0", ":local4"),
        (ge, ":local3", 1),
        (val_min, ":local3", "$overflow"),
        (party_remove_members, ":local0", ":local4", ":local3"),
        (val_sub, "$overflow", ":local3"),
    (try_end),
(try_end),
]),

(35, 0, 0, [], [
    (try_for_parties, ":local0"),
    (store_faction_of_party, ":local1", ":local0"),
    (eq, ":local1", "fac_corsairs"),
    (party_get_num_prisoners, ":local2", ":local0"),
    (ge, ":local2", 60),
    (party_get_num_prisoner_stacks, ":local3", ":local0"),
        (try_for_range_backwards, ":local4", 0, ":local3"),
        (party_prisoner_stack_get_troop_id, ":local5", ":local0", ":local4"),
        (neg|troop_is_hero, ":local5"),
        (party_prisoner_stack_get_size, ":local6", ":local0", ":local4"),
        (party_remove_prisoners, ":local0", ":local5", ":local6"),
    (try_end),
    (store_random, ":local7", 6, 0),
    (party_add_members, ":local0", "trp_corsair_raider", ":local7"),
(try_end),
]),

(45, 0, 0, [], [
    (try_for_parties, ":local0"),
    (store_faction_of_party, ":local1", ":local0"),
    (this_or_next|eq, ":local1", "fac_gondor"),
    (eq, ":local1", "fac_rohan"),
    (party_get_num_prisoners, ":local2", ":local0"),
    (ge, ":local2", 20),
    (store_random, ":local3", 4, 0),
    (neg|gt, ":local3", 1),
    (call_script, "script_assemble_pardoned_party", ":local0", 0),
(try_end),
]),

(29, 0, 0, [], [
    (try_for_range, reg0, "pt_gondor_foragers", "pt_gondor_remnant"),
    (store_random_party_of_template, reg1, reg0),
    (gt, reg1, 0),
        (try_for_range, reg3, "trp_peasant_woman", "trp_lossarnach_axeman"),
        (store_troop_count_companions, reg4, reg3, reg1),
        (ge, reg4, 1),
        (party_remove_members, reg1, reg3, reg4),
    (try_end),
(try_end),
]),

(6, 0, 0, [
(store_troop_count_companions, reg1, "trp_ranger_of_ithilien", 0),
(store_troop_count_companions, reg2, "trp_veteran_ranger_of_ithilien", 0),
(store_troop_count_companions, reg3, "trp_master_ranger_of_ithilien", 0),
(store_troop_count_companions, reg4, "trp_dunedain_ranger", 0),
(store_troop_count_companions, reg5, "trp_dunedain_veteran_ranger", 0),
(store_troop_count_companions, reg6, "trp_dunedain_master_ranger", 0),
(store_troop_count_companions, reg7, "trp_lothlorien_archer", 0),
(store_troop_count_companions, reg8, "trp_lothlorien_warden", 0),
(store_troop_count_companions, reg9, "trp_lothlorien_elite_warden", 0),
(store_troop_count_companions, reg10, "trp_orc_tracker_of_mordor", 0),
(store_troop_count_companions, reg11, "trp_fell_orc_tracker_of_mordor", 0),
(store_troop_count_companions, reg12, "trp_uruk_hai_scout", 0),
(store_troop_count_companions, reg13, "trp_large_uruk_hai_scout", 0),
(store_troop_count_companions, reg14, "trp_fighting_uruk_hai_scout", 0),
(val_add, reg1, reg2),
(val_add, reg1, reg3),
(val_add, reg1, reg4),
(val_add, reg1, reg5),
(val_add, reg1, reg6),
(val_add, reg1, reg7),
(val_add, reg1, reg8),
(val_add, reg1, reg9),
(val_add, reg1, reg10),
(val_add, reg1, reg11),
(val_add, reg1, reg12),
(val_add, reg1, reg13),
(val_add, reg1, reg14),
], [
    (try_begin),
    (ge, reg1, 15),
    (assign, ":local0", 3),
    (else_try),
    (ge, reg1, 10),
    (neg|ge, reg1, 15),
    (assign, ":local0", 2),
    (else_try),
    (ge, reg1, 5),
    (neg|ge, reg1, 10),
    (assign, ":local0", 1),
    (else_try),
    (neg|ge, reg1, 5),
    (assign, ":local0", 0),
(try_end),
    (try_begin),
    (gt, "$old_ranger_spot_modifier", 0),
    (store_skill_level, reg2, 7, 0),
    (val_min, reg2, "$old_ranger_spot_modifier"),
    (val_mul, reg2, -1),
    (troop_raise_skill, 0, 7, reg2),
    (assign, "$old_ranger_spot_modifier", 0),
(try_end),
    (try_begin),
    (gt, "$old_ranger_path_modifier", 0),
    (store_skill_level, reg2, 8, 0),
    (val_min, reg2, "$old_ranger_path_modifier"),
    (val_mul, reg2, -1),
    (troop_raise_skill, 0, 8, reg2),
    (assign, "$old_ranger_path_modifier", 0),
(try_end),
    (try_begin),
    (gt, "$old_ranger_track_modifier", 0),
    (store_skill_level, reg2, 10, 0),
    (val_min, reg2, "$old_ranger_track_modifier"),
    (val_mul, reg2, -1),
    (troop_raise_skill, 0, 10, reg2),
    (assign, "$old_ranger_track_modifier", 0),
(try_end),
    (try_begin),
    (ge, ":local0", 1),
    (store_skill_level, ":local1", 7, 0),
    (assign, reg3, 10),
    (val_sub, reg3, ":local1"),
    (val_min, reg3, ":local0"),
    (troop_raise_skill, 0, 7, reg3),
    (assign, "$old_ranger_spot_modifier", reg3),
    (store_skill_level, ":local2", 8, 0),
    (assign, reg3, 10),
    (val_sub, reg3, ":local2"),
    (val_min, reg3, ":local0"),
    (troop_raise_skill, 0, 8, reg3),
    (assign, "$old_ranger_path_modifier", reg3),
    (store_skill_level, reg2, 10, 0),
    (assign, reg3, 10),
    (val_sub, reg3, reg2),
    (val_min, reg3, ":local0"),
    (troop_raise_skill, 0, 10, reg3),
    (assign, "$old_ranger_track_modifier", reg3),
(try_end),
]),

(160, 0, 100, [
(ge, "$war_has_begun", 1),
(neg|eq, "$easterlings_celebrate", 1),
(neg|eq, "$haradrim_celebrate", 1),
(neg|eq, "$dunlanders_celebrate", 1),
   ], [
    (try_for_range, reg10, "pt_haradrim_patrol", "pt_gondor_foragers"),
    (neg|eq, "$evil_men_ceremony", 1),
    (store_random_party_of_template, reg6, reg10),
    (party_get_num_prisoners, reg2, reg6),
    (gt, reg2, 100),
    (store_faction_of_party, reg1, reg6),
    (faction_get_slot, reg3, reg1, 2),
    (assign, "$evil_men_ceremony", 1),
(try_end),
    (try_begin),
    (eq, reg1, "fac_easterlings"),
    (eq, "$evil_men_ceremony", 1),
    (eq, reg3, 3),
    (neg|eq, "$easterlings_celebrate", 1),
        (try_for_range, reg5, "trp_brigand_lord", "trp_harad_youth"),
        (store_troop_count_prisoners, reg4, reg5, reg6),
        (ge, reg4, 1),
        (party_remove_prisoners, reg6, reg5, reg4),
    (try_end),
        (try_for_range, reg8, "trp_easterling_youth", "trp_corsair_youth"),
        (troop_raise_proficiency_linear, reg8, 0, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 1, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 2, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 3, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 4, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 5, "$evil_men_frenzy_bonus"),
    (try_end),
    (display_message, "str_easterlings_celebrate", 4294901760),
    (display_message, "str_evil_celebration_news", 0),
    (display_message, "str_easterlings_celebration_bonus", 0),
    (assign, "$easterlings_celebrate", 1),
    (faction_set_slot, reg1, 2, 6),
    (else_try),
    (eq, reg1, "fac_haradrim"),
    (eq, "$evil_men_ceremony", 1),
    (eq, reg3, 3),
    (neg|eq, "$haradrim_celebrate", 1),
        (try_for_range, reg5, "trp_brigand_lord", "trp_harad_youth"),
        (store_troop_count_prisoners, reg4, reg5, reg6),
        (ge, reg4, 1),
        (party_remove_prisoners, reg6, reg5, reg4),
    (try_end),
        (try_for_range, reg8, "trp_harad_youth", "trp_dunnish_youth"),
        (troop_raise_proficiency_linear, reg8, 0, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 1, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 2, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 3, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 4, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 5, "$evil_men_frenzy_bonus"),
    (try_end),
    (display_message, "str_haradrim_celebrate", 4294901760),
    (display_message, "str_evil_celebration_news", 0),
    (display_message, "str_haradrim_celebration_bonus", 0),
    (assign, "$haradrim_celebrate", 1),
    (faction_set_slot, reg1, 2, 6),
    (else_try),
    (eq, reg1, "fac_dunlanders"),
    (eq, "$evil_men_ceremony", 1),
    (eq, reg3, 3),
    (neg|eq, "$dunlanders_celebrate", 1),
        (try_for_range, reg5, "trp_brigand_lord", "trp_harad_youth"),
        (store_troop_count_prisoners, reg4, reg5, reg6),
        (ge, reg4, 1),
        (party_remove_prisoners, reg6, reg5, reg4),
    (try_end),
        (try_for_range, reg8, "trp_dunnish_youth", "trp_easterling_youth"),
        (troop_raise_proficiency_linear, reg8, 0, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 1, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 2, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 3, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 4, "$evil_men_frenzy_bonus"),
        (troop_raise_proficiency_linear, reg8, 5, "$evil_men_frenzy_bonus"),
    (try_end),
    (display_message, "str_dunlanders_celebrate", 4294901760),
    (display_message, "str_evil_celebration_news", 0),
    (display_message, "str_dunlanders_celebration_bonus", 0),
    (assign, "$dunlanders_celebrate", 1),
    (faction_set_slot, reg1, 2, 6),
(try_end),
(assign, "$evil_men_ceremony", 0),
]),

(40, 0, 0, [(ge, "$war_has_begun", 1),], [
    (try_begin),
    (eq, "$easterlings_celebrate", 1),
    (assign, reg1, "fac_easterlings"),
    (faction_get_slot, reg3, reg1, 2),
    (neg|eq, reg3, 3),
    (call_script, "script_normalize_troop_morale", 0, 0),
    (faction_set_slot, reg1, 2, 3),
    (assign, "$easterlings_celebrate", 0),
    (else_try),
    (eq, "$haradrim_celebrate", 1),
    (assign, reg1, "fac_haradrim"),
    (faction_get_slot, reg3, reg1, 2),
    (neg|eq, reg3, 3),
    (call_script, "script_normalize_troop_morale", 0, 0),
    (faction_set_slot, reg1, 2, 3),
    (assign, "$haradrim_celebrate", 0),
    (else_try),
    (eq, "$dunlanders_celebrate", 1),
    (assign, reg1, "fac_dunlanders"),
    (faction_get_slot, reg3, reg1, 2),
    (neg|eq, reg3, 3),
    (call_script, "script_normalize_troop_morale", 0, 0),
    (faction_set_slot, reg1, 2, 3),
    (assign, "$dunlanders_celebrate", 0),
(try_end),
]),

(50, 0, 0, [(ge, "$war_has_begun", 1),], [
    (try_for_range, reg1, "fac_gondor", "fac_dol_guldur"),
    (faction_get_slot, reg2, reg1, 1),
    (neg|ge, reg2, 1),
    (faction_get_slot, reg3, reg1, 2),
    (neg|eq, reg3, 3),
    (call_script, "script_normalize_troop_morale", 0, 0),
        (try_begin),
        (eq, reg1, "fac_haradrim"),
        (assign, "$haradrim_celebrate", 0),
        (else_try),
        (eq, reg1, "fac_easterlings"),
        (assign, "$easterlings_celebrate", 0),
        (else_try),
        (eq, reg1, "fac_dunlanders"),
        (assign, "$dunlanders_celebrate", 0),
    (try_end),
(try_end),
]),

(0, 0, 25, [(eq, "$elven_dol_guldur_war", 1),], [
    (try_for_parties, ":local0"),
    (party_get_template_id, ":local1", ":local0"),
    (store_num_parties_of_template, ":local2", ":local1"),
    (ge, ":local2", 1),
    (this_or_next|eq, ":local1", "pt_dol_guldur_scouts"),
    (this_or_next|eq, ":local1", "pt_dol_guldur_patrol"),
    (this_or_next|eq, ":local1", "pt_small_host_of_dol_guldur"),
    (this_or_next|eq, ":local1", "pt_host_of_dol_guldur"),
    (this_or_next|eq, ":local1", "pt_moria_scouts"),
    (this_or_next|eq, ":local1", "pt_moria_patrol"),
    (eq, ":local1", "pt_small_host_of_moria"),
    (store_party_size_wo_prisoners, ":local3", ":local0"),
    (gt, ":local3", 10),
    (store_distance_to_party_from_party, ":local4", ":local0", "p_caras_galadhon"),
    (neg|ge, ":local4", 36),
    (store_distance_to_party_from_party, ":local4", ":local0", "p_cerin_dolen"),
    (neg|ge, ":local4", 36),
    (call_script, "script_inflict_casualties_to_party", ":local0", "$galadriel_power"),
    (store_distance_to_party_from_party, ":local4", ":local0", "p_main_party"),
    (neg|ge, ":local4", 5),
    (display_message, "str_galadriel_power", 4294954035),
    (display_message, "str_galadriel_power_b", 4294954035),
(try_end),
]),

(0, 0, 1, [(eq, "$map_hero_present_in_battle", 1),], [
(call_script, "script_hero_leader_check_for_death_after_player_battle", 0, 0),
(assign, "$map_hero_present_in_battle", 0),
]),

(24, 0, 0, [(is_between, "$rohirrim_ride_east", 1, 4),], [
(call_script, "script_rohirrim_ride_east", 0, 0),
]),

(12, 0, 0, [(eq, "$rohirrim_ride_east", 4),], [
(party_get_slot, ":local0", "$eohere_party_id", 3),
    (try_begin),
    (neg|eq, "$gondor_status", 0),
    (assign, ":local1", "$minas_tirith"),
    (else_try),
    (eq, "$gondor_status", 0),
    (store_random, ":local1", 2, 0),
    (val_add, ":local1", "$edoras"),
(try_end),
(store_distance_to_party_from_party, reg1, "$eohere_party_id", ":local1"),
(gt, reg1, 10),
(party_set_ai_behavior, "$eohere_party_id", 1),
(party_set_ai_object, "$eohere_party_id", ":local1"),
(party_set_slot, "$eohere_party_id", 3, ":local1"),
]),

(0.1, 0, 0, [
(eq, "$rohirrim_ride_east", 4),
(party_get_slot, ":local0", "$eohere_party_id", 3),
(store_distance_to_party_from_party, ":local1", ":local0", "$eohere_party_id"),
(neg|gt, ":local1", 4),
   ], [
(party_set_slot, "$eohere_party_id", 3, ":local0"),
(party_set_ai_behavior, "$eohere_party_id", 3),
]),

(1.1, 0, 0, [
(eq, "$rohirrim_ride_east", 4),
(store_num_parties_of_template, ":local0", "pt_eohere_of_the_riddermark"),
(eq, ":local0", 0),
   ], [
(display_message, "str_eohere_fallen", 0),
(val_add, "$rohan_status_counter", 2),
(assign, "$rohirrim_ride_east", 5),
(faction_set_slot, "fac_isengard", 1, 2),
(faction_set_slot, "fac_dunlanders", 1, 2),
(faction_set_slot, "fac_mordor", 1, 2),
(faction_set_slot, "fac_rohan", 1, 3),
(call_script, "script_determine_troop_morale", 0, 0),
]),

(25, 0, 0, [], [
(call_script, "script_healing_routine", 0, 0),
]),

(10.1, 0, 0, [
(store_num_parties_of_template, reg2, "pt_county_levy"),
(neg|ge, reg2, 2),
   ], [
(assign, reg6, 3),
(val_add, reg6, 2),
(store_random, reg3, reg6, 0),
(assign, reg8, "$minas_tirith"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_county_levy"),
]),

(10.1, 0, 0, [
(store_num_parties_of_template, reg2, "pt_simple_folk"),
(neg|ge, reg2, 2),
], [
(assign, reg6, 3),
(val_add, reg6, 2),
(store_random, reg3, reg6, 0),
(assign, reg8, "$minas_tirith"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_simple_folk"),
]),

(1, 0, ti_once, [], [
(assign, "$peak_brigands", 7),
]),

(10.1, 0, 0, [
(store_num_parties_of_template, reg2, "pt_brigands"),
(neg|ge, reg2, "$peak_brigands"),
], [
(assign, reg6, 3),
(val_add, reg6, 2),
(store_random, reg3, reg6, 0),
(assign, reg8, "p_town_1"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_brigands"),
]),

(80.1, 80, 80, [
(store_num_parties_of_template, reg2, "pt_brigand_company"),
(neg|ge, reg2, 1),
], [
(set_spawn_radius, 1),
(spawn_around_party, "p_zendar", "pt_brigand_company"),
]),

(48.1, 0, 24, [
(eq, "$war_has_begun", 1),
(ge, "$gondor_status", 2),
(store_num_parties_of_template, reg2, "pt_gondor_prisoner_train"),
(neg|ge, reg2, 4),
], [
(store_random, reg3, 10, 0),
(assign, reg8, "$minas_tirith"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_gondor_prisoner_train"),
(party_set_ai_behavior, reg0, 1),
(party_set_ai_object, reg0, reg8),
]),

(48.1, 0, 24, [
(eq, "$war_has_begun", 1),
(ge, "$rohan_status", 2),
(store_num_parties_of_template, reg2, "pt_rohan_prisoner_train"),
(neg|ge, reg2, 4),
], [
(store_random, reg3, 7, 0),
(assign, reg8, "$edoras"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_rohan_prisoner_train"),
(party_set_ai_behavior, reg0, 1),
(party_set_ai_object, reg0, reg8),
]),

(48.1, 0, 24, [
(eq, "$war_has_begun", 1),
(ge, "$mordor_status", 2),
(store_num_parties_of_template, reg2, "pt_mordor_prisoner_train"),
(neg|ge, reg2, 4),
], [
(store_random, reg3, 4, 0),
(assign, reg8, "p_morannon"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_mordor_prisoner_train"),
(party_set_ai_behavior, reg0, 1),
(party_set_ai_object, reg0, reg8),
]),

(48.1, 0, 24, [
(eq, "$war_has_begun", 1),
(ge, "$isengard_status", 2),
(store_num_parties_of_template, reg2, "pt_mordor_prisoner_train"),
(neg|ge, reg2, 4),
], [
(store_random, reg3, 3, 0),
(assign, reg8, "p_isengard"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_isengard_prisoner_train"),
(party_set_ai_behavior, reg0, 1),
(party_set_ai_object, reg0, reg8),
]),

(5, 0, 0, [
(ge, "$isengard_status", 2),
(store_random_party_of_template, reg2, "pt_isengard_prisoner_train"),
(party_is_in_any_town, reg2),
], [
(store_random, reg3, 3, 0),
(assign, reg8, "p_isengard"),
(val_add, reg8, reg3),
(party_set_ai_behavior, reg2, 1),
(party_set_ai_object, reg2, reg8),
]),

(5, 0, 0, [
(ge, "$gondor_status", 2),
(store_random_party_of_template, reg2, "pt_gondor_prisoner_train"),
(party_is_in_any_town, reg2),
], [
(store_random, reg3, 3, 0),
(assign, reg8, "p_town_1"),
(val_add, reg8, reg3),
(party_set_ai_behavior, reg2, 1),
(party_set_ai_object, reg2, reg8),
]),

(5, 0, 0, [
(ge, "$rohan_status", 2),
(store_random_party_of_template, reg2, "pt_rohan_prisoner_train"),
(party_is_in_any_town, reg2),
], [
(store_random, reg3, 2, 0),
(assign, reg8, "p_town_11"),
(val_add, reg8, reg3),
(party_set_ai_behavior, reg2, 1),
(party_set_ai_object, reg2, reg8),
]),

(5, 0, 0, [
(ge, "$mordor_status", 2),
(store_random_party_of_template, reg2, "pt_mordor_prisoner_train"),
(party_is_in_any_town, reg2),
], [
(store_random, reg3, 4, 0),
(assign, reg8, "p_morannon"),
(val_add, reg8, reg3),
(party_set_ai_behavior, reg2, 1),
(party_set_ai_object, reg2, reg8),
]),

(5, 0, 0, [
(gt, "$gondor_status", 0),
(store_random_party_of_template, reg2, "pt_gondor_caravan"),
(party_is_in_any_town, reg2),
], [
(store_random, reg3, 3, 0),
(assign, reg8, "p_town_1"),
(val_add, reg8, reg3),
(party_set_ai_behavior, reg2, 1),
(party_set_ai_object, reg2, reg8),
]),

(5, 0, 0, [
(gt, "$rohan_status", 0),
(store_random_party_of_template, reg2, "pt_rohan_caravan"),
(party_is_in_any_town, reg2),
], [
(store_random, reg3, 2, 0),
(assign, reg8, "p_town_11"),
(val_add, reg8, reg3),
(party_set_ai_behavior, reg2, 1),
(party_set_ai_object, reg2, reg8),
]),

(5, 0, 0, [
(gt, "$mordor_status", 0),
(store_random_party_of_template, reg2, "pt_mordor_caravan"),
(party_is_in_any_town, reg2),
   ], [
(store_random, reg3, 4, 0),
(assign, reg8, "p_morannon"),
(val_add, reg8, reg3),
(party_set_ai_behavior, reg2, 1),
(party_set_ai_object, reg2, reg8),
]),

(5, 0, 0, [
(gt, "$isengard_status", 0),
(store_random_party_of_template, reg2, "pt_isengard_caravan"),
(party_is_in_any_town, reg2),
   ], [
(store_random, reg3, 3, 0),
(assign, reg8, "p_isengard"),
(val_add, reg8, reg3),
(party_set_ai_behavior, reg2, 1),
(party_set_ai_object, reg2, reg8),
]),

(4.1, 0, 0, [
(gt, "$gondor_status", 0),
(store_num_parties_of_template, reg2, "pt_gondor_caravan"),
(neg|ge, reg2, 12),
   ], [
(store_random, reg3, 3, 0),
(assign, reg8, "p_town_1"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_gondor_caravan"),
(party_set_ai_behavior, reg0, 1),
(party_set_ai_object, reg0, reg8),
]),

(4.1, 0, 0, [
(gt, "$rohan_status", 0),
(store_num_parties_of_template, reg2, "pt_rohan_caravan"),
(neg|ge, reg2, 12),
   ], [
(store_random, reg3, 2, 0),
(assign, reg8, "p_town_11"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_rohan_caravan"),
(party_set_ai_behavior, reg0, 1),
(party_set_ai_object, reg0, reg8),
]),

(4.1, 0, 0, [
(gt, "$mordor_status", 0),
(store_num_parties_of_template, reg2, "pt_mordor_caravan"),
(neg|ge, reg2, 12),
   ], [
(store_random, reg3, 4, 0),
(assign, reg8, "p_morannon"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_mordor_caravan"),
(party_set_ai_behavior, reg0, 1),
(party_set_ai_object, reg0, reg8),
]),

(4.1, 0, 0, [
(gt, "$isengard_status", 0),
(store_num_parties_of_template, reg2, "pt_isengard_caravan"),
(neg|ge, reg2, 12),
   ], [
(store_random, reg3, 3, 0),
(assign, reg8, "p_isengard"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_isengard_caravan"),
(party_set_ai_behavior, reg0, 1),
(party_set_ai_object, reg0, reg8),
]),

#tr50
(2, 0, 0, [
(eq, "$caravan_escort_state", 1),
(get_party_ai_object, reg1, "$caravan_escort_party_id"),
(neg|eq, reg1, "$caravan_escort_destination_town"),
], [
(assign, "$caravan_escort_state", 0),
(add_xp_as_reward, 100),
]),

(8.1, 0, 0, [
(store_num_parties_of_template, reg2, "pt_goblin_raiders"),
(store_num_parties_of_template, reg12, "pt_goblin_stragglers"),
(val_add, reg2, reg12),
(neg|ge, reg2, 4),
], [
(set_spawn_radius, 1),
(store_random, ":local0", 2, 0),
    (try_begin),
    (eq, ":local0", 0),
    (spawn_around_party, "p_mountain_goblins_spawn_point", "pt_goblin_raiders"),
    (else_try),
    (eq, ":local0", 1),
    (spawn_around_party, "p_mountain_goblins_spawn_point", "pt_goblin_stragglers"),
(try_end),
]),

(8.1, 0, 0, [
(store_num_parties_of_template, reg2, "pt_tribal_orcs"),
(store_num_parties_of_template, reg3, "pt_tribal_orc_stragglers"),
(val_add, reg2, reg3),
(neg|ge, reg2, 6),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_tribal_orcs_spawn_point_1"),
(set_spawn_radius, 1),
(store_random, ":local0", 2, 0),
    (try_begin),
    (eq, ":local0", 0),
    (spawn_around_party, reg5, "pt_tribal_orcs"),
    (else_try),
    (eq, ":local0", 1),
    (spawn_around_party, reg5, "pt_tribal_orc_stragglers"),
(try_end),
]),

(24, 0, 0, [(ge, "$tribal_orcs_paid", 1),], [
(val_sub, "$tribal_orcs_paid", 1),
(eq, "$tribal_orcs_paid", 0),
(set_relation, "fac_tribal_orcs", "fac_player_faction", "$tribal_orcs_relation_original"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(neg|gt, "$mordor_status", 2),
(neg|eq, "$mordor_status", 0),
(store_num_parties_of_template, reg2, "pt_deserters_of_mordor"),
(neg|ge, reg2, 2),
], [
(store_random, reg5, 4, 0),
(val_add, reg5, "p_morannon"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_deserters_of_mordor"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(neg|gt, "$isengard_status", 2),
(neg|eq, "$isengard_status", 0),
(store_num_parties_of_template, reg2, "pt_deserters_of_isengard"),
(neg|ge, reg2, 2),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(spawn_around_party, "p_uruk_hai_outpost", "pt_deserters_of_isengard"),
]),

(24, 0, 0, [(ge, "$deserters_of_isengard_paid", 1),], [
(val_sub, "$deserters_of_isengard_paid", 1),
(eq, "$deserters_of_isengard_paid", 0),
(set_relation, "fac_deserters_of_isengard", "fac_player_faction", "$isengard_deserter_relation_original"),
]),

(24, 0, 0, [(ge, "$deserters_of_mordor_paid", 1),], [
(val_sub, "$deserters_of_mordor_paid", 1),
(eq, "$deserters_of_mordor_paid", 0),
(set_relation, "fac_deserters_of_mordor", "fac_player_faction", "$mordor_deserter_relation_original"),
]),

(0, 0, , ti_once, [], [
(assign, "$peak_lothlorien_scouts", 3),
(assign, "$peak_lothlorien_harassers", 2),
(assign, "$peak_lothlorien_war_parties", 1),
(assign, "$lothlorien_status_counter", 0),
]),

(10.1, 0, 0, [
(ge, "$lothlorien_status", 3),
(store_num_parties_of_template, reg2, "pt_lothlorien_scouts"),
(neg|ge, reg2, "$peak_lothlorien_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_lothlorien_scouts"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$lothlorien_status", 3),
(store_num_parties_of_template, reg2, "pt_lothlorien_patrol"),
(neg|ge, reg2, "$peak_lothlorien_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_lothlorien_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$lothlorien_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_lothlorien"),
(neg|ge, reg2, "$peak_lothlorien_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(val_add, "$lothlorien_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_lothlorien"),
]),

(120.1, 24, 0, [
(eq, "$war_has_begun", 1),
(ge, "$lothlorien_status", 2),
(store_num_parties_of_template, reg2, "pt_host_of_lothlorien"),
(neg|ge, reg2, 1),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(assign, "$host_of_lothlorien_active", 1),
(assign, "$host_of_lothlorien_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_lothlorien"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(10.1, 24, 0, [
(eq, "$lothlorien_status", 2),
(store_num_parties_of_template, reg2, "pt_lothlorien_scouts"),
(neg|ge, reg2, "$peak_lothlorien_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_lothlorien_scouts"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$lothlorien_status", 2),
(store_num_parties_of_template, reg2, "pt_lothlorien_patrol"),
(neg|ge, reg2, "$peak_lothlorien_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_lothlorien_patrol"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$lothlorien_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_lothlorien"),
(neg|ge, reg2, "$peak_lothlorien_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(val_add, "$lothlorien_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_lothlorien"),
]),

(10.1, 24, 0, [
(eq, "$lothlorien_status", 1),
(store_num_parties_of_template, reg2, "pt_lothlorien_scouts"),
(neg|ge, reg2, "$peak_lothlorien_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_lothlorien_scouts"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$lothlorien_status", 1),
(store_num_parties_of_template, reg2, "pt_lothlorien_patrol"),
(neg|ge, reg2, "$peak_lothlorien_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_lothlorien_patrol"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$lothlorien_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_lothlorien"),
(neg|ge, reg2, "$peak_lothlorien_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_caras_galadhon"),
(set_spawn_radius, 1),
(val_add, "$lothlorien_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_lothlorien"),
]),

(2, 0, 0, [(neg|eq, "$lothlorien_status", 0),
(eq, "$war_has_begun", 1),], [
    (try_begin),
    (eq, "$lothlorien_status", 2),
    (eq, "$lothlorien_status_counter", 2),
    (val_sub, "$lothlorien_status", 1),
    (display_message, "str_lothlorien_diminished", 4294901760),
    (display_message, "str_lothlorien_spent", 0),
    (assign, "$peak_lothlorien_foragers", 1),
    (assign, "$peak_lothlorien_scouts", 1),
    (assign, "$peak_lothlorien_harassers", 1),
    (assign, "$elven_setback", 1),
    (assign, "$lothlorien_status_counter", 0),
    (faction_set_slot, "fac_lothlorien", 1, 3),
    (call_script, "script_determine_troop_morale", 0, 0),
    (else_try),
    (eq, "$lothlorien_status", 3),
    (eq, "$lothlorien_status_counter", 3),
    (val_sub, "$lothlorien_status", 1),
    (display_message, "str_lothlorien_diminished", 4294901760),
    (display_message, "str_lothlorien_weak", 0),
    (assign, "$peak_lothlorien_foragers", 2),
    (assign, "$peak_lothlorien_scouts", 2),
    (assign, "$elven_setback", 1),
    (assign, "$lothlorien_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$lothlorien_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_lothlorien"),
(eq, reg5, 0),
(store_num_parties_of_template, reg6, "pt_host_of_lothlorien"),
(eq, reg6, 0),
(store_num_parties_of_template, reg5, "pt_lothlorien_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [

(assign, "$lothlorien_status_counter", 0),
(assign, "$lothlorien_status", 0),
(display_message, "str_lothlorien_diminished", 4291631616),
(display_message, "str_lothlorien_fallen", 4291631616),
(call_script, "script_flush_imprisoned_heroes", "fac_lothlorien", 0),
(faction_set_slot, "fac_imladris", 1, 3),
(faction_set_slot, "fac_woodelves", 1, 3),
(faction_set_slot, "fac_moria", 1, 2),
(faction_set_slot, "fac_mordor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),

(167, 167, 0, [(neg|eq, "$lothlorien_status", 3),
(eq, "$war_has_begun", 1),], [
    (try_begin),
    (eq, "$lothlorien_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$lothlorien_status_counter", 0),
    (val_add, "$lothlorien_status", 1),
    (assign, "$peak_lothlorien_foragers", 3),
    (assign, "$peak_lothlorien_scouts", 3),
    (assign, "$peak_lothlorien_harassers", 2),
    (display_message, "str_lothlorien_rallied", 4280453922),
    (display_message, "str_lothlorien_full_strength", 0),
    (else_try),
    (eq, "$lothlorien_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$lothlorien_status_counter", 0),
    (val_add, "$lothlorien_status", 1),
    (assign, "$peak_lothlorien_foragers", 2),
    (assign, "$peak_lothlorien_scouts", 2),
    (assign, "$peak_lothlorien_harassers", 1),
    (display_message, "str_lothlorien_rallied", 4280453922),
    (display_message, "str_lothlorien_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_rivendell_scouts", 2),
(assign, "$peak_rivendell_harassers", 1),
(assign, "$peak_rivendell_war_parties", 1),
(assign, "$rivendell_status_counter", 0),
]),

(10.1, 0, 0, [
(ge, "$rivendell_status", 3),
(store_num_parties_of_template, reg2, "pt_rivendell_scouts"),
(neg|ge, reg2, "$peak_rivendell_scouts"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rivendell_scouts"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$rivendell_status", 3),
(store_num_parties_of_template, reg2, "pt_rivendell_patrol"),
(neg|ge, reg2, "$peak_rivendell_harassers"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rivendell_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$rivendell_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_rivendell"),
(neg|ge, reg2, "$peak_rivendell_war_parties"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(val_add, "$rivendell_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_rivendell"),
]),

(20.1, 24, 0, [
(eq, "$rivendell_status", 2),
(store_num_parties_of_template, reg2, "pt_rivendell_scouts"),
(neg|ge, reg2, "$peak_rivendell_scouts"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rivendell_scouts"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$rivendell_status", 2),
(store_num_parties_of_template, reg2, "pt_rivendell_patrol"),
(neg|ge, reg2, "$peak_rivendell_harassers"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rivendell_patrol"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$rivendell_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_rivendell"),
(neg|ge, reg2, "$peak_rivendell_war_parties"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(val_add, "$rivendell_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_rivendell"),
]),

(40.1, 24, 0, [
(eq, "$rivendell_status", 1),
(store_num_parties_of_template, reg2, "pt_rivendell_scouts"),
(neg|ge, reg2, "$peak_rivendell_scouts"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rivendell_scouts"),
]),

   (40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$rivendell_status", 1),
(store_num_parties_of_template, reg2, "pt_rivendell_patrol"),
(neg|ge, reg2, "$peak_rivendell_harassers"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rivendell_patrol"),
]),

#tr81
(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$rivendell_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_rivendell"),
(neg|ge, reg2, "$peak_rivendell_war_parties"),
   ], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_rivendell_elf_camp"),
(set_spawn_radius, 1),
(val_add, "$rivendell_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_rivendell"),
]),

(2, 0, 0, [(neg|eq, "$rivendell_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$rivendell_status", 2),
    (eq, "$rivendell_status_counter", 2),
    (val_sub, "$rivendell_status", 1),
    (display_message, "str_rivendell_diminished", 4294901760),
    (display_message, "str_rivendell_spent", 0),
    (assign, "$peak_rivendell_scouts", 1),
    (assign, "$peak_rivendell_harassers", 1),
    (assign, "$elven_setback", 1),
    (assign, "$rivendell_status_counter", 0),
    (faction_set_slot, "fac_imladris", 1, 3),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
    (try_begin),
    (eq, "$rivendell_status", 3),
    (eq, "$rivendell_status_counter", 3),
    (val_sub, "$rivendell_status", 1),
    (display_message, "str_rivendell_diminished", 4294901760),
    (display_message, "str_rivendell_weak", 0),
    (assign, "$peak_rivendell_scouts", 1),
    (assign, "$peak_rivendell_harassers", 2),
    (assign, "$elven_setback", 1),
    (assign, "$rivendell_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
eq, "$rivendell_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_rivendell"),
(eq, reg5, 0),
(store_num_parties_of_template, reg5, "pt_rivendell_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$rivendell_status", 0),
(display_message, "str_rivendell_diminished", 4291631616),
(display_message, "str_rivendell_fallen", 4291631616),
(assign, "$rivendell_status_counter", 0),
(faction_set_slot, "fac_lothlorien", 1, 3),
(faction_set_slot, "fac_woodelves", 1, 3),
(faction_set_slot, "fac_moria", 1, 2),
(faction_set_slot, "fac_mordor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),

(167, 167, 0, [
(neg|eq, "$rivendell_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$rivendell_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$rivendell_status_counter", 0),
    (val_add, "$rivendell_status", 1),
    (assign, "$peak_rivendell_scouts", 1),
    (assign, "$peak_rivendell_harassers", 2),
    (display_message, "str_rivendell_rallied", 4280453922),
    (display_message, "str_rivendell_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_woodelf_foragers", 2),
(assign, "$peak_woodelf_scouts", 2),
(assign, "$peak_woodelf_harassers", 2),
(assign, "$peak_woodelf_war_parties", 1),
(assign, "$woodelf_status_counter", 0),
]),
 
(10.1, 0, 0, [
(ge, "$woodelf_status", 3),
(store_num_parties_of_template, reg2, "pt_mirkwood_elven_scouts"),
(neg|ge, reg2, "$peak_woodelf_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mirkwood_elven_scouts"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$woodelf_status", 3),
(store_num_parties_of_template, reg2, "pt_mirkwood_elven_patrol"),
(neg|ge, reg2, "$peak_woodelf_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mirkwood_elven_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$woodelf_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_mirkwood_elves"),
(neg|ge, reg2, "$peak_woodelf_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(val_add, "$woodelf_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_mirkwood_elves"),
]),

(20.1, 24, 0, [
(eq, "$woodelf_status", 2),
(store_num_parties_of_template, reg2, "pt_mirkwood_elven_scouts"),
(neg|ge, reg2, "$peak_woodelf_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mirkwood_elven_scouts"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$woodelf_status", 2),
(store_num_parties_of_template, reg2, "pt_mirkwood_elven_patrol"),
(neg|ge, reg2, "$peak_woodelf_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mirkwood_elven_patrol"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$woodelf_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_mirkwood_elves"),
(neg|ge, reg2, "$peak_woodelf_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(val_add, "$woodelf_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_mirkwood_elves"),
]),

(40.1, 24, 0, [
(eq, "$woodelf_status", 1),
(store_num_parties_of_template, reg2, "pt_mirkwood_elven_scouts"),
(neg|ge, reg2, "$peak_woodelf_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mirkwood_elven_scouts"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$woodelf_status", 1),
(store_num_parties_of_template, reg2, "pt_mirkwood_elven_patrol"),
(neg|ge, reg2, "$peak_woodelf_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mirkwood_elven_patrol"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$woodelf_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_mirkwood_elves"),
(neg|ge, reg2, "$peak_woodelf_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_woodelf_camp"),
(set_spawn_radius, 1),
(val_add, "$woodelf_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_mirkwood_elves"),
]),

(2, 0, 0, [(neg|eq, "$woodelf_status", 0),(eq, "$war_has_begun", 1),], [
    (try_begin),
    (eq, "$woodelf_status", 2),
    (eq, "$woodelf_status_counter", 2),
    (val_sub, "$woodelf_status", 1),
    (display_message, "str_woodelf_diminished", 4294901760),
    (display_message, "str_woodelf_spent", 0),
    (assign, "$peak_woodelf_scouts", 1),
    (assign, "$peak_woodelf_harassers", 1),
    (assign, "$elven_setback", 1),
    (assign, "$woodelf_status_counter", 0),
    (faction_set_slot, "fac_woodelves", 1, 3),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
    (try_begin),
    (eq, "$woodelf_status", 3),
    (eq, "$woodelf_status_counter", 3),
    (val_sub, "$woodelf_status", 1),
    (display_message, "str_woodelf_diminished", 4294901760),
    (display_message, "str_woodelf_weak", 0),
    (assign, "$peak_woodelf_scouts", 1),
    (assign, "$peak_woodelf_harassers", 2),
    (assign, "$elven_setback", 1),
    (assign, "$woodelf_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$woodelf_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_mirkwood_elves"),
(eq, reg5, 0),
(store_num_parties_of_template, reg5, "pt_mirkwood_elven_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$woodelf_status", 0),
(display_message, "str_woodelf_diminished", 4291631616),
(display_message, "str_woodelf_fallen", 4291631616),
(assign, "$woodelf_status_counter", 0),
(faction_set_slot, "fac_lothlorien", 1, 3),
(faction_set_slot, "fac_imladris", 1, 3),
(faction_set_slot, "fac_moria", 1, 2),
(faction_set_slot, "fac_mordor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),
 
(167, 167, 0, [
(neg|eq, "$woodelf_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$woodelf_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$woodelf_status_counter", 0),
    (val_add, "$woodelf_status", 1),
    (assign, "$peak_woodelf_scouts", 2),
    (assign, "$peak_woodelf_harassers", 2),
    (display_message, "str_woodelf_rallied", 4280453922),
    (display_message, "str_woodelf_full_strength", 4280453922),
(try_end),
    (try_begin),
    (eq, "$woodelf_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$woodelf_status_counter", 0),
    (val_add, "$woodelf_status", 1),
    (assign, "$peak_woodelf_scouts", 1),
    (assign, "$peak_woodelf_harassers", 2),
    (display_message, "str_woodelf_rallied", 4280453922),
    (display_message, "str_woodelf_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_dol_guldur_scouts", 3),
(assign, "$peak_dol_guldur_harassers", 2),
(assign, "$peak_dol_guldur_war_parties", 1),
(assign, "$dol_guldur_status_counter", 0),
]),

(10.1, 0, 0, [
(ge, "$dol_guldur_status", 3),
(store_num_parties_of_template, reg2, "pt_dol_guldur_scouts"),
(neg|ge, reg2, "$peak_dol_guldur_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dol_guldur_scouts"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$dol_guldur_status", 3),
(store_num_parties_of_template, reg2, "pt_dol_guldur_patrol"),
(neg|ge, reg2, "$peak_dol_guldur_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dol_guldur_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$dol_guldur_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_dol_guldur"),
(neg|ge, reg2, "$peak_dol_guldur_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(val_add, "$dol_guldur_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_dol_guldur"),
]),

(120.1, 24, 0, [
(eq, "$war_has_begun", 1),
(ge, "$dol_guldur_status", 2),
(store_num_parties_of_template, reg2, "pt_host_of_dol_guldur"),
(neg|ge, reg2, 1),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(assign, "$host_of_dol_guldur_active", 1),
(assign, "$host_of_dol_guldur_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_dol_guldur"),
(call_script, "script_hero_leads_host", reg0, 0),
]),
 
(10.1, 24, 0, [
(eq, "$dol_guldur_status", 2),
(store_num_parties_of_template, reg2, "pt_dol_guldur_scouts"),
(neg|ge, reg2, "$peak_dol_guldur_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dol_guldur_scouts"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$dol_guldur_status", 2),
(store_num_parties_of_template, reg2, "pt_dol_guldur_patrol"),
(neg|ge, reg2, "$peak_dol_guldur_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dol_guldur_patrol"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$dol_guldur_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_dol_guldur"),
(neg|ge, reg2, "$peak_dol_guldur_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(val_add, "$dol_guldur_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_dol_guldur"),
]),

(10.1, 24, 0, [
(eq, "$dol_guldur_status", 1),
(store_num_parties_of_template, reg2, "pt_dol_guldur_scouts"),
(neg|ge, reg2, "$peak_dol_guldur_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dol_guldur_scouts"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$dol_guldur_status", 1),
(store_num_parties_of_template, reg2, "pt_dol_guldur_patrol"),
(neg|ge, reg2, "$peak_dol_guldur_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dol_guldur_patrol"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$dol_guldur_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_dol_guldur"),
(neg|ge, reg2, "$peak_dol_guldur_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(val_add, "$dol_guldur_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_dol_guldur"),
]),
 
(160.1, 160, 160, [
(eq, "$dol_guldur_status", 0),
(store_num_parties_of_template, reg2, "pt_dol_guldur_remnant"),
(neg|ge, reg2, "$peak_dol_guldur_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dol_guldur"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dol_guldur_remnant"),
]),
 
(2, 0, 0, [
(neg|eq, "$dol_guldur_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$dol_guldur_status", 2),
    (eq, "$dol_guldur_status_counter", 2),
    (val_sub, "$dol_guldur_status", 1),
    (display_message, "str_dol_guldur_diminished", 4294901760),
    (display_message, "str_dol_guldur_spent", 0),
    (assign, "$peak_dol_guldur_scouts", 1),
    (assign, "$peak_dol_guldur_harassers", 1),
    (assign, "$northern_shadow_setback", 1),
    (assign, "$dol_guldur_status_counter", 0),
    (else_try),
    (eq, "$dol_guldur_status", 3),
    (eq, "$dol_guldur_status_counter", 2),
    (val_sub, "$dol_guldur_status", 1),
    (display_message, "str_dol_guldur_diminished", 4294901760),
    (display_message, "str_dol_guldur_weak", 0),
    (assign, "$peak_dol_guldur_scouts", 2),
    (assign, "$northern_shadow_setback", 1),
    (assign, "$dol_guldur_status_counter", 0),
    (else_try),
    (eq, "$dol_guldur_status", 4),
    (eq, "$dol_guldur_status_counter", 3),
    (val_sub, "$dol_guldur_status", 1),
    (display_message, "str_dol_guldur_diminished", 4291631616),
    (display_message, "str_dol_guldur_strong", 4291631616),
    (assign, "$peak_dol_guldur_scouts", 3),
    (assign, "$northern_shadow_setback", 1),
    (assign, "$dol_guldur_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$dol_guldur_status", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_dol_guldur"),
(eq, reg5, 0),
(store_num_parties_of_template, reg6, "pt_host_of_dol_guldur"),
(eq, reg6, 0),
(store_num_parties_of_template, reg5, "pt_dol_guldur_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$dol_guldur_status_counter", 0),
(assign, "$dol_guldur_status", 0),
(display_message, "str_dol_guldur_diminished", 4291631616),
(display_message, "str_dol_guldur_fallen", 4291631616),
(faction_set_slot, "fac_lothlorien", 1, 2),
(faction_set_slot, "fac_woodelves", 1, 2),
(faction_set_slot, "fac_imladris", 1, 2),
(faction_set_slot, "fac_mordor", 1, 1),
(call_script, "script_determine_troop_morale", 0, 0),
(neg|eq, "$mordor_isengard_war", 1),
(faction_set_slot, "fac_moria", 1, 1),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),
 
(167, 167, 0, [
(neg|eq, "$dol_guldur_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$dol_guldur_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dol_guldur_status_counter", 0),
    (val_add, "$dol_guldur_status", 1),
    (assign, "$peak_dol_guldur_foragers", 3),
    (assign, "$peak_dol_guldur_scouts", 3),
    (assign, "$peak_dol_guldur_harassers", 2),
    (display_message, "str_dol_guldur_rallied", 4280453922),
    (display_message, "str_dol_guldur_full_strength", 0),
    (else_try),
    (eq, "$dol_guldur_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dol_guldur_status_counter", 0),
    (val_add, "$dol_guldur_status", 1),
    (assign, "$peak_dol_guldur_foragers", 2),
    (assign, "$peak_dol_guldur_scouts", 2),
    (assign, "$peak_dol_guldur_harassers", 1),
    (display_message, "str_dol_guldur_rallied", 4280453922),
    (display_message, "str_dol_guldur_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_moria_scouts", 2),
(assign, "$peak_moria_harassers", 1),
(assign, "$peak_moria_war_parties", 1),
(assign, "$moria_status_counter", 0),
]),

(10.1, 0, 0, [
(ge, "$moria_status", 3),
(store_num_parties_of_template, reg2, "pt_moria_scouts"),
(store_num_parties_of_template, reg3, "pt_moria_scouts_b"),
(val_add, reg2, reg3),
(neg|ge, reg2, "$peak_moria_scouts"),
], [
(store_random, reg3, 8, 0),
    (try_begin),
    (neg|gt, reg3, 2),
    (assign, reg4, "pt_moria_scouts_b"),
    (else_try),
    (ge, reg3, 3),
    (assign, reg4, "pt_moria_scouts"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(spawn_around_party, "p_moria", reg4),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$moria_status", 3),
(store_num_parties_of_template, reg2, "pt_moria_patrol"),
(neg|ge, reg2, "$peak_moria_harassers"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(spawn_around_party, "p_moria", "pt_moria_patrol"),
]),
 
(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$moria_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_moria"),
(neg|ge, reg2, "$peak_moria_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(val_add, "$moria_status_counter", 1),
(spawn_around_party, "p_moria", "pt_small_host_of_moria"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(20.1, 24, 0, [
(eq, "$moria_status", 2),
(store_num_parties_of_template, reg2, "pt_moria_scouts"),
(neg|ge, reg2, "$peak_moria_scouts"),
], [
(store_random, reg3, 8, 0),
    (try_begin),
    (neg|gt, reg3, 2),
    (assign, reg4, "pt_moria_scouts_b"),
    (else_try),
    (ge, reg3, 3),
    (assign, reg4, "pt_moria_scouts"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(spawn_around_party, "p_moria", reg4),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$moria_status", 2),
(store_num_parties_of_template, reg2, "pt_moria_patrol"),
(neg|ge, reg2, "$peak_moria_harassers"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(spawn_around_party, "p_moria", "pt_moria_patrol"),
]),
 
(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$moria_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_moria"),
(neg|ge, reg2, "$peak_moria_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(val_add, "$moria_status_counter", 1),
(spawn_around_party, "p_moria", "pt_small_host_of_moria"),
(call_script, "script_hero_leads_host", reg0, 0),
]),
 
(40.1, 24, 0, [
(eq, "$moria_status", 1),
(store_num_parties_of_template, reg2, "pt_moria_scouts"),
(neg|ge, reg2, "$peak_moria_scouts"),
], [
(store_random, reg3, 8, 0),
    (try_begin),
    (neg|gt, reg3, 2),
    (assign, reg4, "pt_moria_scouts_b"),
    (else_try),
    (ge, reg3, 3),
    (assign, reg4, "pt_moria_scouts"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(spawn_around_party, "p_moria", reg4),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$moria_status", 1),
(store_num_parties_of_template, reg2, "pt_moria_patrol"),
(neg|ge, reg2, "$peak_moria_harassers"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(spawn_around_party, "p_moria", "pt_moria_patrol"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$moria_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_moria"),
(neg|ge, reg2, "$peak_moria_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(val_add, "$moria_status_counter", 1),
(spawn_around_party, "p_moria", "pt_small_host_of_moria"),
]),

(160.1, 160, 160, [
(eq, "$moria_status", 0),
(store_num_parties_of_template, reg2, "pt_moria_remnant"),
(neg|ge, reg2, "$peak_moria_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_moria"),
(set_spawn_radius, 1),
(spawn_around_party, "p_moria", "pt_moria_remnant"),
]),

(2, 0, 0, [
(neg|eq, "$moria_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$moria_status", 2),
    (eq, "$moria_status_counter", 2),
    (val_sub, "$moria_status", 1),
    (display_message, "str_moria_diminished", 4294901760),
    (display_message, "str_moria_spent", 0),
    (assign, "$peak_moria_scouts", 1),
    (assign, "$peak_moria_harassers", 1),
    (assign, "$moria_status_counter", 0),
    (assign, "$northern_shadow_setback", 1),
    (faction_set_slot, "fac_moria", 1, 1),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
    (try_begin),
    (eq, "$moria_status", 3),
    (eq, "$moria_status_counter", 3),
    (val_sub, "$moria_status", 1),
    (display_message, "str_moria_diminished", 4294901760),
    (display_message, "str_moria_weak", 0),
    (assign, "$peak_moria_scouts", 1),
    (assign, "$peak_moria_harassers", 2),
    (assign, "$moria_status_counter", 0),
    (assign, "$northern_shadow_setback", 1),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$moria_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_moria"),
(eq, reg5, 0),
(store_num_parties_of_template, reg5, "pt_moria_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$moria_status", 0),
(display_message, "str_moria_diminished", 4291631616),
(display_message, "str_moria_fallen", 4291631616),
(assign, "$moria_status_counter", 0),
(play_sound, "snd_loud_gong", 0),
]),
 
(167, 167, 0, [
(neg|eq, "$moria_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$moria_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$moria_status_counter", 0),
    (val_add, "$moria_status", 1),
    (assign, "$peak_moria_scouts", 1),
    (assign, "$peak_moria_harassers", 2),
    (display_message, "str_moria_rallied", 4280453922),
    (display_message, "str_moria_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_gondor_foragers", 4),
(assign, "$peak_gondor_scouts", 4),
(assign, "$peak_gondor_harassers", 2),
(assign, "$peak_gondor_war_parties", 1),
(assign, "$gondor_status_counter", 0),
(assign, "$free_peoples_setback", 0),
]),

(10.1, 0, 0, [
(ge, "$gondor_status", 3),
(store_num_parties_of_template, reg2, "pt_gondor_foragers"),
(store_num_parties_of_template, reg3, "pt_lamedon_auxila"),
(store_num_parties_of_template, reg4, "pt_blackroot_vale_auxila"),
(store_num_parties_of_template, reg5, "pt_pinnath_gelin_auxila"),
(store_num_parties_of_template, reg6, "pt_lossarnach_auxila"),
(val_add, reg2, reg3),
(val_add, reg2, reg4),
(val_add, reg2, reg5),
(val_add, reg2, reg6),
(neg|ge, reg2, "$peak_gondor_foragers"),
], [
(store_random, reg3, 4, 0),
    (try_begin),
    (eq, reg3, 0),
    (assign, reg5, "$ethring"),
    (assign, reg4, "pt_lamedon_auxila"),
    (else_try),
    (eq, reg3, 1),
    (assign, reg5, "$erech"),
    (assign, reg4, "pt_blackroot_vale_auxila"),
    (else_try),
    (eq, reg3, 2),
    (assign, reg5, "$dol_amroth"),
    (assign, reg4, "pt_pinnath_gelin_auxila"),
    (else_try),
    (eq, reg3, 3),
    (assign, reg5, "$lossarnach"),
    (assign, reg4, "pt_lossarnach_auxila"),
    (else_try),
    (eq, reg3, 4),
    (store_random, reg5, 10, 0),
    (val_add, reg5, "p_town_1"),
    (assign, reg4, "pt_gondor_foragers"),
(try_end),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(10.1, 0, 0, [
(ge, "$gondor_status", 3),
(store_num_parties_of_template, reg2, "pt_gondor_scouts"),
(neg|ge, reg2, "$peak_gondor_scouts"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_gondor_scouts"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$gondor_status", 3),
(store_num_parties_of_template, reg2, "pt_gondor_patrol"),
(neg|ge, reg2, "$peak_gondor_harassers"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_gondor_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$gondor_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_gondor"),
(neg|ge, reg2, "$peak_gondor_war_parties"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(val_add, "$gondor_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_gondor"),
]),

(160.1, 48, 0, [
(eq, "$war_has_begun", 1),
(ge, "$gondor_status", 2),
(store_num_parties_of_template, reg2, "pt_host_of_gondor"),
(neg|ge, reg2, 1),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(assign, "$host_of_gondor_active", 1),
(assign, "$host_of_gondor_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_gondor"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(10.1, 24, 0, [
(ge, "$gondor_status", 3),
(store_num_parties_of_template, reg2, "pt_gondor_foragers"),
(store_num_parties_of_template, reg3, "pt_lamedon_auxila"),
(store_num_parties_of_template, reg4, "pt_blackroot_vale_auxila"),
(store_num_parties_of_template, reg5, "pt_pinnath_gelin_auxila"),
(store_num_parties_of_template, reg6, "pt_lossarnach_auxila"),
(val_add, reg2, reg3),
(val_add, reg2, reg4),
(val_add, reg2, reg5),
(val_add, reg2, reg6),
(neg|ge, reg2, "$peak_gondor_foragers"),
], [
(store_random, reg3, 4, 0),
    (try_begin),
    (eq, reg3, 0),
    (assign, reg5, "$ethring"),
    (assign, reg4, "pt_lamedon_auxila"),
    (else_try),
    (eq, reg3, 1),
    (assign, reg5, "$erech"),
    (assign, reg4, "pt_blackroot_vale_auxila"),
    (else_try),
    (eq, reg3, 2),
    (assign, reg5, "$dol_amroth"),
    (assign, reg4, "pt_pinnath_gelin_auxila"),
    (else_try),
    (eq, reg3, 3),
    (assign, reg5, "$minas_tirith"),
    (assign, reg4, "pt_lossarnach_auxila"),
    (else_try),
    (eq, reg3, 4),
    (store_random, reg5, 10, 0),
    (val_add, reg5, "p_town_1"),
    (assign, reg4, "pt_gondor_foragers"),
(try_end),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(10.1, 24, 0, [
(eq, "$gondor_status", 2),
(store_num_parties_of_template, reg2, "pt_gondor_scouts"),
(neg|ge, reg2, "$peak_gondor_scouts"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_gondor_scouts"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$gondor_status", 2),
(store_num_parties_of_template, reg2, "pt_gondor_patrol"),
(neg|ge, reg2, "$peak_gondor_harassers"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_gondor_patrol"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$gondor_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_gondor"),
(neg|ge, reg2, "$peak_gondor_war_parties"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(val_add, "$gondor_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_gondor"),
]),

(10.1, 24, 0, [(ge, "$gondor_status", 3),
(store_num_parties_of_template, reg2, "pt_gondor_foragers"),
(store_num_parties_of_template, reg3, "pt_lamedon_auxila"),
(store_num_parties_of_template, reg4, "pt_blackroot_vale_auxila"),
(store_num_parties_of_template, reg5, "pt_pinnath_gelin_auxila"),
(store_num_parties_of_template, reg6, "pt_lossarnach_auxila"),
(val_add, reg2, reg3),
(val_add, reg2, reg4),
(val_add, reg2, reg5),
(val_add, reg2, reg6),
(neg|ge, reg2, "$peak_gondor_foragers"),
], [
(store_random, reg3, 4, 0),
    (try_begin),
    (eq, reg3, 0),
    (assign, reg5, "$ethring"),
    (assign, reg4, "pt_lamedon_auxila"),
    (else_try),
    (eq, reg3, 1),
    (assign, reg5, "$erech"),
    (assign, reg4, "pt_blackroot_vale_auxila"),
    (else_try),
    (eq, reg3, 2),
    (assign, reg5, "$dol_amroth"),
    (assign, reg4, "pt_pinnath_gelin_auxila"),
    (else_try),
    (eq, reg3, 3),
    (assign, reg5, "$minas_tirith"),
    (assign, reg4, "pt_lossarnach_auxila"),
    (else_try),
    (eq, reg3, 4),
    (store_random, reg5, 10, 0),
    (val_add, reg5, "p_town_1"),
    (assign, reg4, "pt_gondor_foragers"),
(try_end),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(10.1, 24, 0, [(eq, "$gondor_status", 1),
(store_num_parties_of_template, reg2, "pt_gondor_scouts"),
(neg|ge, reg2, "$peak_gondor_scouts"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_gondor_scouts"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$gondor_status", 1),
(store_num_parties_of_template, reg2, "pt_gondor_patrol"),
(neg|ge, reg2, "$peak_gondor_harassers"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_gondor_patrol"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$gondor_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_gondor"),
(neg|ge, reg2, "$peak_gondor_war_parties"),
], [
(store_random, reg5, 9, 0),
(val_add, reg5, "p_town_1"),
(set_spawn_radius, 1),
(val_add, "$gondor_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_gondor"),
]),

(160.1, 160, 160, [
(eq, "$gondor_status", 0),
(store_num_parties_of_template, reg2, "pt_gondor_remnant"),
(neg|ge, reg2, "$peak_gondor_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "$minas_tirith"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_gondor_remnant"),
]),

(100.1, 24, 0, [
(eq, "$gondor_status", 0),
(store_num_parties_of_template, reg2, "pt_refugees_of_gondor"),
(neg|ge, reg2, 2),
], [
(assign, reg6, 3),
(store_random, reg3, reg6, 0),
(assign, reg8, "p_town_1"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_refugees_of_gondor"),
]),

(100.1, 24, 24, [
(ge, "$gondor_status", 2),
(store_num_parties_of_template, reg2, "pt_ithilien_rangers"),
(neg|ge, reg2, 3),
], [
(ge, "$gondor_status", 2),
(store_num_parties_of_template, reg2, "pt_ithilien_rangers"),
(neg|ge, reg2, 3),
]),

(2, 0, 0, [
(neg|eq, "$gondor_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$gondor_status", 2),
    (eq, "$gondor_status_counter", 2),
    (val_sub, "$gondor_status", 1),
    (display_message, "str_gondor_diminished", 4294901760),
    (display_message, "str_gondor_spent", 0),
    (assign, "$peak_gondor_foragers", 1),
    (assign, "$peak_gondor_scouts", 2),
    (assign, "$peak_gondor_harassers", 1),
    (assign, "$free_peoples_setback", 1),
    (assign, "$gondor_status_counter", 0),
    (faction_set_slot, "fac_gondor", 1, 3),
    (call_script, "script_determine_troop_morale", 0, 0),
    (else_try),
    (eq, "$gondor_status", 3),
    (eq, "$gondor_status_counter", 3),
    (val_sub, "$gondor_status", 1),
    (display_message, "str_gondor_diminished", 4294901760),
    (display_message, "str_gondor_weak", 0),
    (assign, "$peak_gondor_foragers", 2),
    (assign, "$peak_gondor_scouts", 3),
    (assign, "$free_peoples_setback", 1),
    (assign, "$gondor_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$gondor_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_gondor"),
(eq, reg5, 0),
(store_num_parties_of_template, reg6, "pt_host_of_gondor"),
(eq, reg6, 0),
(store_num_parties_of_template, reg5, "pt_gondor_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$gondor_status_counter", 0),
(assign, "$gondor_status", 0),
(display_message, "str_gondor_diminished", 4291631616),
(display_message, "str_gondor_fallen", 4291631616),
(assign, reg20, "fac_gondor"),
(call_script, "script_flush_fallen_prisoners", 0, 0),
(call_script, "script_flush_imprisoned_heroes", "fac_gondor", 0),
(faction_set_slot, "fac_rohan", 1, 3),
(faction_set_slot, "fac_mordor", 1, 2),
(faction_set_slot, "fac_corsairs", 1, 2),
(faction_set_slot, "fac_haradrim", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),

(167, 167, 0, [
(neg|eq, "$gondor_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$gondor_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$gondor_status_counter", 0),
    (val_add, "$gondor_status", 1),
    (assign, "$peak_gondor_foragers", 4),
    (assign, "$peak_gondor_scouts", 4),
    (assign, "$peak_gondor_harassers", 2),
    (display_message, "str_gondor_rallied", 4280453922),
    (display_message, "str_gondor_full_strength", 0),
    (else_try),
    (eq, "$gondor_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$gondor_status_counter", 0),
    (val_add, "$gondor_status", 1),
    (assign, "$peak_gondor_foragers", 2),
    (assign, "$peak_gondor_scouts", 3),
    (assign, "$peak_gondor_harassers", 1),
    (display_message, "str_gondor_rallied", 4280453922),
    (display_message, "str_gondor_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_rohan_foragers", 4),
(assign, "$peak_rohan_scouts", 4),
(assign, "$peak_rohan_harassers", 2),
(assign, "$peak_rohan_war_parties", 1),
(assign, "$rohan_status_counter", 0),
(assign, "$free_peoples_setback", 0),
]),

(10.1, 0, 0, [
(ge, "$rohan_status", 3),
(store_num_parties_of_template, reg2, "pt_rohan_foragers"),
(neg|ge, reg2, "$peak_rohan_foragers"),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_foragers"),
]),

(10.1, 0, 0, [
(ge, "$rohan_status", 3),
(store_num_parties_of_template, reg2, "pt_rohan_scouts"),
(neg|ge, reg2, "$peak_rohan_scouts"),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_scouts"),
]),

#trg150
(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$rohan_status", 3),
(store_num_parties_of_template, reg2, "pt_rohan_patrol"),
(neg|ge, reg2, "$peak_rohan_harassers"),
(neg|eq, "$rohirrim_ride_east", 4),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$rohan_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_rohan"),
(neg|ge, reg2, "$peak_rohan_war_parties"),
(neg|eq, "$rohirrim_ride_east", 4),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(val_add, "$rohan_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_rohan"),
]),

(160.1, 48, 0, [
(eq, "$war_has_begun", 1),
(ge, "$rohan_status", 2),
(store_num_parties_of_template, reg2, "pt_host_of_rohan"),
(neg|ge, reg2, 1),
(neg|eq, "$rohirrim_ride_east", 4),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(assign, "$host_of_rohan_active", 1),
(assign, "$host_of_rohan_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_rohan"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(10.1, 24, 0, [
(eq, "$rohan_status", 2),
(store_num_parties_of_template, reg2, "pt_rohan_foragers"),
(neg|ge, reg2, "$peak_rohan_foragers"),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_foragers"),
]),

(10.1, 24, 0, [
(eq, "$rohan_status", 2),
(store_num_parties_of_template, reg2, "pt_rohan_scouts"),
(neg|ge, reg2, "$peak_rohan_scouts"),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_scouts"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$rohan_status", 2),
(store_num_parties_of_template, reg2, "pt_rohan_patrol"),
(neg|ge, reg2, "$peak_rohan_harassers"),
(neg|eq, "$rohirrim_ride_east", 4),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_patrol"),
]),
 
(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$rohan_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_rohan"),
(neg|ge, reg2, "$peak_rohan_war_parties"),
(neg|eq, "$rohirrim_ride_east", 4),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(val_add, "$rohan_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_rohan"),
]),

(10.1, 24, 0, [
(eq, "$rohan_status", 1),
(store_num_parties_of_template, reg2, "pt_rohan_foragers"),
(neg|ge, reg2, "$peak_rohan_foragers"),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_foragers"),
]),

(10.1, 24, 0, [
(eq, "$rohan_status", 1),
(store_num_parties_of_template, reg2, "pt_rohan_scouts"),
(neg|ge, reg2, "$peak_rohan_scouts"),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_scouts"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$rohan_status", 1),
(store_num_parties_of_template, reg2, "pt_rohan_patrol"),
(neg|ge, reg2, "$peak_rohan_harassers"),
(neg|eq, "$rohirrim_ride_east", 4),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_patrol"),
]),

(10.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$rohan_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_rohan"),
(neg|ge, reg2, "$peak_rohan_war_parties"),
(neg|eq, "$rohirrim_ride_east", 4),
], [
(store_random, reg5, 7, 0),
(val_add, reg5, "p_town_11"),
(set_spawn_radius, 1),
(val_add, "$rohan_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_rohan"),
]),

(160.1, 160, 160, [
(eq, "$rohan_status", 0),
(store_num_parties_of_template, reg2, "pt_rohan_remnant"),
(neg|ge, reg2, "$peak_rohan_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "$minas_tirith"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_rohan_remnant"),
]),

(100.1, 24, 0, [
(eq, "$rohan_status", 0),
(store_num_parties_of_template, reg2, "pt_refugees_of_rohan"),
(neg|ge, reg2, 2),
], [
(assign, reg6, 2),
(store_random, reg3, reg6, 0),
(assign, reg8, "p_town_11"),
(val_add, reg8, reg3),
(set_spawn_radius, 1),
(spawn_around_party, reg8, "pt_refugees_of_rohan"),
]),

(2, 0, 0, [
(neg|eq, "$rohan_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$rohan_status", 2),
    (eq, "$rohan_status_counter", 2),
    (val_sub, "$rohan_status", 1),
    (display_message, "str_rohan_diminished", 4294901760),
    (display_message, "str_rohan_spent", 0),
    (assign, "$peak_rohan_foragers", 1),
    (assign, "$peak_rohan_scouts", 2),
    (assign, "$peak_rohan_harassers", 1),
    (assign, "$free_peoples_setback", 1),
    (assign, "$rohan_status_counter", 0),
    (faction_set_slot, "fac_rohan", 1, 3),
    (call_script, "script_determine_troop_morale", 0, 0),
    (else_try),
    (eq, "$rohan_status", 3),
    (eq, "$rohan_status_counter", 3),
    (val_sub, "$rohan_status", 1),
    (display_message, "str_rohan_diminished", 4294901760),
    (display_message, "str_rohan_weak", 0),
    (assign, "$peak_rohan_foragers", 2),
    (assign, "$peak_rohan_scouts", 3),
    (assign, "$free_peoples_setback", 1),
    (assign, "$rohan_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$rohan_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_rohan"),
(eq, reg5, 0),
(store_num_parties_of_template, reg6, "pt_host_of_rohan"),
(eq, reg6, 0),
(store_num_parties_of_template, reg5, "pt_rohan_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$rohan_status_counter", 0),
(assign, "$rohan_status", 0),
(display_message, "str_rohan_diminished", 4291631616),
(display_message, "str_rohan_fallen", 4291631616),
(assign, reg20, "fac_rohan"),
(call_script, "script_flush_fallen_prisoners", 0, 0),
(call_script, "script_flush_imprisoned_heroes", "fac_rohan", 0),
(faction_set_slot, "fac_gondor", 1, 3),
(faction_set_slot, "fac_isengard", 1, 2),
(faction_set_slot, "fac_dunlanders", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),

(167, 167, 0, [
(neg|eq, "$rohan_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$rohan_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$rohan_status_counter", 0),
    (val_add, "$rohan_status", 1),
    (assign, "$peak_rohan_foragers", 4),
    (assign, "$peak_rohan_scouts", 4),
    (assign, "$peak_rohan_harassers", 2),
    (display_message, "str_rohan_rallied", 4280453922),
    (display_message, "str_rohan_full_strength", 0),
    (else_try),
    (eq, "$rohan_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$rohan_status_counter", 0),
    (val_add, "$rohan_status", 1),
    (assign, "$peak_rohan_foragers", 2),
    (assign, "$peak_rohan_scouts", 3),
    (assign, "$peak_rohan_harassers", 1),
    (display_message, "str_rohan_rallied", 4280453922),
    (display_message, "str_rohan_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_isengard_foragers", 3),
(assign, "$peak_isengard_scouts", 3),
(assign, "$peak_isengard_harassers", 2),
(assign, "$peak_isengard_war_parties", 1),
(assign, "$isengard_status_counter", 0),
(assign, "$isengard_setback", 0),
]),

(10.1, 0, 0, [
(ge, "$isengard_status", 3),
(store_num_parties_of_template, reg2, "pt_isengard_scouts"),
(store_num_parties_of_template, reg3, "pt_isengard_scouts_b"),
(val_add, reg2, reg3),
(neg|ge, reg2, "$peak_isengard_scouts"),
], [
(store_random, ":local0", 8, 0),
    (try_begin),
    (neg|gt, ":local0", 2),
    (assign, reg4, "pt_isengard_scouts_b"),
    (else_try),
    (ge, ":local0", 3),
    (assign, reg4, "pt_isengard_scouts"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$isengard_status", 3),
(store_num_parties_of_template, reg2, "pt_isengard_patrol"),
(store_num_parties_of_template, reg3, "pt_isengard_patrol_b"),
(val_add, reg2, reg3),
(neg|ge, reg2, "$peak_isengard_harassers"),
], [
(store_random, ":local0", 8, 0),
    (try_begin),
    (neg|ge, ":local0", 2),
    (assign, reg4, "pt_isengard_patrol_b"),
    (else_try),
    (ge, ":local0", 2),
    (assign, reg4, "pt_isengard_patrol"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$isengard_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_isengard"),
(neg|ge, reg2, "$peak_isengard_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(val_add, "$isengard_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_isengard"),
]),

(160.1, 48, 0, [
(eq, "$war_has_begun", 1),
(ge, "$isengard_status", 2),
(store_num_parties_of_template, reg2, "pt_host_of_isengard"),
(neg|ge, reg2, 1),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(assign, "$host_of_isengard_active", 1),
(assign, "$host_of_isengard_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_isengard"),
(call_script, "script_hero_leads_host", reg0, 0),
]),
 
(20.1, 24, 0, [
(ge, "$isengard_status", 3),
(store_num_parties_of_template, reg2, "pt_isengard_scouts"),
(store_num_parties_of_template, reg3, "pt_isengard_scouts_b"),
(val_add, reg2, reg3),
(neg|ge, reg2, "$peak_isengard_scouts"),
], [
(store_random, ":local0", 8, 0),
    (try_begin),
    (neg|gt, ":local0", 1),
    (assign, reg4, "pt_isengard_scouts_b"),
    (else_try),
    (ge, ":local0", 2),
    (assign, reg4, "pt_isengard_scouts"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$isengard_status", 2),
(store_num_parties_of_template, reg2, "pt_isengard_patrol"),
(store_num_parties_of_template, reg3, "pt_isengard_patrol_b"),
(val_add, reg2, reg3),
(neg|ge, reg2, "$peak_isengard_harassers"),
], [
(store_random, ":local0", 8, 0),
    (try_begin),
    (neg|ge, ":local0", 2),
    (assign, reg4, "pt_isengard_patrol_b"),
    (else_try),
    (ge, ":local0", 2),
    (assign, reg4, "pt_isengard_patrol"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$isengard_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_isengard"),
(neg|ge, reg2, "$peak_isengard_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(val_add, "$isengard_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_isengard"),
]),

(40.1, 24, 0, [
(ge, "$isengard_status", 3),
(store_num_parties_of_template, reg2, "pt_isengard_scouts"),
(store_num_parties_of_template, reg3, "pt_isengard_scouts_b"),
(val_add, reg2, reg3),
(neg|ge, reg2, "$peak_isengard_scouts"),
], [
(store_random, ":local0", 8, 0),
    (try_begin),
    (neg|gt, ":local0", 1),
    (assign, reg4, "pt_isengard_scouts_b"),
    (else_try),
    (ge, ":local0", 2),
    (assign, reg4, "pt_isengard_scouts"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$isengard_status", 1),
(store_num_parties_of_template, reg2, "pt_isengard_patrol"),
(store_num_parties_of_template, reg3, "pt_isengard_patrol_b"),
(val_add, reg2, reg3),
(neg|ge, reg2, "$peak_isengard_harassers"),
], [
(store_random, ":local0", 8, 0),
    (try_begin),
    (neg|ge, ":local0", 2),
    (assign, reg4, "pt_isengard_patrol_b"),
    (else_try),
    (ge, ":local0", 2),
    (assign, reg4, "pt_isengard_patrol"),
(try_end),
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, reg4),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$isengard_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_isengard"),
(neg|ge, reg2, "$peak_isengard_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(val_add, "$isengard_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_isengard"),
]),

(160.1, 160, 160, [
(eq, "$isengard_status", 0),
(store_num_parties_of_template, reg2, "pt_isengard_remnant"),
(neg|ge, reg2, "$peak_isengard_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_isengard"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_isengard_remnant"),
]),

(2, 0, 0, [
(neg|eq, "$isengard_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$isengard_status", 4),
    (eq, "$isengard_status_counter", 4),
    (val_sub, "$isengard_status", 1),
    (display_message, "str_isengard_diminished", 4294901760),
    (display_message, "str_isengard_strong", 0),
    (assign, "$isengard_status_counter", 0),
(try_end),
    (try_begin),
    (eq, "$isengard_status", 3),
    (eq, "$isengard_status_counter", 2),
    (val_sub, "$isengard_status", 1),
    (display_message, "str_isengard_diminished", 4294901760),
    (display_message, "str_isengard_weak", 0),
    (assign, "$peak_isengard_scouts", 2),
    (assign, "$peak_isengard_harassers", 1),
    (assign, "$isengard_setback", 1),
    (assign, "$isengard_status_counter", 0),
(try_end),
    (try_begin),
    (eq, "$isengard_status", 2),
    (eq, "$isengard_status_counter", 2),
    (val_sub, "$isengard_status", 1),
    (display_message, "str_isengard_diminished", 4294901760),
    (display_message, "str_isengard_spent", 0),
    (assign, "$peak_isengard_scouts", 1),
    (assign, "$peak_isengard_harassers", 1),
    (assign, "$isengard_setback", 1),
    (assign, "$isengard_status_counter", 0),
    (faction_set_slot, "fac_isengard", 1, 1),
    (faction_set_slot, "fac_dunlanders", 1, 1),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$isengard_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_isengard"),
(eq, reg5, 0),
(store_num_parties_of_template, reg6, "pt_host_of_isengard"),
(eq, reg6, 0),
(store_num_parties_of_template, reg5, "pt_isengard_patrol"),
(store_num_parties_of_template, reg15, "pt_isengard_patrol_b"),
(val_add, reg5, reg15),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$isengard_status_counter", 0),
(assign, "$isengard_status", 0),
(display_message, "str_isengard_diminished", 4291631616),
(display_message, "str_isengard_fallen", 4291631616),
(play_sound, "snd_loud_gong", 0),
    (try_begin),
    (eq, "$dunlander_status", 0),
    (assign, "$rohirrim_ride_east", 1),
(try_end),
(call_script, "script_flush_imprisoned_heroes", "fac_isengard", 0),
(faction_set_slot, "fac_dunlanders", 1, 1),
(faction_set_slot, "fac_rohan", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(eq, "$mordor_isengard_war", 1),
(faction_set_slot, "fac_mordor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
]),

(167, 167, 0, [
(neg|eq, "$isengard_status", 4),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$isengard_status", 3),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$isengard_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (assign, "$peak_isengard_scouts", 3),
    (assign, "$peak_isengard_harassers", 2),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_strong", 0),
(try_end),
    (try_begin),
    (eq, "$isengard_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (assign, "$peak_isengard_scouts", 2),
    (assign, "$peak_isengard_harassers", 1),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_weak", 0),
(try_end),
]),
 
(0, 0, ti_once, [], [
(assign, "$peak_dunlander_foragers", 2),
(assign, "$peak_dunlander_scouts", 2),
(assign, "$peak_dunlander_harassers", 2),
(assign, "$peak_dunlander_war_parties", 1),
(assign, "$dunlander_status_counter", 0),
]),

(10.1, 0, 0, [
(ge, "$dunlander_status", 3),
(store_num_parties_of_template, reg2, "pt_dunlander_scouts"),
(neg|ge, reg2, "$peak_dunlander_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dunlander_scouts"),
]),
 
(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$dunlander_status", 3),
(store_num_parties_of_template, reg2, "pt_dunlander_patrol"),
(neg|ge, reg2, "$peak_dunlander_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dunlander_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$dunlander_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_dunlanders"),
(neg|ge, reg2, "$peak_dunlander_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(val_add, "$dunlander_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_dunlanders"),
]),

(20.1, 24, 0, [
(eq, "$dunlander_status", 2),
(store_num_parties_of_template, reg2, "pt_dunlander_scouts"),
(neg|ge, reg2, "$peak_dunlander_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dunlander_scouts"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$dunlander_status", 2),
(store_num_parties_of_template, reg2, "pt_dunlander_patrol"),
(neg|ge, reg2, "$peak_dunlander_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dunlander_patrol"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$dunlander_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_dunlanders"),
(neg|ge, reg2, "$peak_dunlander_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(val_add, "$dunlander_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_dunlanders"),
]),

(40.1, 24, 0, [
(eq, "$dunlander_status", 1),
(store_num_parties_of_template, reg2, "pt_dunlander_scouts"),
(neg|ge, reg2, "$peak_dunlander_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dunlander_scouts"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$dunlander_status", 1),
(store_num_parties_of_template, reg2, "pt_dunlander_patrol"),
(neg|ge, reg2, "$peak_dunlander_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dunlander_patrol"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$dunlander_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_dunlanders"),
(neg|ge, reg2, "$peak_dunlander_war_parties"),
], [
store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(val_add, "$dunlander_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_dunlanders"),
]),

(160.1, 160, 160, [
(eq, "$dunlander_status", 0),
(store_num_parties_of_template, reg2, "pt_dunlander_remnant"),
(neg|ge, reg2, "$peak_dunlander_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_dunlander_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_dunlander_remnant"),
]),

(2, 0, 0, [
(neg|eq, "$dunlander_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$dunlander_status", 2),
    (eq, "$dunlander_status_counter", 2),
    (val_sub, "$dunlander_status", 1),
    (display_message, "str_dunlander_diminished", 4294901760),
    (display_message, "str_dunlander_spent", 0),
    (assign, "$peak_dunlander_scouts", 1),
    (assign, "$peak_dunlander_harassers", 1),
    (assign, "$isengard_setback", 1),
    (assign, "$dunlander_status_counter", 0),
    (faction_set_slot, "fac_dunlanders", 1, 1),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
    (try_begin),
    (eq, "$dunlander_status", 3),
    (eq, "$dunlander_status_counter", 3),
    (val_sub, "$dunlander_status", 1),
    (display_message, "str_dunlander_diminished", 4294901760),
    (display_message, "str_dunlander_weak", 0),
    (assign, "$peak_dunlander_scouts", 1),
    (assign, "$peak_dunlander_harassers", 2),
    (assign, "$isengard_setback", 1),
    (assign, "$dunlander_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$dunlander_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_dunlanders"),
(eq, reg5, 0),
(store_num_parties_of_template, reg5, "pt_dunlander_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$dunlander_status", 0),
(display_message, "str_dunlander_diminished", 4291631616),
(display_message, "str_dunlander_fallen", 4291631616),
(assign, "$dunlander_status_counter", 0),
    (try_begin),
    (eq, "$isengard_status", 0),
    (assign, "$rohirrim_ride_east", 1),
(try_end),
(assign, reg20, "fac_dunlanders"),
(call_script, "script_flush_fallen_prisoners", 0, 0),
(faction_set_slot, "fac_rohan", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),

(167, 167, 0, [
(neg|eq, "$dunlander_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$dunlander_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dunlander_status_counter", 0),
    (val_add, "$dunlander_status", 1),
    (assign, "$peak_dunlander_scouts", 2),
    (assign, "$peak_dunlander_harassers", 2),
    (display_message, "str_dunlander_rallied", 4280453922),
    (display_message, "str_dunlander_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$dunlander_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dunlander_status_counter", 0),
    (val_add, "$dunlander_status", 1),
    (assign, "$peak_dunlander_scouts", 1),
    (assign, "$peak_dunlander_harassers", 2),
    (display_message, "str_dunlander_rallied", 4280453922),
    (display_message, "str_dunlander_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_mordor_scouts", 4),
(assign, "$peak_mordor_harassers", 3),
(assign, "$peak_mordor_war_parties", 2),
(assign, "$mordor_status_counter", 0),
(assign, "$mordor_setback", 0),
]),

(10.1, 0, 0, [
(ge, "$mordor_status", 3),
(store_num_parties_of_template, reg2, "pt_mordor_scouts"),
(neg|ge, reg2, "$peak_mordor_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mordor_scouts"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$mordor_status", 3),
(store_num_parties_of_template, reg2, "pt_mordor_patrol"),
(neg|ge, reg2, "$peak_mordor_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mordor_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$mordor_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_mordor"),
(neg|ge, reg2, "$peak_mordor_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(val_add, "$mordor_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_mordor"),
]),

(160.1, 48, 0, [
(eq, "$war_has_begun", 1),
(ge, "$mordor_status", 2),
(store_num_parties_of_template, reg2, "pt_host_of_mordor"),
(neg|ge, reg2, 1),
], [
(store_random, reg5, 4, 0),
(val_add, reg5, "p_morannon"),
(set_spawn_radius, 1),
(assign, "$host_of_mordor_active", 1),
(assign, "$host_of_mordor_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_mordor"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(160.1, 0, 0, [
(ge, "$mordor_difficulty_level", 1),
(eq, "$war_has_begun", 1),
(neg|ge, "$host_of_minas_morgul_active", 1),
(ge, "$mordor_status", 1),
(store_num_parties_of_template, reg2, "pt_host_of_minas_morgul"),
(neg|ge, reg2, 1),
(store_random, reg1, 100, 0),
(val_add, reg1, "$morgul_host_spawn_chance"),
(ge, reg1, 80),
(val_add, "$morgul_host_spawn_chance", 10),
], [
(assign, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(assign, "$host_of_minas_morgul_active", 1),
(assign, "$host_of_minas_morgul_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_minas_morgul"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(160.1, 0, 0, [
(ge, "$mordor_difficulty_level", 2),
(eq, "$war_has_begun", 1),
(neg|ge, "$host_of_udun_active", 1),
(val_add, "$udun_host_spawn_chance", 10),
(ge, "$mordor_status", 1),
(store_num_parties_of_template, reg2, "pt_host_of_udun"),
(neg|ge, reg2, 1),
(store_random, reg1, 100, 0),
(val_add, reg1, "$udud_host_spawn_chance"),
(ge, reg1, 80),
], [
(assign, reg5, "p_morannon"),
(set_spawn_radius, 1),
(assign, "$host_of_udun_active", 1),
(assign, "$host_of_udun_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_udun"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(160.1, 0, 24, [
(ge, "$mordor_difficulty_level", 3),
(eq, "$war_has_begun", 1),
(neg|ge, "$host_of_gorgoroth_active", 1),
(val_add, "$gorgoroth_host_spawn_chance", 5),
(ge, "$host_of_udun_active", 1),
(ge, "$mordor_status", 1),
(store_num_parties_of_template, reg2, "pt_host_of_gorgoroth"),
(neg|ge, reg2, 1),
(store_random, reg1, 100, 0),
(val_add, reg1, "$gorgoroth_host_spawn_chance"),
(ge, reg1, 80),
], [
(assign, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(assign, "$host_of_gorgoroth_active", 1),
(assign, "$host_of_gorgoroth_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_gorgoroth"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(160.1, 0, 0, [
(ge, "$mordor_difficulty_level", 4),
(eq, "$war_has_begun", 1),
(neg|ge, "$host_of_barad_dur_active", 1),
(val_add, "$barad_dur_spawn_chance", 5),
(ge, "$host_of_gorgoroth_active", 1),
(ge, "$mordor_status", 1),
(store_num_parties_of_template, reg2, "pt_host_of_barad_dur"),
(neg|ge, reg2, 1),
(store_random, reg1, 100, 0),
(val_add, reg1, "$barad_dur_host_spawn_chance"),
(ge, reg1, 80),
(eq, "$host_of_minas_morgul_active", 2),
(eq, "$host_of_udun_active", 2),
], [
(assign, reg5, "p_morannon"),
(set_spawn_radius, 1),
(assign, "$host_of_barad_dur_active", 1),
(assign, "$host_of_barad_dur_order_tracking", 0),
(spawn_around_party, reg5, "pt_host_of_barad_dur"),
(call_script, "script_hero_leads_host", reg0, 0),
]),

(20.1, 24, 0, [
(eq, "$mordor_status", 2),
(store_num_parties_of_template, reg2, "pt_mordor_scouts"),
(neg|ge, reg2, "$peak_mordor_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mordor_scouts"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$mordor_status", 2),
(store_num_parties_of_template, reg2, "pt_mordor_patrol"),
(neg|ge, reg2, "$peak_mordor_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mordor_patrol"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$mordor_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_mordor"),
(neg|ge, reg2, "$peak_mordor_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(val_add, "$mordor_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_mordor"),
]),

(40.1, 24, 0, [
(eq, "$mordor_status", 1),
(store_num_parties_of_template, reg2, "pt_mordor_scouts"),
(neg|ge, reg2, "$peak_mordor_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mordor_scouts"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$mordor_status", 1),
(store_num_parties_of_template, reg2, "pt_mordor_patrol"),
(neg|ge, reg2, "$peak_mordor_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_mordor_patrol"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$mordor_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_mordor"),
(neg|ge, reg2, "$peak_mordor_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_minas_morgul"),
(set_spawn_radius, 1),
(val_add, "$mordor_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_mordor"),
]),

(2, 0, 0, [
(neg|eq, "$mordor_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$mordor_status", 2),
    (eq, "$mordor_status_counter", 3),
    (val_sub, "$mordor_status", 1),
    (display_message, "str_mordor_diminished", 4294901760),
    (display_message, "str_mordor_spent", 0),
    (assign, "$peak_mordor_scouts", 2),
    (assign, "$peak_mordor_harassers", 2),
    (assign, "$peak_mordor_war_parties", 1),
    (assign, "$mordor_setback", 1),
    (assign, "$mordor_status_counter", 0),
    (faction_set_slot, "fac_mordor", 1, 1),
    (faction_set_slot, "fac_haradrim", 1, 1),
    (faction_set_slot, "fac_easterlings", 1, 1),
    (faction_set_slot, "fac_corsairs", 1, 1),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
    (try_begin),
    (eq, "$mordor_status", 3),
    (eq, "$mordor_status_counter", 3),
    (val_sub, "$mordor_status", 1),
    (display_message, "str_mordor_diminished", 4294901760),
    (display_message, "str_mordor_weak", 0),
    (assign, "$peak_mordor_scouts", 3),
    (assign, "$peak_mordor_harassers", 2),
    (assign, "$peak_mordor_war_parties", 1),
    (assign, "$mordor_setback", 1),
    (assign, "$mordor_status_counter", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_status", 4),
    (eq, "$mordor_status_counter", 3),
    (val_sub, "$mordor_status", 1),
    (display_message, "str_mordor_diminished", 4294901760),
    (display_message, "str_mordor_strong", 0),
    (assign, "$mordor_setback", 1),
    (assign, "$mordor_status_counter", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_status", 5),
    (eq, "$mordor_status_counter", 4),
    (val_sub, "$mordor_status", 1),
    (display_message, "str_mordor_diminished", 4294901760),
    (display_message, "str_mordor_very_strong", 0),
    (assign, "$mordor_setback", 1),
    (assign, "$mordor_status_counter", 0),
(try_end),
]),

(167, 167, 0, [
(neg|eq, "$mordor_status", 5),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$mordor_status", 4),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_status", 3),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_very_strong", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (assign, "$peak_mordor_scouts", 4),
    (assign, "$peak_mordor_harassers", 3),
    (assign, "$peak_mordor_war_parties", 2),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_strong", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (assign, "$peak_mordor_scouts", 3),
    (assign, "$peak_mordor_harassers", 2),
    (assign, "$peak_mordor_war_parties", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_weak", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$mordor_difficulty_level", 4),
(eq, "$mordor_status", 1),
(eq, "$dol_guldur_status", 0),
(eq, "$host_of_gorgoroth_active", 2),
(eq, "$host_of_minas_morgul_active", 2),
(eq, "$host_of_barad_dur_active", 2),
(eq, "$host_of_udun_active", 2),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_mordor"),
(eq, reg5, 0),
(store_num_parties_of_template, reg5, "pt_host_of_mordor"),
(eq, reg5, 0),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$mordor_status", 0),
(display_message, "str_mordor_diminished", 4291631616),
(display_message, "str_mordor_fallen", 4291631616),
(play_sound, "snd_battle_horn_gondor", 0),
(assign, "$mordor_status_counter", 0),
(call_script, "script_flush_imprisoned_heroes", "fac_mordor", 0),
(faction_set_slot, "fac_rohan", 1, 2),
(faction_set_slot, "fac_gondor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
]),

(0, 0, ti_once, [], [
(assign, "$peak_haradrim_scouts", 2),
(assign, "$peak_haradrim_harassers", 2),
(assign, "$peak_haradrim_war_parties", 1),
(assign, "$haradrim_status_counter", 0),
]),

(10.1, 0, 0, [
(ge, "$haradrim_status", 3),
(store_num_parties_of_template, reg2, "pt_haradrim_scouts"),
(neg|ge, reg2, "$peak_haradrim_scouts"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_haradrim_scouts"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$haradrim_status", 3),
(store_num_parties_of_template, reg2, "pt_haradrim_patrol"),
(neg|ge, reg2, "$peak_haradrim_harassers"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_haradrim_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$haradrim_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_haradrim"),
(neg|ge, reg2, "$peak_haradrim_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(val_add, "$haradrim_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_haradrim"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$haradrim_status", 2),
(store_num_parties_of_template, reg2, "pt_haradrim_scouts"),
(neg|ge, reg2, "$peak_haradrim_scouts"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_haradrim_scouts"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$haradrim_status", 2),
(store_num_parties_of_template, reg2, "pt_haradrim_patrol"),
(neg|ge, reg2, "$peak_haradrim_harassers"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_haradrim_patrol"), 
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$haradrim_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_haradrim"),
(neg|ge, reg2, "$peak_haradrim_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(val_add, "$haradrim_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_haradrim"),
]),

(40.1, 24, 0, [
(eq, "$haradrim_status", 1),
(store_num_parties_of_template, reg2, "pt_haradrim_scouts"),
(neg|ge, reg2, "$peak_haradrim_scouts"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_haradrim_scouts"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$haradrim_status", 1),
(store_num_parties_of_template, reg2, "pt_haradrim_patrol"),
(neg|ge, reg2, "$peak_haradrim_harassers"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_haradrim_patrol"),
]),

(40.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$haradrim_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_haradrim"),
(neg|ge, reg2, "$peak_haradrim_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(val_add, "$haradrim_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_haradrim"),
]),

(160.1, 160, 160, [
(eq, "$haradrim_status", 0),
(store_num_parties_of_template, reg2, "pt_haradrim_remnant"),
(neg|ge, reg2, "$peak_haradrim_war_parties"),
], [
(store_random, reg5, 2, 0),
(val_add, reg5, "p_haradrim_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_haradrim_remnant"), 
]),

(2, 0, 0, [
(neg|eq, "$haradrim_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$haradrim_status", 2),
    (eq, "$haradrim_status_counter", 2),
    (val_sub, "$haradrim_status", 1),
    (display_message, "str_harad_diminished", 4294901760),
    (display_message, "str_harad_spent", 0),
    (assign, "$peak_haradrim_scouts", 1),
    (assign, "$peak_haradrim_harassers", 1),
    (assign, "$mordor_setback", 1),
    (assign, "$haradrim_status_counter", 0),
    (faction_set_slot, "fac_haradrim", 1, 1),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
    (try_begin),
    (eq, "$haradrim_status", 3),
    (eq, "$haradrim_status_counter", 3),
    (val_sub, "$haradrim_status", 1),
    (display_message, "str_harad_diminished", 4294901760),
    (display_message, "str_harad_weak", 0),
    (assign, "$peak_haradrim_scouts", 1),
    (assign, "$peak_haradrim_harassers", 2),
    (assign, "$mordor_setback", 1),
    (assign, "$haradrim_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$haradrim_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg5, "pt_small_host_of_haradrim"),
(eq, reg5, 0),
(store_num_parties_of_template, reg5, "pt_haradrim_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$haradrim_status_counter", 0),
(assign, "$haradrim_status", 0),
(display_message, "str_harad_diminished", 4291631616),
(display_message, "str_harad_fallen", 4291631616),
(assign, reg20, "fac_haradrim"),
(call_script, "script_flush_fallen_prisoners", 0, 0),
(faction_set_slot, "fac_gondor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),

(167, 167, 0, [
(neg|eq, "$haradrim_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$haradrim_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$haradrim_status_counter", 0),
    (val_add, "$haradrim_status", 1),
    (assign, "$peak_haradrim_scouts", 2),
    (assign, "$peak_haradrim_harassers", 2),
    (display_message, "str_harad_rallied", 4280453922),
    (display_message, "str_harad_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$haradrim_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$haradrim_status_counter", 0),
    (val_add, "$haradrim_status", 1),
    (assign, "$peak_haradrim_scouts", 1),
    (assign, "$peak_haradrim_harassers", 2),
    (display_message, "str_harad_rallied", 4280453922),
    (display_message, "str_harad_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_easterling_scouts", 2),
(assign, "$peak_easterling_harassers", 2),
(assign, "$peak_easterling_war_parties", 1),
(assign, "$easterling_status_counter", 0),
]),

(10.1, 0, 0, [
(ge, "$easterling_status", 3),
(store_num_parties_of_template, reg2, "pt_easterling_scouts"),
(neg|ge, reg2, "$peak_easterling_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_easterling_scouts"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$easterling_status", 3),
(store_num_parties_of_template, reg2, "pt_easterling_patrol"),
(neg|ge, reg2, "$peak_easterling_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_easterling_patrol"),
]),

(10.1, 0, 0, [
(eq, "$war_has_begun", 1),
(ge, "$easterling_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_easterlings"),
(neg|ge, reg2, "$peak_easterling_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(val_add, "$easterling_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_easterlings"),
]),

(20.1, 24, 0, [
(eq, "$easterling_status", 2),
(store_num_parties_of_template, reg2, "pt_easterling_scouts"),
(neg|ge, reg2, "$peak_easterling_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_easterling_scouts"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$easterling_status", 2),
(store_num_parties_of_template, reg2, "pt_easterling_patrol"),
(neg|ge, reg2, "$peak_easterling_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_easterling_patrol"),
]),

(20.1, 24, 0, [
(eq, "$war_has_begun", 1),
(eq, "$easterling_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_easterlings"),
(neg|ge, reg2, "$peak_easterling_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(val_add, "$easterling_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_easterlings"),
]),

(40.1, 36, 0, [
(eq, "$easterling_status", 1),
(store_num_parties_of_template, reg2, "pt_easterling_scouts"),
(neg|ge, reg2, "$peak_easterling_scouts"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_easterling_scouts"),
]),

(40.1, 36, 0, [
(eq, "$war_has_begun", 1),
(eq, "$easterling_status", 1),
(store_num_parties_of_template, reg2, "pt_easterling_patrol"),
(neg|ge, reg2, "$peak_easterling_harassers"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_easterling_patrol"),
]),

(40.1, 36, 0, [
(eq, "$war_has_begun", 1),
(eq, "$easterling_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_easterlings"),
(neg|ge, reg2, "$peak_easterling_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(val_add, "$easterling_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_easterlings"),
]),

(160.1, 160, 160, [
(eq, "$easterling_status", 0),
(store_num_parties_of_template, reg2, "pt_easterling_remnant"),
(neg|ge, reg2, "$peak_easterling_war_parties"),
], [
(store_random, reg5, 3, 0),
(val_add, reg5, "p_easterling_south_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_easterling_remnant"),
]),

(2, 0, 0, [
(neg|eq, "$easterling_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$easterling_status", 2),
    (eq, "$easterling_status_counter", 2),
    (val_sub, "$easterling_status", 1),
    (display_message, "str_easterling_diminished", 4294901760),
    (display_message, "str_easterling_spent", 0),
    (assign, "$peak_easterling_scouts", 1),
    (assign, "$peak_easterling_harassers", 1),
    (assign, "$mordor_setback", 1),
    (assign, "$easterling_status_counter", 0),
    (faction_set_slot, "fac_easterlings", 1, 1),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
    (try_begin),
    (eq, "$easterling_status", 3),
    (eq, "$easterling_status_counter", 3),
    (val_sub, "$easterling_status", 1),
    (display_message, "str_easterling_diminished", 4294901760),
    (display_message, "str_easterling_weak", 0),
    (assign, "$peak_easterling_scouts", 1),
    (assign, "$peak_easterling_harassers", 2),
    (assign, "$mordor_setback", 1),
    (assign, "$easterling_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$easterling_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg0, "pt_small_host_of_easterlings"),
(eq, reg0, 0),
(store_num_parties_of_template, reg5, "pt_easterling_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$easterling_status_counter", 0),
(assign, "$easterling_status", 0),
(display_message, "str_easterling_diminished", 4291631616),
(display_message, "str_easterling_fallen", 4291631616),
(assign, reg20, "fac_easterlings"),
(call_script, "script_flush_fallen_prisoners", 0, 0),
(faction_set_slot, "fac_gondor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),

(167, 167, 0, [
(neg|eq, "$easterling_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$easterling_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$easterling_status_counter", 0),
    (val_add, "$easterling_status", 1),
    (assign, "$peak_easterling_scouts", 2),
    (assign, "$peak_easterling_harassers", 2),
    (display_message, "str_easterling_rallied", 4280453922),
    (display_message, "str_easterling_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$easterling_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$easterling_status_counter", 0),
    (val_add, "$easterling_status", 1),
    (assign, "$peak_easterling_scouts", 1),
    (assign, "$peak_easterling_harassers", 2),
    (display_message, "str_easterling_rallied", 4280453922),
    (display_message, "str_easterling_weak", 0),
(try_end),
]),

(0, 0, ti_once, [], [
(assign, "$peak_corsair_scouts", 2),
(assign, "$peak_corsair_harassers", 2),
(assign, "$peak_corsair_war_parties", 1),
(assign, "$corsair_status_counter", 0),
]),

(10.1, 0, 0, [
(ge, "$corsair_status", 3),
(store_num_parties_of_template, reg2, "pt_corsair_scouts"),
(neg|ge, reg2, "$peak_corsair_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_corsair_scouts"),
]),

(10.1, 0, 0, [
(ge, "$war_has_begun", 1),
(eq, "$corsair_status", 3),
(store_num_parties_of_template, reg2, "pt_corsair_patrol"),
(neg|ge, reg2, "$peak_corsair_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_corsair_patrol"),
]),

(10.1, 0, 0, [
(ge, "$war_has_begun", 1),
(eq, "$corsair_status", 3),
(store_num_parties_of_template, reg2, "pt_small_host_of_corsairs"),
(neg|ge, reg2, "$peak_corsair_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(val_add, "$corsair_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_corsairs"),
]),

(20.1, 0, 0, [
(eq, "$corsair_status", 2),
(store_num_parties_of_template, reg2, "pt_corsair_scouts"),
(neg|ge, reg2, "$peak_corsair_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_corsair_scouts"), 
]),

(20.1, 0, 0, [
(eq, "$war_has_begun", 1),
(eq, "$corsair_status", 2),
(store_num_parties_of_template, reg2, "pt_corsair_patrol"),
(neg|ge, reg2, "$peak_corsair_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_corsair_patrol"),
]),

(20.1, 0, 0, [
(eq, "$war_has_begun", 1),
(eq, "$corsair_status", 2),
(store_num_parties_of_template, reg2, "pt_small_host_of_corsairs"),
(neg|ge, reg2, "$peak_corsair_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(val_add, "$corsair_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_corsairs"),
]),

(40.1, 0, 0, [
(eq, "$corsair_status", 1),
(store_num_parties_of_template, reg2, "pt_corsair_scouts"),
(neg|ge, reg2, "$peak_corsair_scouts"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_corsair_scouts"),
]),

(40.1, 0, 0, [
(eq, "$war_has_begun", 1),
(eq, "$corsair_status", 1),
(store_num_parties_of_template, reg2, "pt_corsair_patrol"),
(neg|ge, reg2, "$peak_corsair_harassers"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_corsair_patrol"),
]),

(40.1, 0, 0, [
(eq, "$war_has_begun", 1),
(eq, "$corsair_status", 1),
(store_num_parties_of_template, reg2, "pt_small_host_of_corsairs"),
(neg|ge, reg2, "$peak_corsair_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(val_add, "$corsair_status_counter", 1),
(spawn_around_party, reg5, "pt_small_host_of_corsairs"),
]),

(160.1, 160, 160, [
(eq, "$corsair_status", 0),
(store_num_parties_of_template, reg2, "pt_corsair_remnant"),
(neg|ge, reg2, "$peak_corsair_war_parties"),
], [
(store_random, reg5, 1, 0),
(val_add, reg5, "p_corsair_camp"),
(set_spawn_radius, 1),
(spawn_around_party, reg5, "pt_corsair_remnant"),
]),

(2, 0, 0, [
(neg|eq, "$corsair_status", 0),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$corsair_status", 3),
    (eq, "$corsair_status_counter", 3),
    (val_sub, "$corsair_status", 1),
    (display_message, "str_corsair_diminished", 4294901760),
    (display_message, "str_corsair_weak", 0),
    (assign, "$peak_corsair_scouts", 1),
    (assign, "$peak_corsair_harassers", 2),
    (assign, "$mordor_setback", 1),
    (assign, "$corsair_status_counter", 0),
    (faction_set_slot, "fac_corsairs", 1, 1),
    (call_script, "script_determine_troop_morale", 0, 0),
(try_end),
    (try_begin),
    (eq, "$corsair_status", 2),
    (eq, "$corsair_status_counter", 2),
    (val_sub, "$corsair_status", 1),
    (display_message, "str_corsair_diminished", 4294901760),
    (display_message, "str_corsair_spent", 0),
    (assign, "$peak_corsair_scouts", 1),
    (assign, "$peak_corsair_harassers", 1),
    (assign, "$mordor_setback", 1),
    (assign, "$corsair_status_counter", 0),
(try_end),
]),

(2, 0, ti_once, [
(eq, "$corsair_status", 1),
(eq, "$war_has_begun", 1),
(store_num_parties_of_template, reg0, "pt_small_host_of_corsairs"),
(eq, reg0, 0),
(store_num_parties_of_template, reg5, "pt_corsair_patrol"),
(neg|gt, reg5, 1),
(store_current_hours, reg1),
(ge, reg1, 160),
], [
(assign, "$corsair_status_counter", 0),
(assign, "$corsair_status", 0),
(display_message, "str_corsair_diminished", 4291631616),
(display_message, "str_corsair_fallen", 4291631616),
(assign, reg20, "fac_corsairs"),
(call_script, "script_flush_fallen_prisoners", 0, 0),
(faction_set_slot, "fac_gondor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
(play_sound, "snd_loud_gong", 0),
]),

(167, 167, 0, [
(neg|eq, "$corsair_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$corsair_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$corsair_status_counter", 0),
    (val_add, "$corsair_status", 1),
    (assign, "$peak_corsair_scouts", 2),
    (assign, "$peak_corsair_harassers", 2),
    (display_message, "str_corsair_rallied", 4280453922),
    (display_message, "str_corsair_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$corsair_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$corsair_status_counter", 0),
    (val_add, "$corsair_status", 1),
    (assign, "$peak_corsair_scouts", 1),
    (assign, "$peak_corsair_harassers", 2),
    (display_message, "str_corsair_rallied", 4280453922),
    (display_message, "str_corsair_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$gondor_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$isengard_setback", 1),
    (eq, "$gondor_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$gondor_status_counter", 0),
    (val_add, "$gondor_status", 1),
    (assign, "$peak_gondor_foragers", 4),
    (assign, "$peak_gondor_scouts", 4),
    (assign, "$peak_gondor_harassers", 2),
    (display_message, "str_gondor_rallied", 4280453922),
    (display_message, "str_gondor_full_strength", 0),
    (else_try),
    (eq, "$isengard_setback", 1),
    (eq, "$gondor_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$gondor_status_counter", 0),
    (val_add, "$gondor_status", 1),
    (assign, "$peak_gondor_foragers", 2),
    (assign, "$peak_gondor_scouts", 3),
    (assign, "$peak_gondor_harassers", 1),
    (display_message, "str_gondor_rallied", 4280453922),
    (display_message, "str_gondor_weak", 0),
    (else_try),
    (eq, "$mordor_setback", 1),
    (eq, "$gondor_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$gondor_status_counter", 0),
    (val_add, "$gondor_status", 1),
    (assign, "$peak_gondor_foragers", 4),
    (assign, "$peak_gondor_scouts", 4),
    (assign, "$peak_gondor_harassers", 2),
    (display_message, "str_gondor_rallied", 4280453922),
    (display_message, "str_gondor_full_strength", 0),
    (else_try),
    (eq, "$mordor_setback", 1),
    (eq, "$gondor_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$gondor_status_counter", 0),
    (val_add, "$gondor_status", 1),
    (assign, "$peak_gondor_foragers", 2),
    (assign, "$peak_gondor_scouts", 3),
    (assign, "$peak_gondor_harassers", 1),
    (display_message, "str_gondor_rallied", 4280453922),
    (display_message, "str_gondor_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$rohan_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$isengard_setback", 1),
    (eq, "$rohan_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$rohan_status_counter", 0),
    (val_add, "$rohan_status", 1),
    (assign, "$peak_rohan_foragers", 4),
    (assign, "$peak_rohan_scouts", 4),
    (assign, "$peak_rohan_harassers", 2),
    (display_message, "str_rohan_rallied", 4280453922),
    (display_message, "str_rohan_full_strength", 0),
    (else_try),
    (eq, "$isengard_setback", 1),
    (eq, "$rohan_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$rohan_status_counter", 0),
    (val_add, "$rohan_status", 1),
    (assign, "$peak_rohan_foragers", 2),
    (assign, "$peak_rohan_scouts", 3),
    (assign, "$peak_rohan_harassers", 1),
    (display_message, "str_rohan_rallied", 4280453922),
    (display_message, "str_rohan_weak", 0),
    (else_try),
    (eq, "$mordor_setback", 1),
    (eq, "$rohan_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$rohan_status_counter", 0),
    (val_add, "$rohan_status", 1),
    (assign, "$peak_rohan_foragers", 4),
    (assign, "$peak_rohan_scouts", 4),
    (assign, "$peak_rohan_harassers", 2),
    (display_message, "str_rohan_rallied", 4280453922),
    (display_message, "str_rohan_full_strength", 0),
    (else_try),
    (eq, "$mordor_setback", 1),
    (eq, "$rohan_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$rohan_status_counter", 0),
    (val_add, "$rohan_status", 1),
    (assign, "$peak_rohan_foragers", 2),
    (assign, "$peak_rohan_scouts", 3),
    (assign, "$peak_rohan_harassers", 1),
    (display_message, "str_rohan_rallied", 4280453922),
    (display_message, "str_rohan_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$rivendell_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$northern_shadow_setback", 1),
    (eq, "$rivendell_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$rivendell_status_counter", 0),
    (val_add, "$rivendell_status", 1),
    (assign, "$peak_rivendell_scouts", 1),
    (assign, "$peak_rivendell_harassers", 2),
    (display_message, "str_rivendell_rallied", 4280453922),
    (display_message, "str_rivendell_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$lothlorien_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$northern_shadow_setback", 1),
    (eq, "$lothlorien_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$lothlorien_status_counter", 0),
    (val_add, "$lothlorien_status", 1),
    (assign, "$peak_lothlorien_foragers", 3),
    (assign, "$peak_lothlorien_scouts", 3),
    (assign, "$peak_lothlorien_harassers", 2),
    (display_message, "str_lothlorien_rallied", 4280453922),
    (display_message, "str_lothlorien_full_strength", 0),
    (else_try),
    (eq, "$northern_shadow_setback", 1),
    (eq, "$lothlorien_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$lothlorien_status_counter", 0),
    (val_add, "$lothlorien_status", 1),
    (assign, "$peak_lothlorien_foragers", 2),
    (assign, "$peak_lothlorien_scouts", 2),
    (assign, "$peak_lothlorien_harassers", 1),
    (display_message, "str_lothlorien_rallied", 4280453922),
    (display_message, "str_lothlorien_weak", 0),
    (else_try),
    (eq, "$elven_dol_guldur_war", 2),
    (eq, "$mordor_setback", 1),
    (eq, "$lothlorien_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$lothlorien_status_counter", 0),
    (val_add, "$lothlorien_status", 1),
    (assign, "$peak_lothlorien_foragers", 3),
    (assign, "$peak_lothlorien_scouts", 3),
    (assign, "$peak_lothlorien_harassers", 2),
    (display_message, "str_lothlorien_rallied", 4280453922),
    (display_message, "str_lothlorien_full_strength", 0),
    (else_try),
    (eq, "$elven_dol_guldur_war", 2),
    (eq, "$mordor_setback", 1),
    (eq, "$lothlorien_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$lothlorien_status_counter", 0),
    (val_add, "$lothlorien_status", 1),
    (assign, "$peak_lothlorien_foragers", 2),
    (assign, "$peak_lothlorien_scouts", 2),
    (assign, "$peak_lothlorien_harassers", 1),
    (display_message, "str_lothlorien_rallied", 4280453922),
    (display_message, "str_lothlorien_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$woodelf_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$northern_shadow_setback", 1),
    (eq, "$woodelf_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$woodelf_status_counter", 0),
    (val_add, "$woodelf_status", 1),
    (assign, "$peak_woodelf_scouts", 2),
    (assign, "$peak_woodelf_harassers", 2),
    (display_message, "str_woodelf_rallied", 4280453922),
    (display_message, "str_woodelf_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$northern_shadow_setback", 1),
    (eq, "$woodelf_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$woodelf_status_counter", 0),
    (val_add, "$woodelf_status", 1),
    (assign, "$peak_woodelf_scouts", 1),
    (assign, "$peak_woodelf_harassers", 2),
    (display_message, "str_woodelf_rallied", 4280453922),
    (display_message, "str_woodelf_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$isengard_status", 4),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (ge, "$free_peoples_setback", 1),
    (eq, "$isengard_status", 3),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_full_strength", 0),
(try_end),
    (try_begin),
    (ge, "$free_peoples_setback", 1),
    (eq, "$isengard_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (assign, "$peak_isengard_scouts", 3),
    (assign, "$peak_isengard_harassers", 2),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_strong", 0),
(try_end),
    (try_begin),
    (ge, "$free_peoples_setback", 1),
    (eq, "$isengard_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (assign, "$peak_isengard_scouts", 2),
    (assign, "$peak_isengard_harassers", 1),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_weak", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (ge, "$mordor_setback", 1),
    (eq, "$isengard_status", 3),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (ge, "$mordor_setback", 1),
    (eq, "$isengard_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (assign, "$peak_isengard_scouts", 3),
    (assign, "$peak_isengard_harassers", 2),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_strong", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (ge, "$mordor_setback", 1),
    (eq, "$isengard_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$isengard_status_counter", 0),
    (val_add, "$isengard_status", 1),
    (assign, "$peak_isengard_scouts", 2),
    (assign, "$peak_isengard_harassers", 1),
    (display_message, "str_isengard_rallied", 4280453922),
    (display_message, "str_isengard_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$dunlander_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$dunlander_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dunlander_status_counter", 0),
    (val_add, "$dunlander_status", 1),
    (assign, "$peak_dunlander_scouts", 2),
    (assign, "$peak_dunlander_harassers", 2),
    (display_message, "str_dunlander_rallied", 4280453922),
    (display_message, "str_dunlander_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$dunlander_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dunlander_status_counter", 0),
    (val_add, "$dunlander_status", 1),
    (assign, "$peak_dunlander_scouts", 1),
    (assign, "$peak_dunlander_harassers", 2),
    (display_message, "str_dunlander_rallied", 4280453922),
    (display_message, "str_dunlander_weak", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$mordor_setback", 1),
    (eq, "$dunlander_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dunlander_status_counter", 0),
    (val_add, "$dunlander_status", 1),
    (assign, "$peak_dunlander_scouts", 2),
    (assign, "$peak_dunlander_harassers", 2),
    (display_message, "str_dunlander_rallied", 4280453922),
    (display_message, "str_dunlander_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$mordor_setback", 1),
    (eq, "$dunlander_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dunlander_status_counter", 0),
    (val_add, "$dunlander_status", 1),
    (assign, "$peak_dunlander_scouts", 1),
    (assign, "$peak_dunlander_harassers", 2),
    (display_message, "str_dunlander_rallied", 4280453922),
    (display_message, "str_dunlander_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$moria_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$elven_setback", 1),
    (eq, "$moria_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$moria_status_counter", 0),
    (val_add, "$moria_status", 1),
    (assign, "$peak_moria_scouts", 1),
    (assign, "$peak_moria_harassers", 2),
    (display_message, "str_moria_rallied", 4280453922),
    (display_message, "str_moria_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$dol_guldur_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$elven_setback", 1),
    (eq, "$dol_guldur_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dol_guldur_status_counter", 0),
    (val_add, "$dol_guldur_status", 1),
    (assign, "$peak_dol_guldur_foragers", 3),
    (assign, "$peak_dol_guldur_scouts", 3),
    (assign, "$peak_dol_guldur_harassers", 2),
    (display_message, "str_dol_guldur_rallied", 4280453922),
    (display_message, "str_dol_guldur_full_strength", 0),
    (else_try),
    (eq, "$elven_setback", 1),
    (eq, "$dol_guldur_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dol_guldur_status_counter", 0),
    (val_add, "$dol_guldur_status", 1),
    (assign, "$peak_dol_guldur_foragers", 2),
    (assign, "$peak_dol_guldur_scouts", 2),
    (assign, "$peak_dol_guldur_harassers", 1),
    (display_message, "str_dol_guldur_rallied", 4280453922),
    (display_message, "str_dol_guldur_weak", 0),
    (else_try),
    (eq, "$elven_dol_guldur_war", 2),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$dol_guldur_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dol_guldur_status_counter", 0),
    (val_add, "$dol_guldur_status", 1),
    (assign, "$peak_dol_guldur_foragers", 3),
    (assign, "$peak_dol_guldur_scouts", 3),
    (assign, "$peak_dol_guldur_harassers", 2),
    (display_message, "str_dol_guldur_rallied", 4280453922),
    (display_message, "str_dol_guldur_full_strength", 0),
    (else_try),
    (eq, "$elven_dol_guldur_war", 2),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$dol_guldur_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dol_guldur_status_counter", 0),
    (val_add, "$dol_guldur_status", 1),
    (assign, "$peak_dol_guldur_foragers", 2),
    (assign, "$peak_dol_guldur_scouts", 2),
    (assign, "$peak_dol_guldur_harassers", 1),
    (display_message, "str_dol_guldur_rallied", 4280453922),
    (display_message, "str_dol_guldur_weak", 0),
    (else_try),
    (eq, "$elven_dol_guldur_war", 2),
    (eq, "$free_peoples_setback", 1),
    (eq, "$dol_guldur_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dol_guldur_status_counter", 0),
    (val_add, "$dol_guldur_status", 1),
    (assign, "$peak_dol_guldur_foragers", 3),
    (assign, "$peak_dol_guldur_scouts", 3),
    (assign, "$peak_dol_guldur_harassers", 2),
    (display_message, "str_dol_guldur_rallied", 4280453922),
    (display_message, "str_dol_guldur_full_strength", 0),
    (else_try),
    (eq, "$elven_dol_guldur_war", 2),
    (eq, "$free_peoples_setback", 1),
    (eq, "$dol_guldur_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$dol_guldur_status_counter", 0),
    (val_add, "$dol_guldur_status", 1),
    (assign, "$peak_dol_guldur_foragers", 2),
    (assign, "$peak_dol_guldur_scouts", 2),
    (assign, "$peak_dol_guldur_harassers", 1),
    (display_message, "str_dol_guldur_rallied", 4280453922),
    (display_message, "str_dol_guldur_weak", 0),
(try_end),
]),

(2, 0, 0, [
(eq, "$mordor_isengard_war", 1),
(neg|eq, "$mordor_status", 5),
], [
(eq, "$mordor_isengard_war", 1),
(neg|eq, "$mordor_status", 5),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$mordor_status", 4),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$mordor_status", 3),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_very_strong", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$mordor_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (assign, "$peak_mordor_scouts", 4),
    (assign, "$peak_mordor_harassers", 3),
    (assign, "$peak_mordor_war_parties", 2),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$mordor_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (assign, "$peak_mordor_scouts", 3),
    (assign, "$peak_mordor_harassers", 2),
    (assign, "$peak_mordor_war_parties", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$mordor_status", 5),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$mordor_status", 4),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$mordor_status", 3),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_very_strong", 0),
(try_end),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$mordor_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (assign, "$peak_mordor_scouts", 4),
    (assign, "$peak_mordor_harassers", 3),
    (assign, "$peak_mordor_war_parties", 2),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$mordor_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$mordor_status_counter", 0),
    (val_add, "$mordor_status", 1),
    (assign, "$peak_mordor_scouts", 3),
    (assign, "$peak_mordor_harassers", 2),
    (assign, "$peak_mordor_war_parties", 1),
    (display_message, "str_mordor_rallied", 4280453922),
    (display_message, "str_mordor_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$haradrim_status", 3),
(eq, "$war_has_begun", 1),
], [
(neg|eq, "$haradrim_status", 3),
(eq, "$war_has_begun", 1),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$haradrim_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$haradrim_status_counter", 0),
    (val_add, "$haradrim_status", 1),
    (assign, "$peak_haradrim_scouts", 2),
    (assign, "$peak_haradrim_harassers", 2),
    (display_message, "str_harad_rallied", 4280453922),
    (display_message, "str_harad_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$haradrim_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$haradrim_status_counter", 0),
    (val_add, "$haradrim_status", 1),
    (assign, "$peak_haradrim_scouts", 1),
    (assign, "$peak_haradrim_harassers", 2),
    (display_message, "str_harad_rallied", 4280453922),
    (display_message, "str_harad_weak", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$haradrim_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$haradrim_status_counter", 0),
    (val_add, "$haradrim_status", 1),
    (assign, "$peak_haradrim_scouts", 2),
    (assign, "$peak_haradrim_harassers", 2),
    (display_message, "str_harad_rallied", 4280453922),
    (display_message, "str_harad_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$haradrim_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$haradrim_status_counter", 0),
    (val_add, "$haradrim_status", 1),
    (assign, "$peak_haradrim_scouts", 1),
    (assign, "$peak_haradrim_harassers", 2),
    (display_message, "str_harad_rallied", 4280453922),
    (display_message, "str_harad_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$corsair_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$corsair_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$corsair_status_counter", 0),
    (val_add, "$corsair_status", 1),
    (assign, "$peak_corsair_scouts", 2),
    (assign, "$peak_corsair_harassers", 2),
    (display_message, "str_corsair_rallied", 4280453922),
    (display_message, "str_corsair_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$corsair_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$corsair_status_counter", 0),
    (val_add, "$corsair_status", 1),
    (assign, "$peak_corsair_scouts", 1),
    (assign, "$peak_corsair_harassers", 2),
    (display_message, "str_corsair_rallied", 4280453922),
    (display_message, "str_corsair_weak", 0),
(try_end),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$corsair_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$corsair_status_counter", 0),
    (val_add, "$corsair_status", 1),
    (assign, "$peak_corsair_scouts", 2),
    (assign, "$peak_corsair_harassers", 2),
    (display_message, "str_corsair_rallied", 4280453922),
    (display_message, "str_corsair_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$corsair_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$corsair_status_counter", 0),
    (val_add, "$corsair_status", 1),
    (assign, "$peak_corsair_scouts", 1),
    (assign, "$peak_corsair_harassers", 2),
    (display_message, "str_corsair_rallied", 4280453922),
    (display_message, "str_corsair_weak", 0),
(try_end),
]),

(2, 0, 0, [
(neg|eq, "$easterling_status", 3),
(eq, "$war_has_begun", 1),
], [
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$easterling_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$easterling_status_counter", 0),
    (val_add, "$easterling_status", 1),
    (assign, "$peak_easterling_scouts", 2),
    (assign, "$peak_easterling_harassers", 2),
    (display_message, "str_easterling_rallied", 4280453922),
    (display_message, "str_easterling_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$free_peoples_setback", 1),
    (eq, "$easterling_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$easterling_status_counter", 0),
    (val_add, "$easterling_status", 1),
    (assign, "$peak_easterling_scouts", 1),
    (assign, "$peak_easterling_harassers", 2),
    (display_message, "str_easterling_rallied", 4280453922),
    (display_message, "str_easterling_weak", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$easterling_status", 2),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$easterling_status_counter", 0),
    (val_add, "$easterling_status", 1),
    (assign, "$peak_easterling_scouts", 2),
    (assign, "$peak_easterling_harassers", 2),
    (display_message, "str_easterling_rallied", 4280453922),
    (display_message, "str_easterling_full_strength", 0),
(try_end),
    (try_begin),
    (eq, "$mordor_isengard_war", 1),
    (eq, "$isengard_setback", 1),
    (eq, "$easterling_status", 1),
    (store_random, reg0, 100, 0),
    (neg|ge, reg0, "$faction_recovery_chance"),
    (assign, "$easterling_status_counter", 0),
    (val_add, "$easterling_status", 1),
    (assign, "$peak_easterling_scouts", 1),
    (assign, "$peak_easterling_harassers", 2),
    (display_message, "str_easterling_rallied", 4280453922),
    (display_message, "str_easterling_weak", 0),
(try_end),
]),

(2, 0, 0, [(eq, "$free_peoples_setback", 1),], [(assign, "$free_peoples_setback", 0),
]),
(2, 0, 0, [(eq, "$mordor_setback", 1),], [(assign, "$mordor_setback", 0),
]),
(2, 0, 0, [(eq, "$northern_shadow_setback", 1),], [(assign, "$northern_shadow_setback", 0),
]),
(2, 0, 0, [(eq, "$elven_setback", 1),], [(assign, "$elven_setback", 0),
]),
(2, 0, 0, [(eq, "$isengard_setback", 1),], [(assign, "$isengard_setback", 0),
]),

(24.1, 0, , ti_once, [
(eq, "$war_has_begun", 0),
(store_character_level, reg0, 0),
(ge, reg0, "$war_start_level"),
], [
(assign, "$war_has_begun", 1),
(assign, "$elven_dol_guldur_war", 1),
(assign, "$peak_brigands", 4),
(display_message, "str_war_begins", 4291631616),
    (try_begin),
    (eq, "$faction_gondor_member_status", 3),
    (play_sound, "snd_battle_horn_gondor", 0),
    (else_try),
    (eq, "$faction_rohan_member_status", 3),
    (play_sound, "snd_battle_horn_rohan", 0),
    (else_try),
    (eq, "$faction_mordor_member_status", 3),
    (play_sound, "snd_battle_horn_mordor", 0),
    (else_try),
    (eq, "$faction_isengard_member_status", 3),
    (play_sound, "snd_battle_horn_isengard", 0),
    (else_try),
    (eq, "$faction_lothlorien_member_status", 3),
    (play_sound, "snd_battle_horn_gondor", 0),
(try_end),
(tutorial_box, "str_war_begins_tutorial"),
]),

(5, 0, ti_once, [
(neg|eq, "$victory_achieved", 1),
(neg|eq, "$elven_dol_guldur_war", 2),
(eq, "$dol_guldur_status", 0),
(eq, "$moria_status", 0),
], [
    (try_begin),
    (ge, "$lothlorien_status", 1),
    (display_message, "str_elven_victory_in_north_string", 4280453922),
    (tutorial_box, "str_elven_victory_in_north"),
    (assign, "$elven_dol_guldur_war", 2),
    (else_try),
    (ge, "$woodelf_status", 1),
    (display_message, "str_elven_victory_in_north_string", 4280453922),
    (tutorial_box, "str_elven_victory_in_north"),
    (assign, "$elven_dol_guldur_war", 2),
    (else_try),
    (ge, "$rivendell_status", 1),
    (display_message, "str_elven_victory_in_north_string", 4280453922),
    (tutorial_box, "str_elven_victory_in_north"),
    (assign, "$elven_dol_guldur_war", 2),
(try_end),
]),

(5, 0, ti_once, [
(neg|eq, "$victory_achieved", 1),
(neg|eq, "$elven_dol_guldur_war", 2),
(eq, "$lothlorien_status", 0),
(eq, "$rivendell_status", 0),
(eq, "$woodelf_status", 0),
], [
    (try_begin),
    (gt, "$moria_status", 0),
    (display_message, "str_shadow_victory_in_north_string", 4280453922),
    (tutorial_box, "str_shadow_victory_in_north"),
    (assign, "$elven_dol_guldur_war", 2),
    (else_try),
    (gt, "$dol_guldur_status", 0),
    (display_message, "str_shadow_victory_in_north_string", 4280453922),
    (tutorial_box, "str_shadow_victory_in_north"),
    (assign, "$elven_dol_guldur_war", 2),
(try_end),
]),

(6, 0, ti_once, [
(neg|eq, "$victory_achieved", 1),
(neg|ge, "$mordor_difficulty_level", 4),
(eq, "$isengard_status", 0),
(eq, "$mordor_status", 1),
(eq, "$haradrim_status", 0),
(eq, "$dunlander_status", 0),
(ge, "$rohan_status", 1),
(ge, "$gondor_status", 1),
(eq, "$easterling_status", 0),
(eq, "$corsair_status", 0),
(eq, "$dol_guldur_status", 0),
(eq, "$moria_status", 0),
], [
(display_message, "str_free_peoples_victory_string", 4280453922),
(tutorial_box, "str_free_peoples_victory"),
(assign, "$victory_achieved", 1),
]),

(6, 0, ti_once, [
(neg|eq, "$victory_achieved", 1),
(neg|ge, "$mordor_difficulty_level", 4),
(eq, "$isengard_status", 0),
(eq, "$mordor_status", 1),
(eq, "$haradrim_status", 0),
(eq, "$dunlander_status", 0),
(eq, "$rohan_status", 0),
(eq, "$gondor_status", 0),
(eq, "$easterling_status", 0),
(eq, "$corsair_status", 0),
(eq, "$dol_guldur_status", 0),
(eq, "$moria_status", 0),
(this_or_next|ge, "$lothlorien_status", 1),
(ge, "$woodelf_status", 1),
], [
(display_message, "str_elven_victory_string", 4280453922),
(tutorial_box, "str_elven_victory"),
(assign, "$victory_achieved", 1),
]),

(6, 0, ti_once, [
(neg|eq, "$victory_achieved", 1),
(neg|ge, "$mordor_difficulty_level", 4),
(eq, "$isengard_status", 0),
(eq, "$mordor_status", 1),
(eq, "$haradrim_status", 0),
(eq, "$dunlander_status", 0),
(ge, "$rohan_status", 1),
(eq, "$gondor_status", 0),
(eq, "$easterling_status", 0),
(eq, "$corsair_status", 0),
(eq, "$dol_guldur_status", 0),
(eq, "$moria_status", 0),
], [
(display_message, "str_rohan_victory_string", 4280453922),
(tutorial_box, "str_rohan_victory"),
(assign, "$victory_achieved", 1),
]),

(6, 0, ti_once, [
(neg|eq, "$victory_achieved", 1),
(neg|ge, "$mordor_difficulty_level", 4),
(eq, "$isengard_status", 0),
(eq, "$mordor_status", 1),
(eq, "$haradrim_status", 0),
(eq, "$dunlander_status", 0),
(eq, "$rohan_status", 0),
(ge, "$gondor_status", 1),
(eq, "$easterling_status", 0),
(eq, "$corsair_status", 0),
(eq, "$dol_guldur_status", 0),
(eq, "$moria_status", 0),
], [
(display_message, "str_gondor_victory_string", 4280453922),
(tutorial_box, "str_gondor_victory"),
(assign, "$victory_achieved", 1),
]),

(6, 0, ti_once, [
(neg|eq, "$victory_achieved", 1),
(neg|ge, "$mordor_difficulty_level", 4),
(ge, "$isengard_status", 1),
(eq, "$mordor_status", 1),
(eq, "$haradrim_status", 0),
(eq, "$rohan_status", 0),
(eq, "$gondor_status", 0),
(eq, "$easterling_status", 0),
(eq, "$corsair_status", 0),
], [
(display_message, "str_isengard_victory_string", 4280453922),
(tutorial_box, "str_isengard_victory"),
(assign, "$victory_achieved", 1),
]),

(6, 0, ti_once, [
(neg|eq, "$victory_achieved", 1),
(eq, "$isengard_status", 0),
(eq, "$gondor_status", 0),
(eq, "$rohan_status", 0),
(ge, "$mordor_status", 1),
(eq, "$dunlander_status", 0),
], [
(display_message, "str_mordor_victory_string", 4280453922),
(tutorial_box, "str_mordor_victory"),
(assign, "$victory_achieved", 1),
]),

(6, 0, ti_once, [
(eq, "$mordor_difficulty_level", 4),
(neg|eq, "$victory_achieved", 1),
(eq, "$isengard_status", 0),
(eq, "$mordor_status", 0),
(eq, "$haradrim_status", 0),
(eq, "$dunlander_status", 0),
(ge, "$rohan_status", 1),
(ge, "$gondor_status", 1),
(eq, "$easterling_status", 0),
(eq, "$corsair_status", 0),
(eq, "$dol_guldur_status", 0),
(eq, "$moria_status", 0),
], [
(display_message, "str_total_allied_victory_string", 4280453922),
(tutorial_box, "str_total_allied_victory_box"),
(assign, "$victory_achieved", 1),
]),

(6, 0, ti_once, [
(eq, "$mordor_difficulty_level", 4),
(neg|eq, "$victory_achieved", 1),
(ge, "$isengard_status", 1),
(eq, "$mordor_status", 0),
(eq, "$haradrim_status", 0),
(eq, "$rohan_status", 0),
(eq, "$gondor_status", 0),
(eq, "$easterling_status", 0),
(eq, "$corsair_status", 0),
], [
(display_message, "str_isengard_total_victory_string", 4280453922),
(tutorial_box, "str_isengard_total_victory_box"),
(assign, "$victory_achieved", 1),
]),

(12, 0, ti_once, [
(eq, "$war_has_begun", 1),
(eq, "$gondor_status", 0),
(eq, "$rohan_status", 0),
(ge, "$isengard_status", 1),
(ge, "$mordor_status", 1),
], [
(assign, "$mordor_isengard_war", 1),
(display_message, "str_mordor_isengard_war", 4291631616),
(tutorial_box, "str_mordor_isengard_war_tutorial"),
(set_relation, "fac_easterlings", "fac_isengard", -30),
(set_relation, "fac_corsairs", "fac_isengard", -30),
(set_relation, "fac_haradrim", "fac_isengard", -30),
(set_relation, "fac_easterlings", "fac_dunlanders", -30),
(set_relation, "fac_corsairs", "fac_dunlanders", -30),
(set_relation, "fac_haradrim", "fac_dunlanders", -30),
(set_relation, "fac_mordor", "fac_dunlanders", -30),
(set_relation, "fac_mordor_caravans", "fac_isengard", -30),
(set_relation, "fac_mordor_caravans", "fac_dunlanders", -30),
(set_relation, "fac_isengard_caravans", "fac_corsairs", -30),
(set_relation, "fac_isengard_caravans", "fac_easterlings", -30),
(set_relation, "fac_isengard_caravans", "fac_haradrim", -30),
(set_relation, "fac_isengard", "fac_dol_guldur", -30),
(set_relation, "fac_dunlanders", "fac_dol_guldur", -30),
(set_relation, "fac_easterlings", "fac_moria", -30),
(set_relation, "fac_corsairs", "fac_moria", -30),
(set_relation, "fac_haradrim", "fac_moria", -30),
(set_relation, "fac_mordor", "fac_moria", -30),
(set_relation, "fac_isengard", "fac_mordor", -30),
]),

(12.1, 0, ti_once, [
(eq, "$mordor_isengard_war", 1),
(eq, "$faction_mordor_member_status", 3),
], [(set_relation, "fac_isengard", "fac_player_faction", -30),
(set_relation, "fac_dunlanders", "fac_player_faction", -30),
(set_relation, "fac_isengard_caravans", "fac_player_faction", -30),
(set_relation, "fac_moria", "fac_player_faction", -30),
(assign, "$faction_moria_member_status", 0),
(assign, "$faction_isengard_member_status", 0),
]),

(12.1, 0, ti_once, [
(eq, "$mordor_isengard_war", 1),
(eq, "$faction_isengard_member_status", 3),
], [
(set_relation, "fac_mordor", "fac_player_faction", -30),
(set_relation, "fac_corsairs", "fac_player_faction", -30),
(set_relation, "fac_haradrim", "fac_player_faction", -30),
(set_relation, "fac_easterlings", "fac_player_faction", -30),
(set_relation, "fac_mordor_caravans", "fac_player_faction", -30),
(set_relation, "fac_dol_guldur", "fac_player_faction", -30),
(assign, "$faction_dol_guldur_member_status", 0),
(assign, "$faction_mordor_member_status", 0),
]),

(10, 0, 0, [], [
    (try_for_parties, ":local0"),
    (party_get_template_id, ":local1", ":local0"),
    (this_or_next|eq, ":local1", "pt_host_of_gondor"),
    (this_or_next|eq, ":local1", "pt_host_of_rohan"),
    (this_or_next|eq, ":local1", "pt_host_of_lothlorien"),
    (this_or_next|eq, ":local1", "pt_host_of_isengard"),
    (this_or_next|eq, ":local1", "pt_host_of_mordor"),
    (this_or_next|eq, ":local1", "pt_host_of_dol_guldur"),
    (this_or_next|eq, ":local1", "pt_host_of_gorgoroth"),
    (this_or_next|eq, ":local1", "pt_host_of_udun"),
    (this_or_next|eq, ":local1", "pt_host_of_minas_morgul"),
    (eq, ":local1", "pt_host_of_barad_dur"),
        (try_begin),
        (assign, ":local2", 0),
        (eq, ":local1", "pt_host_of_rohan"),
        (neg|eq, "$rohirrim_ride_east", 0),
        (assign, ":local2", 1),
    (try_end),
    (eq, ":local2", 0),
    (party_get_slot, ":local3", ":local0", 1),
    (eq, ":local3", 0),
    (store_faction_of_party, ":local4", ":local0"),
        (try_begin),
        (eq, ":local4", "fac_gondor"),
        (call_script, "script_set_gondor_host_destination", ":local0", 0),
        (else_try),
        (eq, ":local4", "fac_rohan"),
        (call_script, "script_set_rohan_host_destination", ":local0", 0),
        (else_try),
        (eq, ":local4", "fac_lothlorien"),
        (call_script, "script_set_lothlorien_host_destination", ":local0", 0),
        (else_try),
        (eq, ":local4", "fac_isengard"),
        (call_script, "script_set_isengard_host_destination", ":local0", 0),
        (else_try),
        (eq, ":local4", "fac_mordor"),
        (call_script, "script_set_mordor_host_destination", ":local0", 0),
        (else_try),
        (eq, ":local4", "fac_dol_guldur"),
        (call_script, "script_set_dol_guldur_host_destination", ":local0", 0),
    (try_end),
    (neg|eq, reg0, 0),
    (assign, ":local5", reg0),
    (store_distance_to_party_from_party, ":local6", ":local5", ":local0"),
    (gt, ":local6", 10),
    (party_set_ai_object, ":local0", ":local5"),
    (party_set_ai_behavior, ":local0", 1),
    (party_set_slot, ":local0", 1, 1),
    (party_set_slot, ":local0", 2, 1),
    (party_set_slot, ":local0", 3, ":local5"),
(try_end),
]), 

(22, 0, 0, [], [
    (try_for_parties, ":local0"),
    (party_get_slot, ":local1", ":local0", 1),
    (eq, ":local1", 2),
    (party_get_slot, ":local2", ":local0", 2),
    (neg|eq, ":local2", 1),
    (store_faction_of_party, ":local3", ":local0"),
    (neg|eq, ":local3", "fac_player_faction"),
    (party_get_slot, ":local4", ":local0", 4),
        (try_begin),
        (eq, ":local4", 0),
        (party_set_slot, ":local0", 4, 1),
        (else_try),
        (eq, ":local4", 1),
        (party_set_slot, ":local0", 1, 0),
        (party_set_slot, ":local0", 2, 0),
        (party_set_slot, ":local0", 3, 0),
        (party_set_slot, ":local0", 4, 0),
        (party_set_ai_object, ":local0", 0),
        (party_set_ai_behavior, ":local0", 2),
    (try_end),
(try_end),
]),

(0.1, 0, 0, [], [
    (try_for_parties, ":local0"),
    (party_get_slot, ":local1", ":local0", 2),
    (eq, ":local1", 1),
    (party_get_slot, ":local2", ":local0", 1),
    (gt, ":local2", 0),
    (party_get_slot, ":local3", ":local0", 3),
    (store_distance_to_party_from_party, ":local4", ":local3", ":local0"),
    (neg|gt, ":local4", 6),
    (party_set_ai_behavior, ":local0", 2),
    (party_set_slot, ":local0", 1, 0),
    (party_set_slot, ":local0", 2, 0),
    (party_set_slot, ":local0", 3, 0),
    (party_set_slot, ":local0", 4, 0),
        (try_begin),
        (store_faction_of_party, ":local5", ":local0"),
        (eq, ":local5", "fac_player_faction"),
        (party_set_ai_behavior, ":local0", 0),
    (try_end),
(try_end),
]),

(1.1, 0, 0, [
(eq, "$host_of_gondor_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_gondor"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_gondor_fallen", 0),
(val_add, "$gondor_status_counter", 1),
(assign, "$host_of_gondor_order_tracking", 0),
(assign, "$host_of_gondor_active", 0),
(faction_set_slot, "fac_corsairs", 1, 2),
(faction_set_slot, "fac_haradrim", 1, 2),
(faction_set_slot, "fac_mordor", 1, 2),
(faction_set_slot, "fac_gondor", 1, 3),
(call_script, "script_determine_troop_morale", 0, 0),
]),

(1.1, 0, 0, [
(eq, "$host_of_rohan_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_rohan"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_rohan_fallen", 0),
(val_add, "$rohan_status_counter", 1),
(assign, "$host_of_rohan_order_tracking", 0),
(assign, "$host_of_rohan_active", 0),
(faction_set_slot, "fac_isengard", 1, 2),
(faction_set_slot, "fac_dunlanders", 1, 2),
(faction_set_slot, "fac_rohan", 1, 3),
(call_script, "script_determine_troop_morale", 0, 0),
]),

(1.1, 0, 0, [
(eq, "$host_of_lothlorien_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_lothlorien"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_lothlorien_fallen", 0),
(val_add, "$lothlorien_status_counter", 1),
(assign, "$host_of_lothlorien_order_tracking", 0),
(assign, "$host_of_lothlorien_active", 0),
(faction_set_slot, "fac_moria", 1, 2),
(faction_set_slot, "fac_lothlorien", 1, 3),
(call_script, "script_determine_troop_morale", 0, 0),
]),

(1, 0, 0, [
(eq, "$host_of_mordor_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_mordor"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_mordor_fallen", 0),
(val_add, "$mordor_status_counter", 1),
(assign, "$host_of_mordor_order_tracking", 0),
(assign, "$host_of_mordor_active", 0),
(faction_set_slot, "fac_mordor", 1, 1),
(faction_set_slot, "fac_gondor", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
]),

(1, 0, 0, [
(eq, "$host_of_isengard_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_isengard"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_isengard_fallen", 0),
(val_add, "$isengard_status_counter", 1),
(assign, "$host_of_isengard_order_tracking", 0),
(assign, "$host_of_isengard_active", 0),
(faction_set_slot, "fac_isengard", 1, 1),
(faction_set_slot, "fac_rohan", 1, 2),
(call_script, "script_determine_troop_morale", 0, 0),
]),

(1.1, 0, 0, [
(eq, "$host_of_dol_guldur_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_dol_guldur"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_dol_guldur_fallen", 0),
(val_add, "$dol_guldur_status_counter", 1),
(assign, "$host_of_dol_guldur_order_tracking", 0),
(assign, "$host_of_dol_guldur_active", 0),
]),

(1, 0, 0, [
(eq, "$host_of_minas_morgul_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_minas_morgul"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_mordor_fallen", 0),
(val_add, "$mordor_status_counter", 1),
(assign, "$host_of_minas_morgul_order_tracking", 0),
(assign, "$host_of_minas_morgul_active", 2),
]),

(1, 0, 0, [
(eq, "$host_of_udun_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_udun"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_mordor_fallen", 0),
(val_add, "$mordor_status_counter", 1),
(assign, "$host_of_udun_order_tracking", 0),
(assign, "$host_of_udun_active", 2),
]),

(1, 0, 0, [
(eq, "$host_of_gorgoroth_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_gorgoroth"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_mordor_fallen", 0),
(val_add, "$mordor_status_counter", 1),
(assign, "$host_of_gorgoroth_order_tracking", 0),
(assign, "$host_of_gorgoroth_active", 2),
]),

(1, 0, 0, [
(eq, "$host_of_barad_dur_active", 1),
(store_num_parties_of_template, reg0, "pt_host_of_barad_dur"),
(eq, reg0, 0),
], [
(display_message, "str_host_of_mordor_fallen", 0),
(val_add, "$mordor_status_counter", 1),
(assign, "$host_of_barad_dur_order_tracking", 0),
(assign, "$host_of_barad_dur_active", 2),
]),

(0, 0, 0, [
(neg|eq, "$quest_accepted_zendar_river_pirates", 0),
(eq, "$quest_complete_zendar_river_pirates", 0),
], [
(store_num_parties_destroyed_by_player, reg2, "pt_goblin_raiders"),
(store_num_parties_destroyed_by_player, reg12, "pt_goblin_stragglers"),
(val_add, reg2, reg12),
(assign, reg3, 100),
(val_mul, reg3, reg2),
(val_div, reg3, 20),
(set_quest_progression, "qst_hunt_down_river_pirates", reg3),
]),

(0.1, 0, ti_once, [
(store_num_parties_destroyed_by_player, reg2, "pt_goblin_raiders"),
(store_num_parties_destroyed_by_player, reg12, "pt_goblin_stragglers"),
(val_add, reg2, reg12),
(ge, reg2, 20),
], [
(assign, "$quest_complete_zendar_river_pirates", 1),
(set_quest_progression, "qst_hunt_down_river_pirates", 100),
(assign, "$peak_river_pirates", 2),
]),

(1, 48, 1, [(eq, "$nobleman_quest_nobleman_enable", 1),], [
(assign, "$nobleman_quest_nobleman_active", 1),
(enable_party, "$nobleman_quest_party_id"),
(assign, "$nobleman_quest_nobleman_enable", 0),
]),

(1.5, 0, 0.2, [(eq, "$nobleman_quest_nobleman_active", 1),], [
(party_set_ai_behavior, "$nobleman_quest_party_id", 0),
]),

(0.9, 0, 0.2, [(eq, "$nobleman_quest_nobleman_active", 1),], [
(party_set_ai_behavior, "$nobleman_quest_party_id", 1),
]),

(1.3, 0, 0, [
(eq, "$nobleman_quest_nobleman_active", 1),
(party_is_in_town, "$nobleman_quest_party_id", "$nobleman_quest_target_town"),
], [
(assign, "$nobleman_quest_failed", 1),
(assign, "$nobleman_quest_nobleman_active", 0),
(display_message, "str_nobleman_reached_destination", 0),
(fail_quest, "qst_generic_capture_nobleman"),
(call_script, "script_safe_remove_party", "$nobleman_quest_party_id"),
]),

(0.1, 0, 0, [
(eq, "$nobleman_quest_nobleman_active", 1),
(main_party_has_troop|neg, "$agent_type_wanted"),
(party_is_active|neg, "$nobleman_quest_party_id"),
], [
(assign, "$nobleman_quest_failed", 1),
(fail_quest, "qst_generic_capture_nobleman"),
(assign, "$nobleman_quest_nobleman_active", 0),
]),

(0.95, 0, 0.2, [(eq, "$raider_quest_active", 1),], [
(party_set_ai_behavior, "$raider_quest_party_id", 0),
]),

(0.7, 0, 0.2, [(eq, "$raider_quest_active", 1),], [
(party_set_ai_behavior, "$raider_quest_party_id", 1),
(party_set_ai_object, "$raider_quest_party_id", "$raider_quest_target_town"),
]),

(0.1, 0, 0, [
(eq, "$raider_quest_active", 1),
(party_is_active|neg, "$raider_quest_party_id"),
], [
(assign, "$raider_quest_succeeded", 1),
(assign, "$raider_quest_active", 0),
]),

(1.3, 0, 0, [
(eq, "$raider_quest_active", 1),
(party_is_in_town, "$raider_quest_party_id", "$raider_quest_target_town"),
], [
(assign, "$raider_quest_failed", 1),
(assign, "$raider_quest_active", 0),
(display_message, "str_raiders_reached_base", 0),
(fail_quest, "qst_generic_hunt_down_raiders"),
(call_script, "script_safe_remove_party", "$raider_quest_party_id"),
]),

(168, 0, 0, [], [
(val_mul, "$debt_to_merchants_guild", 101),
(val_div, "$debt_to_merchants_guild", 100),
]),

(24, 0, 1, [
(eq, "$deliver_wine_quest_active", 1),
(store_current_day, reg3),
(neg|ge, "$deliver_wine_quest_end_day", reg3),
], [
(fail_quest, "qst_deliver_wine"),
(complete_quest, "qst_deliver_wine"),
(assign, "$deliver_wine_quest_active", 0),
(val_add, "$debt_to_merchants_guild", "$deliver_wine_quest_debt"),
]),

(0.1, 0, 0.1, [
(eq, "$escort_merchant_caravan_quest_active", 1),
(eq, "$escort_merchant_caravan_mode", 1),
], [
(party_set_ai_behavior, "$merchant_caravan_id", 0),
]),

(0.02, 0, 0.1, [
(eq, "$escort_merchant_caravan_quest_active", 1),
(eq, "$escort_merchant_caravan_mode", 0),
(store_distance_to_party_from_party, reg0, "$merchant_caravan_id", 0),
(ge, reg0, 1),
], [
(party_set_ai_behavior, "$merchant_caravan_id", 4),
(party_set_ai_object, "$merchant_caravan_id", 0),
]),

(0.02, 0, 0.1, [
(eq, "$escort_merchant_caravan_quest_active", 1),
(eq, "$escort_merchant_caravan_mode", 0),
(store_distance_to_party_from_party, reg0, "$merchant_caravan_id", 0),
(neg|ge, reg0, 1),
], [
(party_set_ai_behavior, "$merchant_caravan_id", 0),
]),

(0.1, 0, 0, [
(eq, "$escort_merchant_caravan_quest_active", 1),
(party_is_active|neg, "$merchant_caravan_id"),
], [
(fail_quest, "qst_escort_merchant_caravan"),
(complete_quest, "qst_escort_merchant_caravan"),
(assign, "$escort_merchant_caravan_quest_active", 0),
]),

(0.3, 0, 1.1, [
(eq, "$troublesome_bandits_quest_active", 1),
(store_num_parties_destroyed, reg3, "pt_troublesome_bandits"),
(neg|ge, "$troublesome_bandits_eliminated", reg3),
(store_num_parties_destroyed_by_player, reg5, "pt_troublesome_bandits"),
(eq, reg5, "$troublesome_bandits_eliminated_by_player"),
], [
(display_message, "str_bandits_eliminated_by_another", 0),
(fail_quest, "qst_troublesome_bandits"),
(complete_quest, "qst_troublesome_bandits"),
(assign, "$troublesome_bandits_quest_active", 0),
]),

(0.3, 0, 1.1, [
(eq, "$troublesome_bandits_quest_active", 1),
(store_num_parties_destroyed, reg3, "pt_troublesome_bandits"),
(neg|ge, "$troublesome_bandits_eliminated", reg3),
(store_num_parties_destroyed_by_player, reg5, "pt_troublesome_bandits"),
(neg|eq, reg5, "$troublesome_bandits_eliminated_by_player"),
], [
(succeed_quest, "qst_troublesome_bandits"),
(assign, "$troublesome_bandits_quest_active", 0),
(assign, "$troublesome_bandits_quest_succeeded", 1),
]),

(0, 0, 0, [
(entering_town, "$kidnapped_girl_quest_giver_town"),
(main_party_has_troop, "trp_kidnapped_girl"),
], [
(start_map_conversation, "trp_kidnapped_girl"),
(assign, "$talking_with_kidnapped_girl", 1),
(assign, "$kidnapped_girl_brought_back", 1),
]),

(2, 0, 0, [
(check_quest_active, "qst_kidnapped_girl", 0),
(main_party_has_troop, "trp_kidnapped_girl"),
(eq, "$kidnapped_girl_bandits_attacked", 1),
(eq, "$kidnapped_girl_joined", 0),
], [
(assign, "$kidnapped_girl_joined", 1),
]),

(1, 0, 0, [(eq, "$scouting_mission_success", 1),], [
(store_num_parties_of_template, ":local0", "$party_to_track"),
(val_add, ":local0", 1),
(assign, reg1, 0),
(gt, ":local0", 0),
    (try_for_range, reg1, 0, ":local0"),
    (eq, "$scouting_mission_success", 1),
    (store_random_party_of_template, ":local1", "$party_to_track"),
    (store_distance_to_party_from_party, ":local2", 0, ":local1"),
    (neg|gt, ":local2", 8),
    (assign, "$scouting_mission_success", 2),
    (display_message, "str_enemy_scouted", 0),
(try_end),
]),

(24, 0, 0, [(check_quest_active, "qst_quest_oath_of_vengeance", 1),], [
(quest_get_slot, ":local0", "qst_quest_oath_of_vengeance", 3),
(quest_get_slot, ":local1", "qst_quest_oath_of_vengeance", 2),
(quest_get_slot, ":local2", "qst_quest_oath_of_vengeance", 1),
(assign, ":local3", 0),
(assign, ":local4", 0),
(assign, ":local5", 0),
(assign, ":local6", 0),
(assign, ":local7", 0),
(assign, ":local8", 0),
(assign, ":local9", 0),
(assign, ":local10", 0),
(assign, ":local11", 0),
(assign, ":local12", 0),
(assign, ":local13", 0),
(assign, ":local14", 0),
(assign, ":local15", 0),
(assign, ":local16", 0),
(assign, ":local17", 0),
(assign, ":local18", 0),
    (try_begin),
    (eq, ":local1", "fac_mordor"),
    (assign, ":local3", "pt_mordor_scouts"),
    (assign, ":local4", "pt_mordor_patrol"),
    (assign, ":local5", "pt_small_host_of_mordor"),
    (assign, ":local6", "pt_host_of_mordor"),
    (assign, ":local7", "pt_host_of_udun"),
    (assign, ":local8", "pt_host_of_gorgoroth"),
    (assign, ":local9", "pt_host_of_barad_dur"),
    (assign, ":local10", "pt_host_of_minas_morgul"),
    (assign, ":local19", "pt_mordor_caravan"),
    (assign, ":local20", "pt_mordor_prisoner_train"),
    (else_try),
    (eq, ":local1", "fac_isengard"),
    (assign, ":local3", "pt_isengard_scouts"),
    (assign, ":local4", "pt_isengard_patrol"),
    (assign, ":local5", "pt_small_host_of_isengard"),
    (assign, ":local6", "pt_host_of_isengard"),
    (assign, ":local7", "pt_isengard_caravan"),
    (assign, ":local6", "pt_isengard_prisoner_train"),
    (assign, ":local9", "pt_isengard_patrol_b"),
    (assign, ":local10", "pt_isengard_scouts_b"),
    (assign, ":local19", 0),
    (assign, ":local20", 0),
    (else_try),
    (eq, ":local1", "fac_moria"),
    (assign, ":local3", "pt_moria_scouts"),
    (assign, ":local4", "pt_moria_patrol"),
    (assign, ":local5", "pt_small_host_of_moria"),
    (assign, ":local6", 0),
    (assign, ":local7", 0),
    (assign, ":local8", 0),
    (assign, ":local9", 0),
    (assign, ":local10", 0),
    (assign, ":local19", 0),
    (assign, ":local20", 0),
    (else_try),
    (eq, ":local1", "fac_dol_guldur"),
    (assign, ":local3", "pt_dol_guldur_scouts"),
    (assign, ":local4", "pt_dol_guldur_patrol"),
    (assign, ":local5", "pt_small_host_of_dol_guldur"),
    (assign, ":local6", "pt_host_of_dol_guldur"),
    (assign, ":local7", 0),
    (assign, ":local8", 0),
    (assign, ":local9", 0),
    (assign, ":local10", 0),
    (assign, ":local19", 0),
    (assign, ":local20", 0),
(try_end),
(store_num_parties_destroyed_by_player, ":local11", ":local3"),
(store_num_parties_destroyed_by_player, ":local12", ":local4"),
(val_add, ":local11", ":local12"),
(store_num_parties_destroyed_by_player, ":local13", ":local5"),
(val_add, ":local11", ":local13"),
(store_num_parties_destroyed_by_player, ":local14", ":local6"),
(val_add, ":local11", ":local14"),
(store_num_parties_destroyed_by_player, ":local15", ":local7"),
(val_add, ":local11", ":local15"),
(store_num_parties_destroyed_by_player, ":local16", ":local8"),
(val_add, ":local11", ":local16"),
(store_num_parties_destroyed_by_player, ":local17", ":local9"),
(val_add, ":local11", ":local17"),
(store_num_parties_destroyed_by_player, ":local18", ":local10"),
(val_add, ":local11", ":local18"),
(store_num_parties_destroyed_by_player, ":local21", ":local10"),
(val_add, ":local11", ":local21"),
(store_num_parties_destroyed_by_player, ":local22", ":local10"),
(val_add, ":local11", ":local22"),
(assign, ":local23", ":local11"),
(val_add, ":local0", 3),
(store_current_day, ":local24"),
(gt, ":local24", ":local2"),
    (try_begin),
    (neg|ge, ":local23", ":local0"),
    (fail_quest, "qst_quest_oath_of_vengeance"),
    (cancel_quest, "qst_quest_oath_of_vengeance"),
    (call_script, "script_gain_trait_oathbreaker", 0, 0),
    (assign, "$vengeance_quest_active", 0),
    (else_try),
    (ge, ":local23", ":local0"),
    (complete_quest, "qst_quest_oath_of_vengeance"),
    (assign, "$vengeance_quest_active", 0),
    (call_script, "script_gain_trait_oathkeeper", 0, 0),
    (val_sub, ":local0", 3),
    (val_sub, ":local23", ":local0"),
    (val_mul, ":local23", 4),
    (assign, reg1, ":local23"),
    (call_script, "script_update_influence_count", reg1, 0),
    (val_add, "$faction_influence", reg1),
    (display_message, "str_oath_influence_gain", 0),
(try_end),
]),
